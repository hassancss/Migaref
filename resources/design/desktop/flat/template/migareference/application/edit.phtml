<link rel="stylesheet" href="/app/sae/design/desktop/flat/js/codemirror/lib/codemirror.css">
<link rel="stylesheet" href="/app/sae/design/desktop/flat/js/codemirror/addon/hint/show-hint.css">
<link rel="stylesheet" href="/app/sae/design/desktop/flat/js/codemirror/addon/colorpicker/colorpicker.css">
<script defer src="/app/sae/design/desktop/flat/js/codemirror/lib/codemirror.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/mode/css/css.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/edit/matchbrackets.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/edit/closebrackets.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/hint/show-hint.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/hint/css-hint.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/colorpicker/colorview.js"></script>
<script defer src="/app/sae/design/desktop/flat/js/codemirror/addon/colorpicker/colorpicker.js"></script>
<script defer src="https://cdn.datatables.net/plug-ins/2.0.7/sorting/date-eu.js"></script>
<link rel="stylesheet" href="/app/sae/design/desktop/flat/js/minicolor/jquery.minicolors.css">
<script defer src="/app/sae/design/desktop/flat/js/minicolor/jquery.minicolors.js"></script>
<?php
    $option       = $this->getOptionValue();
    $value_id     = $option->getId();
    $application  = $this->getApplication();
    $app_id       = $application->getId();
    $features     = $application->getOptions();
    $setting      = new Migareference_Model_Setting();
                   $setting->find(1);
    $ppUrl        = $this->getUrl('application/privacypolicy') . '/index/id/' . $application->getKey();
    $license      = Siberian_Json::decode(file_get_contents($this->getUrl('migareference/public_license/validateapplicense?app_id='.$app_id)));
?>
<?php if($license['success_message']) : ?>
<?php if(!$license['is_platform']) : ?>
<div class="alert alert-success"><?php echo $license['success_message']; ?></div>
<?php endif; ?>
<?php
    $migareference             = new Migareference_Model_Migareference();
    $defaultmodel              = new Migareference_Model_Default();
    $Utilities                 = new Migareference_Model_Utilities();
    $webhook                   = new Migareference_Model_Webhook();
    $default                   = new Core_Model_Default();
    $base_url                  = $default->getBaseUrl();
    $applicationBasePath       = $base_url."/images/application/".$app_id."/features/migareference/";
    $root                      = $base_url."/app/local/modules/Migareference/resources/appicons/";
    $appKey                    = $application->getGooglemapsKey();
    $admins                    = $migareference->getAdmins($app_id);//AJSHIFT
    $customer_agents           = $migareference->get_customer_agents($app_id);
    $partner_agents            = $migareference->get_partner_agents($app_id);
    $all_agents_collection     = $Utilities->getAllAgents($app_id);
    $pre_report_settings       = $migareference->preReportsettigns($app_id);
    $getDeclinedFixRating      = $migareference->getDeclinedFixRating($app_id);
    $app_content               = $migareference->get_app_content($app_id);
    $gdpr_settings             = $migareference->get_gdpr_settings($app_id);
    $auto_reminders            = $migareference->getReportReminderAuto($app_id);
    $referral_usrs             = $migareference->get_referral_users($app_id);//AJshift
    $report_fields             = $migareference->getreportfield($app_id);
    $allocated_provinces       = $migareference->agentAppProvinces($app_id);//AJshift
    $referrer_provinces        = $migareference->referrerAppProvinces($app_id);//AJshift
    $getallprznotification     = $migareference->getallprznotification($app_id);//Alternative
    $getCreditsApiNotification = $migareference->getCreditsApiNotification($app_id);//could be include
    $automation_trigger        = $migareference->getAutomationTriggers($app_id);
    $all_jobs                  = $migareference->getJobs($app_id);
    $all_jobs_collection       = $Utilities->getAllJobs($app_id,0);//0 for dont add 'Add new job' Prepend
    $all_professions_collection= $Utilities->getAllProfessions($app_id);
    $reminder_types            = $migareference->getReportReminder($app_id);
    $informatToFormatePhoneNumbers   = $migareference->informatToFormatePhoneNumbers($app_id);//could be replaced
    $geoCountries              = $migareference->getGeoCountries($app_id);
    $geoProvinceCountries      = $migareference->geoProvinceCountries($app_id);
    $webhook_report_msg_template= (new Migareference_Model_Webhookerrortemplate())->findAll(['app_id'=>$app_id,'webhook_type'=>'report'])->toArray();
    $webhook_referrer_msg_template= (new Migareference_Model_Webhookerrortemplate())->findAll(['app_id'=>$app_id,'webhook_type'=>'referrer'])->toArray();
    $webhook_reminder_msg_template= (new Migareference_Model_Webhookerrortemplate())->findAll(['app_id'=>$app_id,'webhook_type'=>'reminder'])->toArray();

    if (!count($pre_report_settings)) {
        $migareference->defaultPreSettings($app_id,$value_id,'create');
        $pre_report_settings       = $migareference->preReportsettigns($app_id);
    }
    foreach ($auto_reminders as $key => $value) {
        if ($value['auto_rem_trigger']==6) {
            $auto_fixed_rating[]=$value['auto_rem_fix_rating'];
        }
    }
    foreach ($getDeclinedFixRating as $key => $value) {
            $auto_fixed_rating[]=$value['auto_rem_fix_rating'];
    }
    if (!count($report_fields)) {
      $migareference->reportpage($app_id);
      $report_fields = $migareference->getreportfield($app_id);
    }

    if (!count($all_jobs)) {
      $migareference->default_jobs($app_id);
      $all_jobs = $migareference->getJobs($app_id);
    }
    if (!count($getCreditsApiNotification)) {
        $defaultmodel->setDefaultCreditsApiNotification($app_id);//set default
        $getCreditsApiNotification = $migareference->getCreditsApiNotification($app_id);
    }
    if (!count($all_professions_collection) || count($all_professions_collection)<2) {
      $migareference->default_professions($app_id);
      $all_professions_collection= $Utilities->getAllProfessions($app_id);
    }
    if (!count($app_content)) {
     $migareference->save_app_content($app_id);
     $app_content = $migareference->get_app_content($app_id);
    }
    if (!count($getallprznotification)) {
      $migareference->prz_default_notifications($app_id,$value_id);
    }
    $status         = $migareference->getReportStatus($app_id);
    $status         = $migareference->templateStatus($status,1);
    if (!count($status)) {
      $status_temp    = $migareference->defaultTriggers($app_id,$value_id,"create");
      $status         = $migareference->getReportStatus($app_id);
      $status         = $migareference->templateStatus($status,1);
    }
    $property_status=[];
    $standard_status=[];
    foreach ($status as $key => $value) {
      if ($value['is_standard']) {
        $standard_status[]=[
          'migareference_report_status_id'=> $value['migareference_report_status_id'],
          'status'        => $value['status'],
          'status_title'  => $value['status_title'],
          'is_standard'   => $value['is_standard'],
          'standard_type' => $value['standard_type'],
          'joined_repoort'=> $value['joined_repoort'],
        ];
        $standard_types[]=$value['standard_type'];
      }
      $property_status[]=[
        'migareference_report_status_id'=> $value['migareference_report_status_id'],
        'status'        => $value['status'],
        'status_title'  => $value['status_title'],
        'is_standard'   => $value['is_standard'],
        'standard_type' => $value['standard_type'],
        'joined_repoort'=> $value['joined_repoort'],
        'order_id'      => $value['order_id'],
      ];
    }
    // Map Account DOB settings in Module
    $user_account_settings    = $migareference->useraccountSettings($app_id);
    $user_account_settings    = json_decode($user_account_settings[0]['settings']);
    $pre_report_settings[0]['enable_birthdate']    = ($user_account_settings->extra_birthdate) ? 1 : 2 ;
    $pre_report_settings[0]['mandatory_birthdate'] = ($user_account_settings->extra_birthdate_required) ? 1 : 2 ;
    if (count($pre_report_settings)) {
      $standard_limit    = 3;
      $standard_index    = count($standard_status)+1;
      if ($pre_report_settings[0]['commission_type']==1 || $pre_report_settings[0]['commission_type']==3) {
        $standard_limit++;
      }
      if ($standard_index>3 && $pre_report_settings[0]['commission_type']==1 && !in_array(4, $standard_types)) {
        $standard_index=4;
      }
      if ($standard_index>3 && $pre_report_settings[0]['commission_type']==3 && !in_array(4, $standard_types)) {
        $standard_index=4;
      }
    }
    if (count($standard_status)<$standard_limit){
      $need_standard=1;
      $standard=$standard_index;
    }else {
      $need_standard=0;
      $standard=0;
    }
    if (!count($gdpr_settings)) {
        $migareference->defaultGdprTemplates($app_id,$value_id);
        $gdpr_settings = $migareference->get_gdpr_settings($app_id);
    }
    if (!count($reminder_types)) {
      $defaultmodel->defaultReminderSettings($app_id);
      $report_fields = $migareference->getReportReminder($app_id);
      $reminder_types= $migareference->getReportReminder($app_id);
    }
?>

<p>
    <a href="<?php echo !empty($setting->getHelpUrl()) ? $setting->getHelpUrl() : 'https://www.migastone.com/migareference'; ?>"
        target="_blank" class="link-help color-blue btn">
        <i class="fa fa-question-circle"></i>
    </a>
</p>
<?php if (!count($admins)): ?>
<div class="alert alert-danger">
    <p style="padding-left:15px;">
        <?php echo __('Warning! The Admin is not set, the module is now in READ ONLY mode. Please go in Admins tab and set the User Admin') ?>
    </p>
</div>
<?php endif; ?>
<div id="migareference" class="module-migareference">
    <div class="navbar-btn btn-sm"></div>
    <ul class="nav nav-tabs custome_nav" role="tablist">
        <li role="presentation" class="active">
            <a href="#tab_user_groups" aria-controls="tab_user_groups" role="tab"
                data-toggle="tab"><?php echo __('Report Status'); ?></a>
        </li>
        <li role="presentation" class="">
            <a href="#tab_app_owners" aria-controls="tab_app_owners" role="tab"
                data-toggle="tab"><?php echo __('Settings'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_push" aria-controls="tab_push" onclick="statusTab()" role="tab" data-toggle="tab"><?php echo __('Status'); ?></a>
        </li>
        <li role="presentation">
            <a onclick='populateHowItWorks()' href="#tab_news" aria-controls="tab_news" role="tab" data-toggle="tab"><?php echo __('How app Works'); ?>?</a>
        </li>
        <li role="presentation">
            <a href="#tab_prizes" aria-controls="tab_prizes" role="tab" data-toggle="tab"><?php echo __('Prizes'); ?>
            </a>
        </li>
        <li role="presentation">
            <a href="#tab_manageprizes" aria-controls="tab_manageprizes" role="tab"
                data-toggle="tab"><?php echo __('Manage Prizes'); ?> </a>
        </li>
        <li role="presentation">
            <a href="#tab_prizesnotification" onclick="prizeNotificationTab()" aria-controls="tab_prizesnotification" role="tab"
                data-toggle="tab"><?php echo __('Prizes Notification'); ?> </a>
        </li>
        <li role="presentation">
            <a href="#tab_gdpr" aria-controls="tab_gdpr" role="tab" data-toggle="tab"><?php echo __('GDPR'); ?> </a>
        </li>
        <li role="presentation">
            <a href="#tab_admins" aria-controls="tab_admins" role="tab" data-toggle="tab"><?php echo __('Admins'); ?>
            </a>
        </li>
        <li role="presentation">
            <a href="#tab_creditledger" aria-controls="tab_creditledger" role="tab"
                data-toggle="tab"><?php echo __('Ledger'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_appcontent" aria-controls="tab_appcontent" role="tab"
                data-toggle="tab"><?php echo __('APP Content'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_reportpage" aria-controls="tab_reportpage" role="tab"
                data-toggle="tab"><?php echo __('Report Page'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_propertyaddress" onclick="loadAddress()" aria-controls="tab_propertyaddress" role="tab"data-toggle="tab"><?php echo __('Report Addresses'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_jobs" onclick="loadJobs()" aria-controls="tab_jpbs" role="tab"
                data-toggle="tab"><?php echo __('Jobs & Sectors'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_sponsor_geolocation" aria-controls="tab_jpbs" role="tab"
                data-toggle="tab"><?php echo __('Countries & Provinces'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_prospect" aria-controls="tab_prospect" role="tab"
                data-toggle="tab"><?php echo __('Phonebook'); ?></a>
        </li>
        <li role="presentation">
            <a onClick="reminderTab('live')" href="#tab_reminder" aria-controls="tab_reminder" role="tab"
                data-toggle="tab"><?php echo __('Reminder'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_api" aria-controls="tab_api" role="tab" data-toggle="tab"><?php echo __('Report & Credit API'); ?></a>
        </li>
        <li role="presentation">
            <a href="#tab_twillioapi" aria-controls="tab_twilioapi" role="tab"
                data-toggle="tab"><?php echo __('Twillio API'); ?></a>
        </li>
        <li role="presentation">
            <a onclick="populateOptionForm()" href="#tab_optionform" aria-controls="tab_optinform" role="tab"
                data-toggle="tab"><?php echo __('OPTIN Form'); ?></a>
        </li>
        <li role="presentation">
            <a onclick="populateAIItegration()" href="#tab_ai_integration" aria-controls="tab_ai_integration" role="tab"
                data-toggle="tab"><?php echo __('AI Integration'); ?></a>
        </li>
         
        <?php if ($pre_report_settings[0]['enable_qlf']==1) { ?>                    
            <li role="presentation">
                <a onclick="populateQualification()" href="#tab_qualification" aria-controls="tab_qualification" role="tab"
                    data-toggle="tab"><?php echo __('Qualifications'); ?></a>
            </li>
        <?php } ?>
        <li role="presentation">
            <a href="#tab_background" aria-controls="tab_background" role="tab"
                data-toggle="tab"><?php echo __('Background'); ?></a>
        </li>
    </ul>
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane" id="tab_app_owners">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Settings'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <p class="heading" id="para-new-group"><?php echo __('Add settings'); ?></p>
                <form id="addPreAppSettings"
                    action="<?php echo $this->getUrl('migareference/application/saveprereport'); ?>">
                    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                    <input type="hidden" name="operation"
                        value="<?=(count($pre_report_settings) && !empty($pre_report_settings[0]['app_id']) ) ? "update" : "create" ; ?>" />
                    <input type="hidden" name="migareference_pre_report_settings_id"
                        value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <div class="form-horizontal">
                        <ul id="progressbar">
                            <li class="active"><?php echo __('Commission Setup') ?></li>
                            <li><?php echo __('Report Page') ?></li>
                            <li><?php echo __('Settings Page') ?></li>
                            <li><?php echo __('General settings') ?></li>
                            <li><?php echo __('Submit') ?></li>
                        </ul>
                        <fieldset>
                            <input style="float:right;" type="button" name="next" class="next button  btn color-blue"
                                value="<?php echo __('Next') ?>" />
                            <h2 class="fs-title"><?php echo __('Commission Setup') ?></h2>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="reward_type"><?php echo __('Reward Type'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="reward_type" class="input-flat" name="reward_type">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) & $pre_report_settings[0]['reward_type']==1) ? "selected" : "" ; ?>>
                                            <?php echo __("Euro Commission"); ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) & $pre_report_settings[0]['reward_type']==2) ? "selected" : "" ; ?>>
                                            <?php echo __("Credits"); ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="commission_type"><?php echo __('Commission Type'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="comision_type" class="input-flat" name="commission_type">
                                        <option value="1"
                                            <?=(count($pre_report_settings) & $pre_report_settings[0]['commission_type']==1) ? "selected" : "" ; ?>>
                                            <?php echo __("% Commission"); ?></option>
                                        <option value="2" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) & $pre_report_settings[0]['commission_type']==2) ? "selected" : "" ; ?>>
                                            <?php echo __("Fix Commission"); ?></option>
                                        <option value="3"
                                            <?=(count($pre_report_settings) & $pre_report_settings[0]['commission_type']==3) ? "selected" : "" ; ?>>
                                            <?php echo __("Price Range"); ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="percent_commission_container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="percent_commission_amount"><?php echo __('Percent Commission'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="percent_commission_amount" id="percent_commission_amount"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['percent_commission_amount'] : 30 ; ?>"
                                        class="input-flat" class="input-flat" />
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="percent_commission_credits_container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="percent_commission_credits"><?php echo __('Percent Credits'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="percent_commission_credits" id="percent_commission_credits"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['percent_commission_credits'] : 30 ; ?>"
                                        class="input-flat" class="input-flat" />
                                </div>
                            </div>
                            <div class=" commission_fields" id="price_range_container" style="display:none">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="percent_commission_credits"><?php echo __('Price Range From'); ?>
                                        </label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="text" name="price_range_text_from" id="price_range_text_from"
                                            value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['price_range_text_from'] : 5000 ; ?>"
                                            class="input-flat" class="input-flat" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="percent_commission_credits"><?php echo __('Price Range To'); ?>
                                        </label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="text" name="price_range_text_to" id="price_range_text_to"
                                            value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['price_range_text_to'] : 10000 ; ?>"
                                            class="input-flat" class="input-flat" />
                                    </div>
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="fix_commission_container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="fix_commission_amount"><?php echo __('Fix Commission Amount'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="fix_commission_amount" id="fix_commission_amount"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['fix_commission_amount'] : 500 ; ?>"
                                        class="input-flat" class="input-flat"
                                         />
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="commission_lable_container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="commission_lable"><?php echo __('Commission Label'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="commission_lable" id="commission_lable"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['commission_lable'] : '€' ; ?>"
                                        class="input-flat" class="input-flat"
                                         />
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="fix_commission_credits_container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="fix_commission_credits"><?php echo __('Fix Commission Credits'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="fix_commission_credits" id="fix_commission_credits"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['fix_commission_credits'] : "" ; ?>"
                                        class="input-flat"  class="input-flat"
                                         />
                                </div>
                            </div>
                            <div class="form-group commission_fields" id="credit_expire_container" style="display:none">
                                <div class="col-sm-4">
                                    <label for="credit_expire"><?php echo __('Auto credit expire after days'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="number" name="credit_expire" id="credit_expire"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['credit_expire'] : 365 ; ?>"
                                        class="input-flat" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="payable_limit"><?php echo __('Limit'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="payable_limit" id="payable_limit"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['payable_limit'] : 5000 ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <input type="button" name="previous" class="previous button  btn color-blue-previous"
                                value="<?php echo __('Previous') ?>" />
                            <input style="float:right;" type="button" name="next" class="next button  btn color-blue"
                                value="<?php echo __('Next') ?>" />
                            <h2 class="fs-title"><?php echo __('Report Page') ?></h2>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Invite Prospectus'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="is-visible-invite-prospectus" class="input-flat"
                                        name="is_visible_invite_prospectus">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_invite_prospectus']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_invite_prospectus']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Submit Report'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="is_visible_submit_report">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_submit_report']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_submit_report']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Report Type'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_report_type">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_type']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_type']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Create a report in behalf of a REFERRER'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_report_referrer_behalf">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_referrer_behalf']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_referrer_behalf']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Refrence Level'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="refrence_level">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['refrence_level']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['refrence_level']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Report for Platform'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="is_visible_platform_report">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_platform_report']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Both') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_platform_report']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('Only IOS') ?></option>
                                        <option value="3"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['is_visible_platform_report']==3) ? "selected" : "" ; ?>>
                                            <?php echo __('Only Android') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" style="display:none;">
                                <div class="col-sm-4">
                                    <label for="owner_hot_label"><?php echo __('How hot is the contact'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input class="input-flat" id="owner_hot_label" type="text" name="owner_hot_label"
                                        value="<?=(count($pre_report_settings) && !empty($pre_report_settings[0]['owner_hot_label'])) ? $pre_report_settings[0]['owner_hot_label'] : 'Quanto ha urgenza il contatto?' ; ?>" />
                                </div>
                            </div>
							<!-- commented by imran start -->
                            <!-- <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="confirm_report_privacy_label"><?php echo __('Privacy Label'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input class="input-flat" id="confirm_report_privacy_label" type="text"
                                        name="confirm_report_privacy_label"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['confirm_report_privacy_label'] : 'Accetto linformativa privacy' ; ?>" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="confirm_report_privacy_link"><?php echo __('Privacy Link'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input class="input-flat" id="confirm_report_privacy_link" type="text"
                                        name="confirm_report_privacy_link"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['confirm_report_privacy_link'] : $ppUrl ; ?>" />
                                </div>
                            </div> -->
							<!-- commneted by imran end -->
							<!-- added by imran start -->
							<!-- <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="custom_landing_report_text"><?php echo __('Custom Text'); ?></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea type="text" rows="4" cols="50" id="custom_landing_report_text" class="input-flat" name="custom_landing_report_text"><?=(count($pre_report_settings)) ? $pre_report_settings[0]['custom_landing_report_text'] : "" ; ?></textarea>
									<p><small><?php echo __('This text will be displayed just above the Privacy Label and right below your last form field.'); ?></small></p>
                                </div>
                            </div> -->
							<!-- added by imran end -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="authorized_call_back_label"><?php echo __('Authorized Label'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input class="input-flat" id="authorized_call_back_label" type="text"
                                        name="authorized_call_back_label"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['authorized_call_back_label'] : 'Autorizzo ad essere ricontattato per info commerciali' ; ?>" />
                                </div>
                            </div>
                            <!-- added by imran start -->
							<div class="form-group">
                                <div class="col-sm-4">
                                    <label for="authorized_call_back_visibility"><?php echo __('Commercial Consent Enabled'); ?>?</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="authorized_call_back_visibility">
                                        <option value="1">
                                            <?php echo __('Yes') ?></option>
                                        <option value="0"
                                            <?=(count($pre_report_settings) && !$pre_report_settings[0]['authorized_call_back_visibility']) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
							<!-- added by imran end -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="landing_pg_header_txt"><?php echo __('Landing Page Header Label'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input class="input-flat" id="landing_pg_header_txt" type="text"
                                        name="landing_pg_header_txt"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['landing_pg_header_txt'] : 'Segnala un proprietario' ; ?>" />
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                              <input type="button" name="previous" class="previous button  btn color-blue-previous"
                                value="<?php echo __('Previous') ?>" />
                            <input style="float:right;" type="button" name="next" class="next button  btn color-blue"
                                value="<?php echo __('Next') ?>" />
                            <h2 class="fs-title"><?php echo __('Settings Page') ?></h2>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Sponsor Type'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="sponsor_type_settings" class="input-flat" name="sponsor_type">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Standard') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('Geolocation') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div style="display:<?=(count($pre_report_settings) && $pre_report_settings[0]['enable_only_agent_provinces']==1) ? 'none' : '' ; ?>"
                                class="form-group" id="enable_only_agent_provinces_container">
                                <div class="col-sm-4">
                                    <label
                                        for="read_only"><?php echo __('Allow only registration for provinces enabled'); ?>
                                        ? </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_only_agent_provinces">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_only_agent_provinces']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_only_agent_provinces']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_multi_agent_selection"><?php echo __('Enable Multiple agent selection'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select  id="enable_multi_agent_selection" class="input-flat" name="enable_multi_agent_selection"  >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_multi_agent_selection']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_multi_agent_selection']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id='agent_type_label_one_container' style='<?=(count($pre_report_settings) && $pre_report_settings[0]['enable_multi_agent_selection']==2) ? 'display:none' : "" ; ?>'>
                                <div class="col-sm-4">
                                    <label for="agent_type_label_one"><?php echo __('Label for Agent Type One'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="agent_type_label_one" id="agent_type_label_one"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['agent_type_label_one'] : "Type one" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group" id='agent_type_label_two_container' style='<?=(count($pre_report_settings) && $pre_report_settings[0]['enable_multi_agent_selection']==2) ? 'display:none' : "" ; ?>'>
                                <div class="col-sm-4">
                                    <label for="agent_type_label_two"><?php echo __('Label for Agent Type Two'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="agent_type_label_two" id="agent_type_label_two"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['agent_type_label_two'] : "Type two" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_mandatory_agent_selection"><?php echo __('Enable mandatory agent selection'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select onChange='enableAgentManadorySelection(<?php echo COUNT($customer_agents) ?>)' id="enable_mandatory_agent_selection" class="input-flat" name="enable_mandatory_agent_selection" <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "disabled='disabled'" : "" ; ?> >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_mandatory_agent_selection']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_mandatory_agent_selection']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                               <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_main_address"><?php echo __('Enable address (Country, Province)'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="enable_main_address" class="input-flat" name="enable_main_address" <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "disabled='disabled'" : "" ; ?> >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_main_address']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_main_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_main_address"><?php echo __('Mandatory address (Country, Province)'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="mandatory_main_address" class="input-flat" name="mandatory_main_address" <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "disabled='disabled'" : "" ; ?> >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_main_address']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_main_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_sub_address"><?php echo __('Enable sub address (Street, ZIP, City)'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="enable_sub_address" class="input-flat" name="enable_sub_address" <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "disabled='disabled'" : "" ; ?> >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_sub_address']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_sub_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_sub_address"><?php echo __('Mandatory sub address (Street, ZIP, City)'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="mandatory_sub_address" class="input-flat" name="mandatory_sub_address" <?=(count($pre_report_settings) && $pre_report_settings[0]['sponsor_type']==2) ? "disabled='disabled'" : "" ; ?> >
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_sub_address']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_sub_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Company field'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_company">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_company']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_company']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_company"><?php echo __('Mandatory Company'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_company">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_company']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_company']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" style="display:none;" >
                                <div class="col-sm-4">
                                    <label for="enable_legal_address"><?php echo __('Enable Legal Address field'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_legal_address">
                                        <option value="1" >
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_legal_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_legal_address"><?php echo __('Mandatory Legal Address'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_legal_address">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_legal_address']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_legal_address']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_sector"><?php echo __('Mandatory Sector'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_sector">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_sector']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_sector']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_profession"><?php echo __('Mandatory Profession'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_profession">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_profession']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_profession']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_birthdate"><?php echo __('Enable Birth Date'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_birthdate">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_birthdate']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_birthdate']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_birthdate"><?php echo __('Mandatory Birth Date'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_birthdate">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_birthdate']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_birthdate']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div> -->
                            <!-- Extra Fileds -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="extra_one"><?php echo __('Enable Extra 1'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="extra_one">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['extra_one']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['extra_one']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="mandatory_extra_one"><?php echo __('Mandatory Extra 1'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_extra_one">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_extra_one']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_extra_one']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="extra-one-lable-text"><?php echo __('Label Text for extra 1'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="extra_one_label" id="extra-one-lable-text"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['extra_one_label'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Extra 2'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="extra_two">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['extra_two']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['extra_two']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Mandatory Extra 2'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_extra_two">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_extra_two']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_extra_two']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="extra-two-lable-text"><?php echo __('Label Text for extra 2'); ?>
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="extra_two_label" id="extra-two-lable-text"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['extra_two_label'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Birthdate'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_birthdate">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_birthdate']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_birthdate']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Mandatory Birthdate'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="mandatory_birthdate">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_birthdate']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mandatory_birthdate']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification_type"><?php echo __('Notifications Type'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="notification_type">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['notification_type']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Email/Push Notifications') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['notification_type']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('Only Email') ?></option>
                                        <option value="3"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['notification_type']==3) ? "selected" : "" ; ?>>
                                            <?php echo __('Only Push') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification_type"><?php echo __('Privacy'); ?> *</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea type="text" rows="4" cols="50" id="message_privacy" class=" input-flat replace-with-ckeditor" name="privacy"><?=(count($pre_report_settings)) ? $pre_report_settings[0]['privacy'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification_type"><?php echo __('Terms'); ?> *</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea class="pin input-flat replace-with-ckeditor" name="terms" rows="5"
                                        cols="80"><?=(count($pre_report_settings)) ? $pre_report_settings[0]['terms'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <h4 for="notification_type"><?php echo __('Special Terms'); ?> </h4>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="term-lable-text"><?php echo __('Label Text'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="term_label_text" id="term-lable-text"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['term_label_text'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="special-terms"><?php echo __('Terms'); ?> </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea id="special-terms" class="pin input-flat replace-with-ckeditor" name="special_terms" rows="2" cols="80"><?=(count($pre_report_settings)) ? $pre_report_settings[0]['special_terms'] : "" ; ?></textarea>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <input type="button" name="previous" class="previous button  btn color-blue-previous"
                                value="<?php echo __('Previous') ?>" />
                            <input style="float:right;" type="button" name="next" class="next button  btn color-blue"
                                value="<?php echo __('Next') ?>" />
                            <h2 class="fs-title"><?php echo __('General settings') ?></h2>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('APP Read Only?'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="read_only">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['read_only']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['read_only']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Check App Version?'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="check_app_version">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_app_version']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_app_version']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Android App Version Check?'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="check_android_version">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_android_version']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_android_version']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __('Android Store Version'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="android_store_version" id="android-store-version"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['android_store_version'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable IOS App Version Check?'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="check_ios_version">
                                        <option value="1"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_ios_version']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['check_ios_version']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __('IOS Store Version'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="ios_store_version" id="ios-store-version"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['ios_store_version'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Can agent see reports'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="agent_can_see">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_see']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_see']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable GDPR'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="consent_collection">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['consent_collection']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['consent_collection']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Reminder WebHooks'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_webhooks">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_webhooks']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_webhooks']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                           <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="enable_qlf">
                                    <?php echo __('Enable qualification feature'); ?> *
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_qlf">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_qlf']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_qlf']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                           <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="qlf_grace_days">
                                    <?php echo __('Qualification Grace Days'); ?> *
                                    </label>
                                </div>
                                <div class="col-sm-8">
                                    <input 
                                    type="number" 
                                    class="input-flat" 
                                    name="qlf_grace_days" 
                                    id="qlf_grace_days"
                                    value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['qlf_grace_days'] : '';?>"
                                    />
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Can agent manage reports'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="agent_can_manage">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_manage']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_manage']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Can agent manage Reminder Automations'); ?>?
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="agent_can_manage_reminder_automation">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_manage_reminder_automation']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['agent_can_manage_reminder_automation']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Working Days Count (Exclude Weekends)'); ?>?*</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="working_days">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['working_days']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['working_days']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable reminder recap email'); ?>?*</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="recap_email_enable">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['recap_email_enable']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['recap_email_enable']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Recap Email Preferred Language'); ?>?*</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="recap_email_lang">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['recap_email_enable']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Italian') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['recap_email_enable']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('English') ?></option>
                                    </select>
                                    <small><?php echo __("NOTE: This will translate only hardcoded labels inside email template. Rest of text will be used as per given configurations inside reminder section.") ?></small>
                                </div>
                            </div>
                            <div class="form-group" >
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Reminder Recap email bcc receipents'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="recap_email_bcc" id="recap_email_bcc"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['recap_email_bcc'] : "recap_email_bcc" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group" >
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Reminder Recap email Subject'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="recap_email_subject" id="recap_email_subject"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['recap_email_subject'] : "recap_email_subject" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group" style='display:none' >
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Bitly Login'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="bitly_login" id="bitly-login"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['bitly_login'] : "bitly_login" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group" style='display:none'>
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Bitly Key'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="text" name="bitly_key" id="bitly-key"
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['bitly_key'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                        </fieldset>
                        <fieldset>
                            <input type="button" name="previous" class="previous button  btn color-blue-previous"
                                value="<?php echo __('Previous') ?>" />
                            <button style="float:right;" class="button btn bt_save btn color-blue" type="submit">
                                <?php echo __('Save'); ?>
                            </button>
                        </fieldset>
                    </div>
                </form>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane active" id="tab_user_groups">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Report Status'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <div class="report-detail-form">
                    <div class="tab" style='dispaly:block;'>
                        <button class="tablinks ReportDetailsTab active" onclick="openTab(event, 'ReportDetails')"><?php echo __('Report Details'); ?></button>
                        <button class="tablinks" onclick="openTab(event, 'Reminders')"><?php echo __('Reminders'); ?></button>
                        <button class="tablinks" onclick="openTab(event, 'Notes')"><?php echo __('Notes'); ?></button>
                        <button class="tablinks pull-right btn color-blue" onclick="showreporttable()"><?php echo __('Back'); ?></button>
                    </div>
                    <!-- Report Details Tab -->
                    <div id="ReportDetails" class="tabcontent" style='dispaly:block;'>
                        <form id="updatereport" action="<?php echo $this->getUrl('migareference/application/updatereport'); ?>">
                            <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                            <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                            <input type="hidden" id="order_id" name="order_id" value="" />
                            <input type="hidden" id="new_order_id" name="new_order_id" value="" />
                            <input type="hidden" id="commission_type_report" name="commission_type" value="" />
                            <input type="hidden" id="migareference_report_id" name="migareference_report_id" value="" />
                            <input type="hidden" id="commission_fee_report" name="commission_fee_report" value="" />
                            <input type="hidden" id="referral_user_id" name="referral_user_id" value="" />
                            <input type="hidden" id="is_acquired_text" name="is_acquired" value="" />
                            <input type="hidden" id="reward_type_report_detail" name="reward_type" value="" />
                            <input type="hidden" id="is_standard" name="is_standard" value="" />
                            <input type="hidden" id="standard_type" name="standard_type" value="" />
                            <div class="form-horizontal">
                                <div id="dynamic_form_detail">

                                </div>

                                <div class="form-group"
                                    style="display:<?=(count($pre_report_settings) && $pre_report_settings[0]['refrence_level']==1) ? "" : "none" ; ?>">
                                    <div class="col-sm-3">
                                        <label for="owner_hot"><?php echo __('How hot is the Contact'); ?>? *</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input type="hidden" name="owner_hot" id="owner_hot" value="3" class="input-flat" />
                                        <div class="form-group" style="padding:12px;padding-top:10px;">
                                            <div class="col-sm-2" style="padding:0px;">
                                                <div class="" style="height:100px;padding-top:79px">
                                                    <div class="" style="height:20px;background-color:#fbd33e;">
                                                    </div>
                                                </div>
                                                <div class="" style="width:100%">
                                                    <button onclick="owneractiverNumber(1)" style=""
                                                        class="btn pile pile_1 inactive_pile" type="button"
                                                        name="button">1</button>
                                                </div>
                                            </div>
                                            <div class="col-sm-2" style="padding:0px;">
                                                <div class="" style="height:100px;padding-top:59px">
                                                    <div class="" style="height:40px;background-color:#f7b13f;">
                                                    </div>
                                                </div>
                                                <div class="" style="width:100%">
                                                    <button onclick="owneractiverNumber(2)"
                                                        class="btn pile pile_2 inactive_pile" type="button"
                                                        name="button">2</button>
                                                </div>
                                            </div>
                                            <div class="col-sm-2" style="padding:0px;">
                                                <div class="" style="height:100px;padding-top:39px">
                                                    <div class="" style="height:60px;background-color:#f78d43">
                                                    </div>
                                                </div>
                                                <div class="" style="width:100%">
                                                    <button onclick="owneractiverNumber(3)"
                                                        class="btn pile pile_3 active_pile" type="button"
                                                        name="button">3</button>
                                                </div>
                                            </div>
                                            <div class="col-sm-2" style="padding:0px;">
                                                <div class="" style="height:100px;padding-top:19px">
                                                    <div class="" style="height:80px;background-color:#f36a48">
                                                    </div>
                                                </div>
                                                <div class="" style="width:100%">
                                                    <button onclick="owneractiverNumber(4)"
                                                        class="btn pile pile_4 inactive_pile" type="button"
                                                        name="button">4</button>
                                                </div>
                                            </div>
                                            <div class="col-sm-2" style="padding:0px;">
                                                <div class="" style="height:100px;">
                                                    <div class="" style="height:99px;background-color:#ee494d">
                                                    </div>
                                                </div>
                                                <div class="" style="width:100%">
                                                    <button onclick="owneractiverNumber(5)"
                                                        class="btn pile pile_5 inactive_pile " type="button"
                                                        name="button">5</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group address_field_view">
                                    <div class="col-md-12" id="main" style="height: 200px;">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12 text-right">
                                        <button class="button btn bt_save btn color-blue" type="submit">
                                            <?php echo __('Save'); ?>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="">
                            <table id="report_log" class="table content-white-bkg">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Date'); ?></th>
                                        <th><?php echo __('User'); ?></th>
                                        <th><?php echo __('Type'); ?></th>
                                        <th><?php echo __('Source'); ?></th>
                                        <th><?php echo __('Detail'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Content for Reminders -->
                    <div id="Reminders" class="tabcontent">
                            <table id="report_reminders" class="table content-white-bkg">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('UID'); ?></th>
                                        <th><?php echo __('Event At'); ?></th>
                                        <th><?php echo __('Type'); ?></th>
                                        <th><?php echo __('Action'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                    </div>

                    <!-- Content for Notes -->
                    <div id="Notes" class="tabcontent">
                        <div class="">
                             <!-- Button to add new note -->
                            <!-- <button title="Add New Note" type="button" id="add-new-note" onclick="addNewNote()" class="button pull-right btn color-blue">
                                <i class="fa fa-plus"></i>
                            </button> -->
                            <!-- Hidden HTML form for new note -->
                            <div id="new-note-form" style="display: none;">
                                <form id="migarefrencesingleprofession" method="post" action="<?php echo $this->getUrl('migareference/application/addnote') ?>">
                                    <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                    <input type="hidden" name="operation" id="note-operation" value="" />
                                    <input type="hidden" name="note_id" id="note_id" value="" />
                                    <div class="form-group">
                                        <div class="col-sm-4 ">
                                            <label for="profession_type_text"><?php echo __('Add Note'); ?><sup>*</sup></label>
                                        </div>
                                        <div class="col-sm-4 ">
                                            <textarea id='note_text' class="pin input-flat" name="note_text" rows="4" cols="80"></textarea>
                                        </div>
                                    </div>
                                    <br><br>
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue" type="submit">
                                            <?php echo __('Save'); ?>
                                        </button>
                                    </div>
                                </form>
                            </div>

                            <table id="report_notes" class="table content-white-bkg">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('UID'); ?></th>
                                        <th><?php echo __('Date'); ?></th>
                                        <th><?php echo __('Note'); ?></th>
                                        <th><?php echo __('Action'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div>
                <div class="container-fluid add-new-report">
                    <p class="heading" id="para-new-group"><?php echo __('Add new Report'); ?></p>
                    <button class="button btn bt_save btn color-blue" onclick="showreporttable()" type="button"
                        name="button"><?php echo __("Back") ?></button>
                    <form id="saveNewReport"
                        action="<?php echo $this->getUrl('migareference/application/savereport'); ?>">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="alert alert-danger" id="new-report-user-warrning" style="display:none;">
                            <p style="padding-left:15px;">
                                <?php echo __('Warning! This user has not accepted the T&C, do you want to activate it and place the report in his name?') ?>
                            </p>
                        </div>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="report_note"><?php echo __('Internal Note'); ?></label>
                                </div>
                                <div class="col-sm-6">
                                    <textarea class="pin input-flat" name="report_note" rows="4" cols="80"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal" id="report-form-container">
                            <!-- Dynamic form will be embed in this div -->
                        </div>
                        <div class="form-horizontal"
                            style="display:<?=(count($pre_report_settings) && $pre_report_settings[0]['refrence_level']==1) ? "" : "none" ; ?>">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="owner_hot"><?php echo __('How hot is the Contact'); ?> ? *</label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="hidden" name="owner_hot" id="owner_hot_new_report" value="3"
                                        class="input-flat" />
                                    <div class="form-group" style="padding:12px;padding-top:10px;">
                                        <div class="col-sm-2" style="padding:0px;">
                                            <div class="" style="height:100px;padding-top:79px">
                                                <div class="" style="height:20px;background-color:#fbd33e;">
                                                </div>
                                            </div>
                                            <div class="" style="width:100%">
                                                <button onclick="owneractiverNumber(1)" style=""
                                                    class="btn pile pile_1 inactive_pile" type="button"
                                                    name="button">1</button>
                                            </div>
                                        </div>
                                        <div class="col-sm-2" style="padding:0px;">
                                            <div class="" style="height:100px;padding-top:59px">
                                                <div class="" style="height:40px;background-color:#f7b13f;">
                                                </div>
                                            </div>
                                            <div class="" style="width:100%">
                                                <button onclick="owneractiverNumber(2)"
                                                    class="btn pile pile_2 inactive_pile" type="button"
                                                    name="button">2</button>
                                            </div>
                                        </div>
                                        <div class="col-sm-2" style="padding:0px;">
                                            <div class="" style="height:100px;padding-top:39px">
                                                <div class="" style="height:60px;background-color:#f78d43">
                                                </div>
                                            </div>
                                            <div class="" style="width:100%">
                                                <button onclick="owneractiverNumber(3)"
                                                    class="btn pile pile_3 inactive_pile " type="button"
                                                    name="button">3</button>
                                            </div>
                                        </div>
                                        <div class="col-sm-2" style="padding:0px;">
                                            <div class="" style="height:100px;padding-top:19px">
                                                <div class="" style="height:80px;background-color:#f36a48">
                                                </div>
                                            </div>
                                            <div class="" style="width:100%">
                                                <button onclick="owneractiverNumber(4)"
                                                    class="btn pile pile_4 inactive_pile" type="button"
                                                    name="button">4</button>
                                            </div>
                                        </div>
                                        <div class="col-sm-2" style="padding:0px;">
                                            <div class="" style="height:100px;">
                                                <div class="" style="height:99px;background-color:#ee494d">
                                                </div>
                                            </div>
                                            <div class="" style="width:100%">
                                                <button onclick="owneractiverNumber(5)"
                                                    class="btn pile pile_5 inactive_pile " type="button"
                                                    name="button">5</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                                <div class="col-sm-12 text-right">
                                    <button class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </div>
                    </form>
                </div>
                <form id="updatebulkreport" action="<?php echo $this->getUrl('migareference/application/updatebulkreport'); ?>">
                <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                <input id="order_id_bulk" type="hidden" name="order_id_bulk" value="1" />
                <input id="standard_type_bulk" type="hidden" name="standard_type_bulk" value="1" />
                <input id="is_standard_bulk" type="hidden" name="is_standard_bulk" value="1" />
                <input id="is_comment_bulk" type="hidden" name="is_comment_bulk" value="1" />
                <input id="is_acquired_bulk" type="hidden" name="is_acquired_bulk" value="0" />
                <div class="" id="filter_report" style="width:100%;text-align:end;margin-top:10px;">
                    <div class="form-horizontal">
                        <div class="form-group" style="text-align:left;">
                            <div class="row custom_filter_style" style="margin:0px;">
                                <div class="col-sm-1">
                                    <button title="<?php echo __("Add New Report") ?>" type="button" id="bul-save" onclick="addNewReport()" class="button btn bt_save btn color-blue">
                                    <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                                <div class="col-sm-1">
                                    <button type="button" title="
                                                            <?php echo __("Download Reports DB") ?>" class="btn btn-success" onclick="buildReportsDB()">
                                    <i class="fa fa-download "></i>
                                    </button>
                                </div>
                                <div class="col-sm-1">
                                    <button type="button" title="
                                                            <?php echo __("Download Reports DB") ?>" class="btn color-blue" onclick="filterReports()">
                                    <i class="fa fa-refresh "></i>
                                    </button>
                                </div>
                            </div>
                            <div class="row custom_filter_style" style="margin:0px;">
                            <div class="col-sm-3">
                                <select id="report_filter_status" onChange="filterReports()" class="input-flat" name="report_filter_status">
                                <option value="0"> <?=__("Exclude Declined and Paid") ?> </option>
                                <option value="-1"> <?=__("Show All") ?> </option> <?php foreach ($property_status as $key => $value): ?> <option value="<?=$value['migareference_report_status_id'] ?>"> <?=$value['status_title'] ?> </option> <?php endforeach; ?>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <select id="report_filter_referrer" onChange="filterReports()" class="input-flat" name="report_filter_referrer">
                                <option value="0"> <?=__("Show All") ?> </option> <?php foreach ($referral_usrs as $key => $value): ?> <option value="<?=$value['user_id'] ?>"> <?=$value['invoice_surname']." ".$value['invoice_name'] ?> </option> <?php endforeach; ?>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <select id="report_filter_agent" onChange="filterReports()" class="input-flat" name="report_filter_agent">
                                <option value="-1"> <?php echo __("Show All") ?> </option>
                                  <?php foreach ($all_agents_collection as $key => $value): ?>
                                    <option value="<?=$value['agent_id'] ?>"> <?=$value['agent_name'] ?> </option>
                                   <?php endforeach; ?>
                                </select>
                            </div>
                            <div class="col-sm-3">
                                <?php if ($pre_report_settings[0]['enable_report_type']==1) { ?> <select id="report_filter_reporttype" onChange="filterReports()" class="input-flat" name="report_filter_reporttype">
                                <option value="0"> <?=__("Show All") ?> </option>
                                <option value="1"> <?php echo  $retVal = (!empty($app_content[0]['report_type_pop_btn_one_text'])) ? $app_content[0]['report_type_pop_btn_one_text'] : __("Type 1") ; ?> </option>
                                <option value="2"> <?php echo  $retVal = (!empty($app_content[0]['report_type_pop_btn_two_text'])) ? $app_content[0]['report_type_pop_btn_two_text'] : __("Type 2") ; ?> </option>
                                </select>
                                <?php } ?>
                             </div>
                            </div>
                            <div id="apply_report_bulk" class="row" style="display:none;">
                            <div class="col-sm-12">
                                <select id="bulk_status" class="input-flat" name="bulk_status" style="width:200px"> <?php foreach ($property_status as $key => $value): ?> <option value="<?=$value['migareference_report_status_id'] ?>"> <?=$value['status_title'] ?> </option> <?php endforeach; ?> </select>
                                <button disabled id="bul-save" class="button btn-bulk-apply btn bt_save btn color-blue btn_apply_bulk" type="submit"> <?php echo __('Apply'); ?> </button>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="" id="comment-bulk-container" style="display:none;">
                    <label for="event_id"> <?php echo __('Comment'); ?> * </label>
                    <textarea class="pin input-flat" name="comment_bulk" rows="4" cols="80"></textarea>
                </div>
                <div style="display:none;" id="commission_fee_bulk_container"></div>
                </form>









                <div id="report-detail-table">
                    <table id="table_report_status" class="table display responsive nowrap content-white-bkg"
                        style="width:100%">
                        <thead>
                            <tr class="border-grey">
                                <th><?php echo __('Report Details'); ?></th>
                                <th><?php echo __('External URL'); ?></th>
                                <th><?php echo __('Report NO'); ?></th>
                                <th><?php echo __('Status'); ?></th>
                                <th><?php echo __('Created At'); ?></th>
                                <th><?php echo __('Referral User'); ?></th>
                                <th><?php echo __('Report Owner'); ?></th>
                                <th><?php echo __('Last Modification'); ?></th>
                                <th><?php echo __('Managed By'); ?></th>
                                <th><?php echo __('Blockchain Certificate'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab_report_ledger">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Report Ledgers'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <div style="overflow-x:auto;" id="report-detail-table">
                    <table id="table_report_ledgers" class="table display responsive nowrap content-white-bkg"
                        style="width:100%">
                        <thead>
                            <tr class="border-grey">
                                <th><?php echo __('Report NO'); ?></th>
                                <th><?php echo __('Created At'); ?></th>
                                <th><?php echo __('Referral Detail'); ?></th>
                                <th><?php echo __('Owner Detail'); ?></th>
                                <th><?php echo __('Certificate'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab_appcontent">
            <div class="feature-block-list">
                <div class="margin-top">
                    <h3 class="title-editor no-border-radius title-feature-indent">
                        <?php echo __('APP Content'); ?>
                        <!-- <button id="toggel-coupon-view-event" type="button"
                            class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                            <i class="fa fa-angle-down"></i>
                        </button> -->
                    </h3>
                    <div id="toggel-coupon-view"  
                        class="container-fluid first-row-feature content-feature feature-manage-items">
                        <form id="appContent"
                            action="<?php echo $this->getUrl('migareference/application/saveappcontent'); ?>">
                            <div class="row">
                                <div class="col-lg-11 col-md-11 col-sm-11 col-xs-11 bhoechie-tab-container">
                                    <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 bhoechie-tab-menu">
                                        <div class="list-group">
                                            <a href="javascript:;" class="list-group-item p-0 active text-center">
                                                <h4 class="fa fa-header"></h4><br /><?php echo __('Balance Button'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-question"></h4><br /><?php echo __('How works'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-plus"></h4><br /><?php echo __('CRM Reports Page'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-plus"></h4><br /><?php echo __('Add Report'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-trophy"></h4><br /><?php echo __('Referrer Report'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-file"></h4><br /><?php echo __('Report Status'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-certificate"></h4><br /><?php echo __('Qualification'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-link"></h4><br /><?php echo __('Enroll URL'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-trophy"></h4><br /><?php echo __('Your Prizes'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-calendar"></h4><br /><?php echo __('Reminders'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-phone"></h4><br /><?php echo __('PhoneBook'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-line-chart"></h4><br /><?php echo __('Statistics'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-gear"></h4><br /><?php echo __('Settings'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-header"></h4>
                                                <br /><?php echo __('Prize Balance Button'); ?>
                                            </a>
                                            <a href="javascript:;" class="list-group-item p-0 text-center">
                                                <h4 class="fa fa-text-width"></h4><br /><?php echo __('Page Color'); ?>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9 bhoechie-tab">
                                        <div class="bhoechie-tab-content active">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" name="top_home_header_bg"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['top_home_header_bg'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" name="top_home_header_text"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['top_home_header_text'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="how_it_works_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="how_it_works_label"
                                                                        value="<?=$app_content[0]['how_it_works_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="how_it_works_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="how_it_works_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['how_it_works_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="how_it_works_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="how_it_works_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['how_it_works_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <!--[if gte IE 10]><!-->
                                                                    <button style="width:100%"
                                                                        id="migarefrence_how_it_works_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <!--<![endif]-->
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_how_it_works_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_how_it_works_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['how_it_works_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_how_it_works_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_how_it_works_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_how_it_works_cover_file"
                                                                        name="how_it_works_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_how_it_works_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for=""><?php echo __('Page Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="crmreport_page_title"
                                                                        value="<?=$app_content[0]['crmreport_page_title'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for=""><?php echo __('Form Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="crmreport_page_form_title"
                                                                        value="<?=$app_content[0]['crmreport_page_form_title'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="crmreport_nav_bg_color"><?php echo __('NAV Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="crmreport_nav_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['crmreport_nav_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="crmreport_page_bg_color"><?php echo __('Page Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="crmreport_page_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['crmreport_page_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="crmreport_page_form_bg_color"><?php echo __('Form Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="crmreport_page_form_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['crmreport_page_form_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="crmreport_page_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="crmreport_page_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['crmreport_page_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Header Image'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="crmreport_page_header_picture" type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="crmreport_page_header_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="crmreport_page_header_cover_img" width="60"
                                                                        height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['crmreport_page_header_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_crmreport_page_header_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_crmreport_page_header_cover_file" name=""
                                                                        value="" />
                                                                    <input type="hidden"
                                                                        id="crmreport_page_header_cover_file"
                                                                        name="crmreport_page_header_file" />
                                                                    <input type="hidden"
                                                                        id="crmreport_page_header_remove_cover" name=""
                                                                        value="0" />
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for=""><?php echo __('Confirm page title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="crmreportconfirm_page_title"
                                                                        value="<?=$app_content[0]['crmreportconfirm_page_title'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for=""><?php echo __('Confirm page message'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <textarea class="pin input-flat" name="crmreportconfirm_page_message" rows="5" cols="80"><?=(count($app_content)) ? $app_content[0]['crmreportconfirm_page_message'] : "" ; ?></textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="add_property_box_label"
                                                                        value="<?=$app_content[0]['add_property_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="add_property_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="add_property_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_add_property_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_add_property_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_add_property_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['add_property_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_add_property_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_add_property_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_add_property_cover_file"
                                                                        name="add_property_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_add_property_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            <h4><?php echo __("Report Page") ?></h4>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="add_property_save_card_title"><?php echo __('Save Report Card Title'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="add_property_save_card_title"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['add_property_save_card_title'])) ? $app_content[0]['add_property_save_card_title'] : __('Segnala Prospect') ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_save_btn_text"><?php echo __('Save Button Text'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="add_property_save_btn_text"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['add_property_save_btn_text'])) ? $app_content[0]['add_property_save_btn_text'] : __("INVIA REFERENZA") ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_save_btn_color"><?php echo __('Save Button Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="add-property-save-btn-color"
                                                                            name="add_property_save_btn_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_save_btn_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_save_btn_color"><?php echo __('Save Button Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="add-property-save-btn-text-color"
                                                                            name="add_property_save_btn_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_save_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_invite_card_title"><?php echo __('Invite Report Card Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="add_property_invite_card_title"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['add_property_invite_card_title'])) ? $app_content[0]['add_property_invite_card_title'] : __('Ivite Prospect') ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_invite_btn_text"><?php echo __('Invite Button Text'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="add_property_invite_btn_text"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['add_property_invite_btn_text'])) ? $app_content[0]['add_property_invite_btn_text'] : __("INVITA PROSPECT") ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_invite_btn_color"><?php echo __('Invite Button Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="add-property-invite-btn-color"
                                                                            name="add_property_invite_btn_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_invite_btn_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="add_property_invite_btn_text_color"><?php echo __('Invite Button Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="add-property-invite-btn-text-color"
                                                                            name="add_property_invite_btn_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_property_invite_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Report Page Cover Image'); ?>
                                                                        *</label>
                                                                        <sub>(<?php echo __("Recommended") ?> 960 x 600 PX)</sub>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_add_property_cover_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_add_property_cover_cover_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_add_property_cover_cover_img"
                                                                        width="235" height="150" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['add_property_cover_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_add_property_cover_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_add_property_cover_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_add_property_c_c_file"
                                                                        name="add_property_cover_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_add_property_cover_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-sm-4">
                                                                    <label for="internal-report-note"><?php echo __('Internal Report Note'); ?> </label>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-sm-12">
                                                                    <input name="migareference_pre_report_settings_id" value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0; ?>" type="hidden">
                                                                    <textarea id="internal-report-note" class="pin input-flat replace-with-ckeditor" name="internal_report_note" rows="3" cols="80">  <?=(count($pre_report_settings)) ? $pre_report_settings[0]['internal_report_note'] : "Inserisci qui sotto i dati di contatto del potenziale cliente. Provvederemo a contattarlo nel più breve tempo possibile" ; ?></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-sm-4">
                                                                    <label for="external-report-note"><?php echo __('External Report Note'); ?> </label>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <div class="col-sm-12">
                                                                    <textarea id="external-report-note" class="pin input-flat replace-with-ckeditor" name="external_report_note" rows="3" cols="80"> <?=(count($pre_report_settings)) ? $pre_report_settings[0]['external_report_note'] : "nvia al potenziale cliente un invito testuale (whatsapp/sms etc) a compilare un modulo online per essere contattato. Controlla in stato segnalazioni se hai ricevuto la richiesta" ; ?></textarea>
                                                                </div>
                                                            </div>
                                                            <?php if ($pre_report_settings[0]['enable_report_type']==1) { ?>
                                                            <hr><h4><?php echo __("Report Type Popup") ?></h4>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="report_type_pop_title"><?php echo __('Popup title'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="report_type_pop_title"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['report_type_pop_title'])) ? $app_content[0]['report_type_pop_title'] : __('Choose your prospect') ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="report_type_pop_title"><?php echo __('Popup Description'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <textarea id="" rows="4" cols="50" class="pin input-flat" name="report_type_pop_text"><?=(count($app_content) && $app_content[0]['report_type_pop_text']!='' ) ? $app_content[0]['report_type_pop_text'] : __("To better assist you, please select the appropriate report category. We offer two report types to ensure your query is directed to the right team. Your selection will help us address your concerns efficiently.") ; ?></textarea>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Cover'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_report_type_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_report_type_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_report_type_cover_img"
                                                                        width="125" height="125" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['report_type_pop_cover']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_report_type_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_report_type_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_cover_file"
                                                                        name="report_type_pop_cover" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <!-- Report Type Popup Customer Button Settings -->
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_one_text"><?php echo __('Popup Button (Type One)'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="report_type_pop_btn_one_text"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['report_type_pop_btn_one_text'])) ? $app_content[0]['report_type_pop_btn_one_text'] : __("Customer") ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_one_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="report_type_pop_btn_one_bg_color"
                                                                            name="report_type_pop_btn_one_bg_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_type_pop_btn_one_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_one_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="report_type_pop_btn_one_color"
                                                                            name="report_type_pop_btn_one_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_type_pop_btn_one_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for=""><?php echo __('Icon'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_report_type_btn_one_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_report_type_btn_one_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_report_type_btn_one_cover_img"
                                                                        width="50" height="50" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['report_type_pop_btn_one_icon']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_report_type_btn_one_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_report_type_btn_one_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_btn_one_cover_file"
                                                                        name="report_type_pop_btn_one_icon" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_btn_one_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <!-- Report Type Popup Customer Button Settings -->
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_two_text"><?php echo __('Popup Button (Type Two)'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="report_type_pop_btn_two_text"
                                                                        value="<?php echo $retVal = (!empty($app_content[0]['report_type_pop_btn_two_text'])) ? $app_content[0]['report_type_pop_btn_two_text'] : __("Partner") ; ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_two_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="report_type_pop_btn_two_bg_color"
                                                                            name="report_type_pop_btn_two_bg_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_type_pop_btn_two_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_type_pop_btn_two_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="report_type_pop_btn_two_color"
                                                                            name="report_type_pop_btn_two_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_type_pop_btn_two_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for=""><?php echo __('Icon'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_report_type_btn_two_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_report_type_btn_two_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_report_type_btn_two_cover_img"
                                                                        width="50" height="50" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['report_type_pop_btn_two_icon']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_report_type_btn_two_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_report_type_btn_two_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_btn_two_cover_file"
                                                                        name="report_type_pop_btn_two_icon" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_type_btn_two_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <?php } ?>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="referre_report_box_label"><?php echo __('Title'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="referre_report_box_label"
                                                                        value="<?=$app_content[0]['referre_report_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="referre_report_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="referre_report_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['referre_report_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="referre_report_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="referre_report_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['referre_report_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_referre_report_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_referre_report_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_referre_report_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['referre_report_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_referre_report_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_referre_report_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_referre_report_cover_file"
                                                                        name="referre_report_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_referre_report_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="add_ref_btn_bg_color"><?php echo __('Customize Referrer Button Background'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="add_ref_btn_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_ref_btn_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label for="add_ref_btn_text_color"><?php echo __('Customize Referrer Button Text'); ?>*</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="add_ref_btn_text_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['add_ref_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_status_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="report_status_box_label"
                                                                        value="<?=$app_content[0]['report_status_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_status_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="report_status_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_status_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="report_status_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="report_status_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['report_status_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_report_status_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_report_status_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_report_status_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['report_status_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_report_status_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_report_status_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_status_cover_file"
                                                                        name="report_status_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_report_status_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


<!-- qualification app content -->
 <div class="bhoechie-tab-content">
    <div class="row">
        <div class="col-md-12">
            <div class="form-horizontal">
                <div class="form-group">

                    <!-- Box: Title -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_box_label"><?php echo __('Title'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_box_label"
                                   id="qlf_box_label"
                                   value="<?=$app_content[0]['qlf_box_label'] ?>">
                        </div>
                    </div>

                    <!-- Box: Background Color -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_box_bg_color"><?php echo __('Background Color'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <div style="border:1px solid black;width: fit-content;">
                                <input type="hidden"
                                       name="qlf_box_bg_color"
                                       id="qlf_box_bg_color"
                                       class="top-header-bg-color opacity-colorpicker"
                                       value="<?=$app_content[0]['qlf_box_bg_color'] ?>">
                            </div>
                        </div>
                    </div>

                    <!-- Box: Text Color -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_box_text_color"><?php echo __('Text Color'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <div style="border:1px solid black;width: fit-content;">
                                <input type="hidden"
                                       name="qlf_box_text_color"
                                       id="qlf_box_text_color"
                                       class="top-header-text-color opacity-colorpicker"
                                       value="<?=$app_content[0]['qlf_box_text_color'] ?>">
                            </div>
                        </div>
                    </div>

                    <!-- Box: Icon / Cover -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_cover_file"><?php echo __('Icon'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_qlf_cover_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                <i class="icon-camera-retro"></i>
                                <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>
                            <input id="migareference_qlf_cover_file_input"
                                   class="uploader" style="display:none"
                                   type="file" name="files[]"
                                   data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                            <img id="migareference_qlf_cover_img"
                                 width="60" height="60" style="display:"
                                 src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['qlf_cover_file']; ?>"
                                 class="cimage" />
                            <a href="javascript:;" style="display:none"
                               id="remove_migareference_qlf_cover_img"
                               class="btn color-blue rcimage">
                                <i class="fa fa-times"></i>
                            </a>
                            <input type="hidden" id="c_migareference_qlf_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_qlf_cover_file" name="qlf_cover_file" />
                            <input type="hidden" id="migareference_qlf_remove_cover" name="" value="0" />
                        </div>
                    </div>

                    <!-- Level 1 -->
                    <hr>
                    <h4><?php echo __("Level 1 Header") ?></h4>

                    <!-- Level 1: Title -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_title"><?php echo __('Title'); ?>*</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_title"
                                   id="qlf_level_one_title"
                                   value="<?=$app_content[0]['qlf_level_one_title'] ?>">
                        </div>
                    </div>

                    <!-- Level 1: Subtitle -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_subtitle"><?php echo __('Subtitle'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_subtitle"
                                   id="qlf_level_one_subtitle"
                                   value="<?=$app_content[0]['qlf_level_one_subtitle'] ?>">
                        </div>
                    </div>

                    <!-- Level 1: Icon / Cover -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_cover"><?php echo __('Cover'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_qlf_level_one_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                <i class="icon-camera-retro"></i>
                                <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>
                            <input id="migareference_qlf_level_one_file_input"
                                   class="uploader" style="display:none"
                                   type="file" name="files[]"
                                   data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                            <img id="migareference_qlf_level_one_cover_img"
                                 width="200" height="125" style="display:"
                                 src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['qlf_level_one_cover']; ?>"
                                 class="cimage" />
                            <a href="javascript:;" style="display:none"
                               id="remove_migareference_qlf_level_one_cover_img"
                               class="btn color-blue rcimage">
                                <i class="fa fa-times"></i>
                            </a>
                            <input type="hidden" id="c_migareference_qlf_level_one_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_qlf_level_one_cover_file" name="qlf_level_one_cover" />
                            <input type="hidden" id="migareference_qlf_level_one_remove_cover" name="" value="0" />
                        </div>
                    </div>
                    <hr>
                        <h4><?php echo __("Level 1 to Level 2 Link") ?></h4>
                    <!-- Level 1 -> Level 2 Button -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_one_title"><?php echo __('Title'); ?>*</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_btn_one_title"
                                   id="qlf_level_one_btn_one_title"
                                   value="<?=$app_content[0]['qlf_level_one_btn_one_title'] ?>">
                        </div>
                    </div>
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_one_subtitle"><?php echo __('Subtitle'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_btn_one_subtitle"
                                   id="qlf_level_one_btn_one_subtitle"
                                   value="<?=$app_content[0]['qlf_level_one_btn_one_subtitle'] ?>">
                        </div>
                    </div>
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_one_cover"><?php echo __('Icon'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_qlf_level_one_btn_one_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                <i class="icon-camera-retro"></i>
                                <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>
                            <input id="migareference_qlf_level_one_btn_one_file_input"
                                   class="uploader" style="display:none"
                                   type="file" name="files[]"
                                   data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                            <img id="migareference_qlf_level_one_btn_one_cover_img"
                                 width="60" height="60" style="display:"
                                 src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['qlf_level_one_btn_one_cover']; ?>"
                                 class="cimage" />
                            <a href="javascript:;" style="display:none"
                               id="remove_migareference_qlf_level_one_btn_one_cover_img"
                               class="btn color-blue rcimage">
                                <i class="fa fa-times"></i>
                            </a>
                            <input type="hidden" id="c_migareference_qlf_level_one_btn_one_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_qlf_level_one_btn_one_cover_file" name="qlf_level_one_btn_one_cover" />
                            <input type="hidden" id="migareference_qlf_level_one_btn_one_remove_cover" name="" value="0" />
                        </div>
                    </div>
<hr>
                        <h4><?php echo __("Level 1 to Multimedia Link") ?></h4>
                    <!-- Level 1 -> Multimedia Button -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_two_title"><?php echo __('Title'); ?>*</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_btn_two_title"
                                   id="qlf_level_one_btn_two_title"
                                   value="<?=$app_content[0]['qlf_level_one_btn_two_title'] ?>">
                        </div>
                    </div>
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_two_subtitle"><?php echo __('Subtitle'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_one_btn_two_subtitle"
                                   id="qlf_level_one_btn_two_subtitle"
                                   value="<?=$app_content[0]['qlf_level_one_btn_two_subtitle'] ?>">
                        </div>
                    </div>
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_one_btn_two_cover"><?php echo __('Icon'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_qlf_level_one_btn_two_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                <i class="icon-camera-retro"></i>
                                <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>
                            <input id="migareference_qlf_level_one_btn_two_file_input"
                                   class="uploader" style="display:none"
                                   type="file" name="files[]"
                                   data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                            <img id="migareference_qlf_level_one_btn_two_cover_img"
                                 width="60" height="60" style="display:"
                                 src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['qlf_level_one_btn_two_cover']; ?>"
                                 class="cimage" />
                            <a href="javascript:;" style="display:none"
                               id="remove_migareference_qlf_level_one_btn_two_cover_img"
                               class="btn color-blue rcimage">
                                <i class="fa fa-times"></i>
                            </a>
                            <input type="hidden" id="c_migareference_qlf_level_one_btn_two_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_qlf_level_one_btn_two_cover_file" name="qlf_level_one_btn_two_cover" />
                            <input type="hidden" id="migareference_qlf_level_one_btn_two_remove_cover" name="" value="0" />
                        </div>
                    </div>
<hr>
                        <h4><?php echo __("Level 2 Header") ?></h4>
                    <!-- Level 2 -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_two_title"><?php echo __('Title'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="qlf_level_two_title"
                                   id="qlf_level_two_title"
                                   value="<?=$app_content[0]['qlf_level_two_title'] ?>">
                        </div>
                    </div>

                    <!-- Level 2: Subtitle -->
                        <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_two_subtitle"><?php echo __('Subtitle'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                name="qlf_level_two_subtitle"
                                id="qlf_level_two_subtitle"
                                value="<?=$app_content[0]['qlf_level_two_subtitle'] ?>">
                        </div>
                        </div>

                        <!-- Level 2: Icon / Cover -->
                        <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="qlf_level_two_cover"><?php echo __('Cover'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_qlf_level_two_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                            <i class="icon-camera-retro"></i>
                            <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                            <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>

                            <input id="migareference_qlf_level_two_file_input"
                                class="uploader" style="display:none"
                                type="file" name="files[]"
                                data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">

                            <img id="migareference_qlf_level_two_cover_img"
                                width="200" height="125" style="display:"
                                src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['qlf_level_two_cover']; ?>"
                                class="cimage" />

                            <a href="javascript:;" style="display:none"
                            id="remove_migareference_qlf_level_two_cover_img"
                            class="btn color-blue rcimage">
                            <i class="fa fa-times"></i>
                            </a>

                            <input type="hidden" id="c_migareference_qlf_level_two_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_qlf_level_two_cover_file" name="qlf_level_two_cover" />
                            <input type="hidden" id="migareference_qlf_level_two_remove_cover" name="" value="0" />
                        </div>
                        </div>
                     

                </div><!-- /.form-group -->
            </div><!-- /.form-horizontal -->
        </div>
    </div>
</div>
<!-- Enroll URL app content -->

 <div class="bhoechie-tab-content">
    <div class="row">
        <div class="col-md-12">
            <div class="form-horizontal">
                <div class="form-group">

                    <!-- Box: Title -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="enroll_url_box_label"><?php echo __('Title'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <input class="input-flat" type="text"
                                   name="enroll_url_box_label"
                                   id="enroll_url_box_label"
                                   value="<?=$app_content[0]['enroll_url_box_label'] ?>">
                        </div>
                    </div>

                    <!-- Box: Background Color -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="enroll_url_box_bg_color"><?php echo __('Background Color'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <div style="border:1px solid black;width: fit-content;">
                                <input type="hidden"
                                       name="enroll_url_box_bg_color"
                                       id="enroll_url_box_bg_color"
                                       class="top-header-bg-color opacity-colorpicker"
                                       value="<?=$app_content[0]['enroll_url_box_bg_color'] ?>">
                            </div>
                        </div>
                    </div>

                    <!-- Box: Text Color -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="enroll_url_box_text_color"><?php echo __('Text Color'); ?> *</label>
                        </div>
                        <div class="col-sm-7">
                            <div style="border:1px solid black;width: fit-content;">
                                <input type="hidden"
                                       name="enroll_url_box_text_color"
                                       id="enroll_url_box_text_color"
                                       class="top-header-text-color opacity-colorpicker"
                                       value="<?=$app_content[0]['enroll_url_box_text_color'] ?>">
                            </div>
                        </div>
                    </div>

                    <!-- Box: Icon / Cover -->
                    <div class="row" style="margin-bottom:8px;">
                        <div class="col-sm-4">
                            <label for="enroll_url_cover_file"><?php echo __('Icon'); ?> *</label>
                        </div>
                        <div class="col-sm-7" style="text-align:center;">
                            <button style="width:100%"
                                    id="migareference_enroll_url_cover_picture"
                                    type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                <i class="icon-camera-retro"></i>
                                <?php echo __("Upload") ?>
                            </button>
                            <p id="uploader_logo_ie_description" style="display:none">
                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                            </p>
                            <input id="migareference_enroll_url_cover_file_input"
                                   class="uploader" style="display:none"
                                   type="file" name="files[]"
                                   data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                            <img id="migareference_enroll_url_cover_img"
                                 width="60" height="60" style="display:"
                                 src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['enroll_url_cover_file']; ?>"
                                 class="cimage" />
                            <a href="javascript:;" style="display:none"
                               id="remove_migareference_enroll_url_cover_img"
                               class="btn color-blue rcimage">
                                <i class="fa fa-times"></i>
                            </a>
                            <input type="hidden" id="c_migareference_enroll_url_cover_file" name="" value="" />
                            <input type="hidden" id="migareference_enroll_url_cover_file" name="enroll_url_cover_file" />
                            <input type="hidden" id="migareference_enroll_url_remove_cover" name="" value="0" />
                        </div>
                    </div>
 

                   
                     

                </div><!-- /.form-group -->
            </div><!-- /.form-horizontal -->
        </div>
    </div>
</div>


                                        
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="prizes_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="prizes_box_label"
                                                                        value="<?=$app_content[0]['prizes_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="prizes_box_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" name="prizes_box_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['prizes_box_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="prizes_box_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="prizes_box_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['prizes_box_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_prizes_picture" type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_prizes_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_prizes_cover_img" width="60"
                                                                        height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['prizes_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_prizes_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_prizes_cover_file" name=""
                                                                        value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_prizes_cover_file"
                                                                        name="prizes_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_prizes_remove_cover" name=""
                                                                        value="0" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="reminders_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="reminders_box_label"
                                                                        value="<?=$app_content[0]['reminders_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="reminders_box_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="reminders_box_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['reminders_box_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="reminders_box_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="reminders_box_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['reminders_box_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_reminders_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_reminders_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_reminders_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['reminders_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_reminders_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_reminders_cover_file" name=""
                                                                        value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_reminders_cover_file"
                                                                        name="reminders_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_reminders_remove_cover" name=""
                                                                        value="0" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebooks_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="phonebooks_box_label"
                                                                        value="<?=$app_content[0]['phonebooks_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebooks_box_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="phonebooks_box_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebooks_box_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebooks_box_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="phonebooks_box_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebooks_box_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_phonebooks_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_phonebooks_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_phonebooks_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['phonebooks_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_phonebooks_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_phonebooks_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_phonebooks_cover_file"
                                                                        name="phonebooks_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_phonebooks_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                            <hr>
                                                            <h4><?php echo __("Phonebook Page") ?></h4>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebooks_start_color"><?php echo __('Rating Star Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="phonebooks_start_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebooks_start_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_add_btn_bg_color"><?php echo __('Add Button Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="add-property-save-btn-color"
                                                                            name="phonebook_add_btn_bg_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_add_btn_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_add_btn_text_color"><?php echo __('Add Button Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id=""
                                                                            name="phonebook_add_btn_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_add_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_reset_btn_bg_color"><?php echo __('Reset Button Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id=""
                                                                            name="phonebook_reset_btn_bg_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_reset_btn_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_reset_btn_text_color"><?php echo __('Reset Button Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id=""
                                                                            name="phonebook_reset_btn_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_reset_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_reference_btn_bg_color"><?php echo __('Reference Level (All) Button Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="phonebook_reference_btn_bg_color"
                                                                            name="phonebook_reference_btn_bg_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_reference_btn_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="phonebook_reference_btn_text_color"><?php echo __('Reference Level (All) Button Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            id="phonebook_reference_btn_text_color"
                                                                            name="phonebook_reference_btn_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['phonebook_reference_btn_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="statistics_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="statistics_box_label"
                                                                        value="<?=$app_content[0]['statistics_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="statistics_box_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="statistics_box_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['statistics_box_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="statistics_box_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="statistics_box_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['statistics_box_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_statistics_picture"
                                                                        type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_statistics_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_statistics_cover_img"
                                                                        width="60" height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['statistics_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_statistics_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_statistics_cover_file"
                                                                        name="" value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_statistics_cover_file"
                                                                        name="statistics_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_statistics_remove_cover"
                                                                        name="" value="0" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="settings_box_label"><?php echo __('Title'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <input class="input-flat" type="text"
                                                                        name="settings_box_label"
                                                                        value="<?=$app_content[0]['settings_box_label'] ?>">
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="settings_bg_color"><?php echo __('Background Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" name="settings_bg_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['settings_bg_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="settings_text_color"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" name="settings_text_color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['settings_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Icon'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7" style="text-align:center;">
                                                                    <button style="width:100%"
                                                                        id="migarefrence_settings_picture" type="button"
                                                                        class="upload_contact_picture btn color-blue image_left">
                                                                        <i class="icon-camera-retro"></i>
                                                                        <?php echo __("Upload") ?>
                                                                    </button>
                                                                    <p id="uploader_logo_ie_description"
                                                                        style="display:none">
                                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                                    </p>
                                                                    <input id="migarefrence_settings_file"
                                                                        class="uploader" style="display:none"
                                                                        type="file" name="files[]"
                                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                                    <img id="migarefrence_settings_cover_img" width="60"
                                                                        height="60" style="display:"
                                                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$app_content[0]['settings_file']; ?>"
                                                                        class="cimage" />
                                                                    <a href="javascript:;" style="display:none"
                                                                        id="remove_migarefrence_settings_cover_img"
                                                                        class="btn color-blue rcimage">
                                                                        <i class="fa fa-times"></i>
                                                                    </a>
                                                                    <input type="hidden"
                                                                        id="c_migarefrence_settings_cover_file" name=""
                                                                        value="" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_settings_cover_file"
                                                                        name="settings_file" />
                                                                    <input type="hidden"
                                                                        id="migarefrence_settings_remove_cover" name=""
                                                                        value="" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <div class="">
                                                                        <label
                                                                            for="top_prize_header"><?php echo __('Background Color'); ?>
                                                                            *</label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" id="top-prize-header"
                                                                            name="top_prize_header_bg"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['top_prize_header_bg'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <label
                                                                        for="commission_type"><?php echo __('Text Color'); ?>
                                                                        *</label>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden"
                                                                            name="top_prize_header_text"
                                                                            id="top-prize-header-text-color"
                                                                            class="top-header-text-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['top_prize_header_text'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="bhoechie-tab-content">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="form-horizontal">
                                                        <div class="form-group">
                                                            <div class="row" style="margin-bottom:8px;">
                                                                <div class="col-sm-4">
                                                                    <div class="">
                                                                        <label
                                                                            for="page_text_color"><?php echo __('Page Text Color'); ?>
                                                                            *</label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-sm-7">
                                                                    <div class=""
                                                                        style="border:1px solid black;width: fit-content;">
                                                                        <input type="hidden" id="page-text-color"
                                                                            name="page_text_color"
                                                                            class="top-header-bg-color opacity-colorpicker"
                                                                            value="<?=$app_content[0]['page_text_color'] ?>">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            <button style="float:right;margin-right:19px;"
                                                class="button btn bt_save btn color-blue" type="submit">
                                                <?php echo __('Save'); ?>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab_propertyaddress">
            <!-- Add Address -->
            <div class="" id="addAddress" style="display:none">
                <button onclick="shownewAddress()" class="btn color-blue" type="button"
                    name="button"><?php echo __("Back") ?></button>
                <br><br>
                <form id="migarefrenceImportForm" method="post"
                    action="<?php echo $this->getUrl('migareference/application/uploadeaddressesfile') ?>"
                    enctype="multipart/form-data">
                    <input type="hidden" name="value_id" id="value_id" value="<?php echo $value_id; ?>" />
                    <div class="form-horizontal">
                        <div class="infos">
                            <div id="migarefrence_content">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migarefrence_import"><?php echo __('Select CSV File'); ?> *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input type="file" accept=".csv" id="migarefrence_import"
                                            name="migafunnel_import" class="migarefrence_import required input-flat">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="save pull-right">
                        <button class="button btn bt_save btn color-blue" type="submit">
                            <?php echo __('Save'); ?>
                        </button>
                    </div>
                </form>
                <br><br>
                <form id="migarefrencesingleaddress" method="post"
                    action="<?php echo $this->getUrl('migareference/application/uploadesingleaddresses') ?>">
                    <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                    <div class="form-group">
                        <div class="col-sm-3 ">
                            <label for="reminder_type_text"><?php echo __('Address'); ?><sup>*</sup></label>
                        </div>
                        <div class="col-sm-9 ">
                            <input id="address" type="text" name="address" value="" class="pin input-flat">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3 ">
                            <label for="reminder_type_text"><?php echo __('Longitude'); ?><sup>*</sup></label>
                        </div>
                        <div class="col-sm-9 ">
                            <input id="longitude" type="text" name="longitude" value="" class="pin input-flat">
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-3 ">
                            <label for="reminder_type_text"><?php echo __('Latitude'); ?><sup>*</sup></label>
                        </div>
                        <div class="col-sm-9 ">
                            <input id="latitude" type="text" name="latitude" value="" class="pin input-flat">
                        </div>
                    </div>
                    <div class="save pull-right">
                        <button class="button btn bt_save btn color-blue" type="submit">
                            <?php echo __('Save'); ?>
                        </button>
                    </div>
                </form>
            </div>
            <!-- Show Address -->
            <div class="" id="showAddress">
                <div class="form-group">
                    <a style="width:140px;" id="downloade_report_addresses_file" class="btn color-blue form-control"
                    href="<?php echo $base_url.'/app/local/modules/Migareference/resources/propertyaddresses/reportaddresses_'.$app_id.'.csv' ?>"><?php echo __('Download CSV') ?></a>
                    <button onclick="addnewAddress()" style="float:right;" class="btn color-blue" type="button"
                        name="button"><?php echo __("Add new Address") ?></button>
                    <br>
                    <h4><?php echo __("Report Addresses") ?></h4>
                    <table id="migarefrence_property_addresses"
                        class="table display responsive nowrap content-white-bkg" style="width:100%">
                        <thead>
                            <tr class="border-grey">
                                <th style="width:100px;"><?php echo __('Address'); ?></th>
                                <th><?php echo __('Longitude'); ?></th>
                                <th><?php echo __('Latitude'); ?></th>
                                <th><?php echo __('Report NO'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
                <div class="form-group">
                    <br><br>
                    <h4><?php echo __("External Addresses") ?></h4>
                    <form id="delteaddress"
                        action="<?php echo $this->getUrl('migareference/application/deleteaddress'); ?>">
                        <div class="save pull-right">
                            <button class="button btn bt_save btn-danger" type="submit">
                                <?php echo __('Delete'); ?>
                            </button>
                        </div>
                        <table id="migarefrence_external_addresses"
                            class="table display responsive nowrap content-white-bkg" style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th style="width:100px;"><?php echo __('Address'); ?></th>
                                    <th><?php echo __('Longitude'); ?></th>
                                    <th><?php echo __('Latitude'); ?></th>
                                    <th><?php echo __('Report NO'); ?></th>
                                    <th><?php echo __('Delete'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab_jobs">

            <div class="" id="prizeListContainer">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Manage Jobs & Sectors'); ?>
                </h3>
                <div class="container-fluid content-feature pt30">
                    <!-- Manage JObs -->
                    <div>
                        <div class="" id="addJobs" style="display:none">
                            <button onclick="showJobs()" class="btn color-blue" type="button"
                                name="button"><?php echo __("Back") ?></button>
                            <br><br>
                            <form id="migarefrenceJobsImportForm" method="post"
                                action="<?php echo $this->getUrl('migareference/application/uploadejobsfile') ?>"
                                enctype="multipart/form-data">
                                <input type="hidden" name="value_id" id="value_id" value="<?php echo $value_id; ?>" />
                                <div class="form-horizontal">
                                    <div class="infos">
                                        <div id="migarefrence_content">
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="migarefrence_import"><?php echo __('Select CSV File'); ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <input type="file" accept=".csv" id="migarefrence_jobs_import"
                                                        name="migafunnel_import"
                                                        class="migarefrence_import required input-flat">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="save pull-right">
                                    <button class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </form>
                            <br><br>
                            <form id="migarefrencesinglejobs" method="post"
                                action="<?php echo $this->getUrl('migareference/application/uploadesinglejobs') ?>">
                                <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                <input type="hidden" name="operation" id="job-operation" value="" />
                                <input type="hidden" name="job_id" id="job_id" value="" />
                                <div class="form-group">
                                    <div class="col-sm-4 ">
                                        <label for="job_type_text"><?php echo __('Job Title'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4 ">
                                        <input id="job_title" type="text" name="job_title" value=""
                                            class="pin input-flat">
                                    </div>
                                </div>
                                <br><br>
                                <div class="save pull-right">
                                    <button class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- Show Jobs -->
                        <div class="" id="showJobs">
                            <div class="form-group">
                                <button onclick="addNewJobs()" style="float:right;" class="btn color-blue" type="button"
                                    name="button"><?php echo __("Add New Job") ?></button>
                                <br>
                                <h4><?php echo __("All Jobs") ?></h4>
                                <table id="migarefrence_jobs" class="table display responsive nowrap content-white-bkg"
                                    style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('UID'); ?></th>
                                            <th><?php echo __('Job Title'); ?></th>
                                            <th><?php echo __('Edit'); ?></th>
                                            <th><?php echo __('Delete'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Manage Sectors -->
                    <div>
                        <div class="" id="addprofessions" style="display:none">
                            <button onclick="showProfessions()" class="btn color-blue" type="button"
                                name="button"><?php echo __("Back") ?></button>
                            <br><br>
                            <form id="migarefrenceProfessionsImportForm" method="post"
                                action="<?php echo $this->getUrl('migareference/application/uploadeprofessionfile') ?>"
                                enctype="multipart/form-data">
                                <input type="hidden" name="value_id" id="value_id" value="<?php echo $value_id; ?>" />
                                <div class="form-horizontal">
                                    <div class="infos">
                                        <div id="migarefrence_content">
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="migarefrence_import"><?php echo __('Select CSV File'); ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-4">
                                                    <input type="file" accept=".csv" id="migarefrence_profession_import"
                                                        name="migafunnel_import"
                                                        class="migarefrence_import required input-flat">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="save pull-right">
                                    <button class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </form>
                            <br><br>
                            <form id="migarefrencesingleprofession" method="post"
                                action="<?php echo $this->getUrl('migareference/application/uploadesingleprofession') ?>">
                                <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                <input type="hidden" name="operation" id="profession-operation" value="" />
                                <input type="hidden" name="profession_id" id="profession_id" value="" />
                                <div class="form-group">
                                    <div class="col-sm-4 ">
                                        <label for="profession_type_text"><?php echo __('Sector Title'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4 ">
                                        <input id="profession_title" type="text" name="profession_title" value=""
                                            class="pin input-flat">
                                    </div>
                                </div>
                                <br><br>
                                <div class="save pull-right">
                                    <button class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </form>
                        </div>
                        <!-- Show Jobs -->
                        <div class="" id="showprofessions">
                            <div class="form-group">
                                <button onclick="addNewProfession()" style="float:right;" class="btn color-blue" type="button"
                                    name="button"><?php echo __("Add New Sector") ?></button>
                                <br>
                                <h4><?php echo __("All Sectors") ?></h4>
                                <table id="migarefrence_professions" class="table display responsive nowrap content-white-bkg"
                                    style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('UID'); ?></th>
                                            <th><?php echo __('Sector Title'); ?></th>
                                            <th><?php echo __('Edit'); ?></th>
                                            <th><?php echo __('Delete'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div role="tabpanel" class="tab-pane" id="tab_sponsor_geolocation">
            <div class="" id="prizeListContainer">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Manage Countries & Provinces'); ?>
                </h3>
                <div class="container-fluid content-feature pt30">
                    <!-- Show Geolocations -->
                    <div class="" id="showCountires">
                        <div class="form-group">
                            <br><br>
                            <table id="migarefrence_geocountries"
                                class="table display responsive nowrap content-white-bkg" style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('UID'); ?></th>
                                        <th><?php echo __('Country'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Add Geolocation -->
                    <div class="" id="addGeolocation" style="display:none">
                        <button onclick="showGeolocation()" class="btn color-blue" type="button"
                            name="button"><?php echo __("Back") ?></button>
                        <br><br>
                        <form id="migarefrencegeolocation" method="post"
                            action="<?php echo $this->getUrl('migareference/application/savegelocation') ?>">
                            <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                            <input type="hidden" name="operation" id="geo-operation" value="" />
                            <input type="hidden" name="country_id" id="country_id" value="" />
                            <div class="form-horizontal">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="geo_country"><?php echo __('Select Country'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="geo_country" class="input-flat" name="geo_country">
                                            <?php foreach ($geoCountries as $key => $value): ?>
                                            <option value="<?php echo $value['migareference_geo_countries_id'] ?>">
                                                <?php echo $value['country']."-".$value['country_code'] ?> </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" style="display:none;">
                                    <div class="col-sm-4">
                                        <label
                                            for="geo_province"><?php echo __('Select Province'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4">
                                        <select id="geo_province" class="input-flat" name="geo_province">
                                            <option value="0"> <?php echo __("Add New Province") ?> </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" id="new_geo_province">
                                    <div class="col-sm-4" id="">
                                        <label for="province"><?php echo __('Province'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4 ">
                                        <input id="province" type="text" name="province" value=""
                                            class="pin input-flat">
                                    </div>
                                </div>
                                <div class="form-group" id="new_geo_province">
                                    <div class="col-sm-4" id="">
                                        <label for="province"><?php echo __('Province 2 Later Code'); ?><sup>*</sup></label>
                                    </div>
                                    <div class="col-sm-4 ">
                                        <input id="province_code" type="text" name="province_code" value="" class="pin input-flat" maxlength="2">
                                    </div>
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </form>
                    </div>
                    <!-- Show Geolocations -->
                    <div class="" id="showGeolocation">
                        <div class="form-group">
                            <div class="col-sm-6">
                                <div class="" style="width:250px;">
                                    <select id="prospect_job_filter" class="input-flat" name="field_type">
                                        <option value="0"><?php echo __("Show All") ?></option>
                                        <?php foreach ($geoCountries as $key => $value): ?>
                                        <option value="<?php echo $value['migareference_geo_countries_id'] ?>">
                                            <?php echo $value['country'] ?> </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <button onclick="addNewGeolocation()" style="float:right;" class="btn color-blue"
                                    type="button" name="button"><i class="fa fa-plus"></i></button>
                            </div>
                        </div>
                        <div class="form-group">
                            <br><br>
                            <table id="migarefrence_geolocations"
                                class="table display responsive nowrap content-white-bkg" style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('UID'); ?></th>
                                        <th><?php echo __('Province'); ?></th>
                                        <th><?php echo __('Edit'); ?></th>
                                        <th><?php echo __('Delete'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       <div role="tabpanel" class="tab-pane" id="tab_prospect">
            <div id='asign-agent' style="display:none;">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <span><?php echo __('Agent Assignment'); ?><span>
                    <button style="float:right;" onclick="phonebookView()" class="btn color-blue" type="button" name="button"><?php echo __("Back") ?></button>
                </h3>
                <div class="container-fluid content-feature pt30">
                    <div class="row">
                        <div class='col-12'>
                            <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('Select one or more referrers to assign a new agent or remove the current agent.') ?>
                                </p>
                            </div>
                        </div>
                    </div>
                    <form id="agentbulkassignment" method="post" action="<?php echo $this->getUrl('migareference/application/agentbulkassignment') ?>">
                        <div class="form-horizontal">
                            <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                            <div class="form-group">
                                <div class="col-sm-3">
                                    <select id="action_type" class="input-flat" name="action_type" >
                                        <option value="choose"><?php echo __("Choose Action") ?></option>
                                        <option value="remove"><?php echo __("Remove Agent") ?></option>
                                        <option value="assign"><?php echo __("Assign New Agent") ?></option>
                                    </select>
                                </div>
                                <div class="col-sm-3">
                                    <select id="customer_sponsor_id"  class="input-flat" name="customer_sponsor_id" >
                                        <option value="-1"><?php echo __("Agent") ?></option>
                                        <?php foreach ($all_agents_collection as $key => $value): ?>
                                        <option value="<?=$value['agent_id'] ?>">
                                            <?=$value['agent_name'] ?>
                                        </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <?php if ($pre_settings[0]['enable_multi_agent_selection']==1) { ?>
                                    <div class="col-sm-3">
                                    <select id="partner_sponsor_id"  class="input-flat" name="partner_sponsor_id" >
                                        <option value="-1"><?php echo __("Agent") ?></option>
                                        <?php foreach ($partner_agents as $key => $value): ?>
                                        <option value="<?=$value['agent_id'] ?>">
                                            <?=$value['agent_name'] ?>
                                        </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <?php }?>
                                <div class="col-sm-3">
                                    <button onClick='agentbulkassignment()' type='button' id='' class="button btn bt_save color-blue">
                                        <?php echo __('Apply'); ?>
                                    </button>
                                </div>
                                <div class="col-sm-3">
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div class="row custom_filter_style" >
                                    <div class="col-sm-2">
                                        <strong><?php echo  __("Filter By"); ?>:</strong>
                                    </div>
                                    <div class="col-sm-2">
                                        <select id="ref_list_agent_filter" onChange="assignAgent()" class="input-flat" name="" >
                                            <option value="-1"><?php echo __("Agent") ?></option>
                                            <?php foreach ($all_agents_collection as $key => $value): ?>
                                            <option value="<?=$value['agent_id'] ?>">
                                                <?=$value['agent_name'] ?>
                                            </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                    <div class="col-sm-2">
                                        <?php if (COUNT($referrer_provinces)) { ?>
                                        <select id="ref_list_province_filter" onChange="assignAgent()" class="input-flat" name="">
                                            <option value="0"><?php echo __("Province") ?></option>
                                            <?php foreach ($referrer_provinces as $key => $value): ?>
                                                <option value="<?=$value['migareference_geo_provinces_id'] ?>">
                                                <?=$value['province']." - ".$value['province_code'] ?>
                                                </option>
                                            <?php endforeach; ?>
                                        </select>
                                        <?php } ?>
                                    </div>
                                    <div class="col-sm-3" style="padding-top:4px;">
                                        <strong><?php echo  __("Total Selected"); ?>: <span id='total_agent_selected'></span></strong>
                                    </div>
                                    <div class="col-sm-2">
                                        <strong><?php echo  __("Select All"); ?>: <span><input id="select-all" type="checkbox"  name="" value=""></span></strong>
                                    </div>
                                </div>
                        <table id="migarefrence_referrel_list" class="table display responsive nowrap content-white-bkg" style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('UID'); ?></th>
                                    <th><?php echo __('Action'); ?></th>
                                    <th><?php echo __('Name'); ?></th>
                                    <th><?php echo __('Email'); ?></th>
                                    <th><?php echo __('Agent'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
            <div id="addProspectJobs" style="display:none">
                    <h3 class="title-editor no-border-radius title-feature-indent">
                        <?php echo __('Manage Referrer PhoneBook'); ?>
                    </h3>
                    <div class="container-fluid content-feature pt30">
                        <button onclick="showProspectJobs()" class="btn color-blue" type="button" name="button"><?php echo __("Back") ?></button>
                        <button style="float:right;" id="open-matching-model" onclick="openaiMatchingModal()" class="btn color-blue" type="button" name="button"><?php echo __("AI Matching") ?></button>
                        <form id="migarefrenceprospectjob" method="post"
                            action="<?php echo $this->getUrl('migareference/phonebook/updatephonebook') ?>">
                            <div class="form-horizontal">
                                <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                <input type="hidden" name="migarefrence_phonebook_id" id="migarefrence_phonebook_id" value="" />
                                <input type="hidden" name="operation" id="phonebook_operation" value="create" />
                                <input type="hidden" name="phonebook_invoice_id" id="phonebook_invoice_id" value="" />
                                <input type="hidden" name="user_id" id="phonebook_user_id" value="" />
                                <input type="hidden" name="report_id" id="phonebook_report_id" value="" />
                                <input type="hidden" name="rating" id="phonebook_rating" value="1" />
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <div id="terms_accepted_warrning"></div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div style="float:left;margin-right:16px;" onclick="setrating(1)"><span
                                                class="rating-star rating1 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(2)"><span
                                                class="rating-star rating2 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(3)"><span
                                                class="rating-star rating3 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(4)"><span
                                                class="rating-star rating4 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(5)"><span
                                                class="rating-star rating5 fa fa-star"></span></div>
                                    </div>
                                    <div class="col-sm-2" id="rating-container">
                                        <div id="communication_ref_badge">

                                        </div>
                                    </div>
                                </div>
                                <div class="form-group phonebook_operation hide">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select phone type'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_type" class="input-flat" name="type">
                                            <option selected value="1"> <?php echo __("Referrer") ?> </option>
                                            <option value="2"> <?php echo __("Prospect") ?> </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group " style="display:none;">
                                    <div class="col-sm-6">
                                        <label for=""><?php echo __('Disable Phone Grade Period Check'); ?>?</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_is_exclude" class="input-flat" name="is_exclude">
                                            <option value="1"> <?php echo __("No") ?> </option>
                                            <option value="2"> <?php echo __("Yes") ?> </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" style="display:none;">
                                    <div class="col-sm-6">
                                        <label
                                            for=""><?php echo __('Blacklist this contact, dont allow new reports'); ?>?</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_is_blacklist" class="input-flat" name="is_blacklist">
                                            <option value="1"> <?php echo __("No") ?> </option>
                                            <option value="2"> <?php echo __("Yes") ?> </option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group" id="engagement_ref_pho_container" style="display:none;">
                                    <div class="col-sm-6">
                                        <?php echo __("Engagement Level") ?>
                                    </div>
                                    <div class="col-sm-5">
                                        <div id="" style="background-color: black; border-radius: 13px; padding: 3px">
                                            <div id="engagement_progross"
                                                style="background-color: #f8d578;width: 50%;height: 20px;border-radius: 10px;text-align: center;">
                                                <sapn id='progross_title' style='font-weight: 800; font-size: larger'>5
                                                </sapn>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <?php if ($pre_report_settings[0]['enable_qlf']==1) { ?>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="referrer_type"><?php echo __('Referrer type'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="referrer_type" class="input-flat" name="referrer_type">
                                            <option value="1"><?php echo __("Customer") ?></option>                                            
                                            <option value="2"><?php echo __("Not Customer") ?></option>                                            
                                        </select>
                                    </div>
                                </div>
                                <?php } ?>
                                <?php if ($pre_report_settings[0]['enable_multi_agent_selection']==2) { ?>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Sponsor'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="standard_customer_sponsor_id" class="input-flat" name="customer_sponsor_id">
                                            <option value="0"><?php echo __("I dont know") ?></option>
                                            <?php foreach ($customer_agents as $key => $value): ?>
                                            <option value="<?=$value['user_id'] ?>">
                                            <?=$value['lastname']." ".$value['firstname'] ?>
                                            </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <?php } ?>
                                <?php if ($pre_report_settings[0]['enable_multi_agent_selection']==1) { ?>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                    <label for="job_type_text"><?php echo $pre_report_settings[0]['agent_type_label_one']; ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_customer_sponsor_id" class="input-flat" name="customer_sponsor_id">
                                            <option value="0"><?php echo __("I dont know") ?></option>
                                            <?php foreach ($customer_agents as $key => $value): ?>
                                            <option value="<?=$value['user_id'] ?>">
                                            <?=$value['lastname']." ".$value['firstname'] ?>
                                            </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo $pre_report_settings[0]['agent_type_label_two']; ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_partner_sponsor_id" class="input-flat" name="partner_sponsor_id">
                                            <option value="0"><?php echo __("I dont know") ?></option>
                                            <?php foreach ($partner_agents as $key => $value): ?>
                                            <option value="<?=$value['user_id'] ?>">
                                            <?=$value['lastname']." ".$value['firstname'] ?>
                                            </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <?php } ?>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Job'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_job_id" class="input-flat" name="job_id">
                                            <option value="0"><?php echo __("Not Classifiable") ?></option>
                                            <?php foreach ($all_jobs as $key => $value): ?>
                                            <option value="<?php echo $value['migareference_jobs_id'] ?>">
                                                <?=__($value['job_title']) ?></option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Sector'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="phonebook_profession_id" class="input-flat" name="profession_id">
                                            <?php foreach ($all_professions_collection as $key => $value): ?>
                                            <option value="<?php echo $value['profession_id'] ?>">
                                                <?=__($value['profession_title']) ?></option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="name"><?php echo __('Name'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_name" type="text" name="name" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="surname"><?php echo __('Surname'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_surname" type="text" name="surname" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="mobile"><?php echo __('Mobile'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_mobile" type="text" name="mobile" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="email"><?php echo __('Email'); ?>
                                            <span class="is_referrer" style="display:none;"
                                                id="phonebook_email_mandatory"><sup> *</sup></span>
                                        </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_email" type="text" name="email" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div style="display:none;" class="form-group is_referrer"
                                    id="phonebook_password_container">
                                    <div class="col-sm-6">
                                        <label for="password"><?php echo __('Password'); ?> *</label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_password" type="text" name="password"
                                            class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div style="display:none;" class="form-group is_referrer"
                                    id="phonebook_birth_date_container">
                                    <div class="col-sm-6">
                                        <label for="birth_date"><?php echo __('Birth Date'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="phonebook_birth_date" type="date" name="birth_date"
                                            class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <!-- Main and su address settings -->
                                <div class="form-group is_referrer" id="address_country_container">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Country'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="address_country_id" class="input-flat" name="address_country">
                                                <option value=""></option>
                                            <?php foreach ($geoProvinceCountries as $key => $value): ?>
                                                <option value="<?php echo $value['migareference_geo_countries_id'] ?>">
                                                    <?php echo $value['country']."-".$value['country_code'] ?>
                                                </option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div style="display:none;" class="ref_sub_address form-group is_referrer"
                                    id="address_street_container">
                                    <div class="col-sm-6">
                                        <label for="street"><?php echo __('Street'); ?> </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="address_street" type="text" name="address_street"
                                            class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div style="display:none;" class="ref_sub_address form-group is_referrer"
                                    id="address_zipcode_container">
                                    <div class="col-sm-6">
                                        <label for="password"><?php echo __('Zip Code'); ?> </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="address_zipcode" type="text" name="address_zipcode"
                                            class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div style="display:none;" class="ref_sub_address form-group is_referrer"
                                    id="address_city_container">
                                    <div class="col-sm-6">
                                        <label for="password"><?php echo __('City'); ?> </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="address_city" type="text" name="address_city"
                                            class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div class="form-group is_referrer" id="address_province_container">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Province'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="address_province_id" class="input-flat" name="address_province">
                                                                                        <!--  options are printed dunamically from js as per country-->
                                        </select>
                                    </div>
                                </div>
                                <!-- End Main and Subaddress -->
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="mobile"><?php echo __('Relational Notes'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <textarea rows="4" cols="50" type="text" id="phonebook_note" class="input-flat" name="note" placeholder="<?php echo __('') ?>"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="mobile"><?php echo __('Reciprocity Notes'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <textarea rows="4" cols="50" type="text" id="phonebook_reciprocity_notes" class="input-flat" name="reciprocity_notes" placeholder="<?php echo __('') ?>"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="save form-group">
                            <div class="col-sm-10" id="phonebook_gdprconsent">
                            </div>
                            <div class="col-sm-2">
                                <button onClick="validatePhonebook()" style="float:right;" class="button btn bt_save btn color-blue"
                                    type="button">
                                    <?php echo __('Save'); ?>
                                </button>
                                <button id="submitphonebook"  style="display:none;" class="button btn bt_save btn color-blue"
                                    type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                        </form>
                    </div>
                    <div class="is_referrer" id="phonebook_custom_credit_container">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __("Add Custom Credits") ?>
                        </h3>
                        <div class="container-fluid content-feature pt30">
                            <form id="customcredits" action="<?php echo $this->getUrl('migareference/application/customcredits') ?>" method="post">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <div class="col-md-6">
                                            <label><?php echo __('Entry Type') ?>*</label>
                                        </div>
                                        <div class="col-md-6">
                                            <select class="input-flat" name="entry_type">
                                                <option value="1"><?php echo __("Credit") ?></option>
                                                <option value="2"><?php echo __("Debit") ?></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-6">
                                            <label><?php echo __('Add Custom Credits') ?>*</label>
                                        </div>
                                        <div class="col-md-6">
                                            <input type="number" name="custom_credits" value="" class="pin input-flat">
                                            <input id="custom-credits-for" type="hidden" name="user_id" value="" class="pin input-flat">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-6">
                                            <label><?php echo __('Description') ?>*</label>
                                        </div>
                                        <div class="col-md-6">
                                            <input type="text" name="custom_credit_description" value="" class="pin input-flat">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-md-12">
                                            <button class="button btn bt_save btn color-blue" style="float:right;" type="submit">
                                                <?php echo __('Save'); ?>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="is_referrer" id="phonebook_credit_container">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __("Referrer Credits") ?>
                        </h3>
                        <div class="container-fluid content-feature pt30">
                            <div style="overflow-x:auto;">
                                <table id="referrer_credit_ledger" class="table display responsive nowrap content-white-bkg" style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('Date'); ?></th>
                                            <th><?php echo __('User'); ?></th>
                                            <th><?php echo __('Description'); ?></th>
                                            <th><?php echo __('Credits'); ?></th>
                                            <th><?php echo __('Balance'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="is_referrer" id="phonebook_referrer_reports_container">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __("Referrer Reports") ?>
                        </h3>
                        <div class="container-fluid content-feature pt30">
                            <table id="ref_table_report_status" class="table content-white-bkg">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Report NO'); ?></th>
                                        <th><?php echo __('Created At'); ?></th>
                                        <th><?php echo __('Last Modification'); ?></th>
                                        <th><?php echo __('Report Owner'); ?></th>
                                        <th><?php echo __('Status'); ?></th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                    <div class="phonebook_comm_log_container">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __("Manually add communication log") ?>
                        </h3>
                        <div class="container-fluid content-feature pt30">
                            <div class="form-group">
                                <div>
                                    <textarea maxlength="200" rows="4" cols="50" type="text" id="comm-manual-log-note"
                                        class="input-flat" name="" placeholder=""></textarea>
                                </div>
                            </div>
                            <button style="float:right;" onclick="addCommLog()" class="btn color-blue" type="button" name="button"><?php echo __("Save") ?></button>
                        </div>
                    </div>
                    <div class="phonebook_comm_log_container">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __("Communication logs") ?>
                        </h3>
                        <div class="container-fluid content-feature pt30">
                            <table id="phonebook_comm_log" class="table display responsive nowrap content-white-bkg" style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Delete'); ?></th>
                                        <th><?php echo __('ID'); ?></th>
                                        <th><?php echo __('Time Stamp'); ?></th>
                                        <th><?php echo __('Type'); ?></th>
                                        <th><?php echo __('Note'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
            </div>
            <div class="" id="prospect_phone_form" style="display:none">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Manage PhoneBook'); ?>
                </h3>
                <div class="container-fluid content-feature pt30">
                    <!-- Add Prospect PhoneNumbers -->
                    <div class="" id="" >
                        <button onclick="showProspectJobs()" class="btn color-blue" type="button" name="button"><?php echo __("Back") ?></button>
                        <form id="migarefrenceprospectphone" method="post" action="<?php echo $this->getUrl('migareference/phonebook/updateprospect') ?>">
                            <div class="form-horizontal">
                                <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                <input type="hidden" name="migarefrence_prospect_id" id="migarefrence_prospect_id" value="" />
                                <input type="hidden" name="rating" id="prospect_rating" value="1" />
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <div id="terms_accepted_warrning"></div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div style="float:left;margin-right:16px;" onclick="setrating(1)"><span
                                                class="rating-star rating1 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(2)"><span
                                                class="rating-star rating2 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(3)"><span
                                                class="rating-star rating3 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(4)"><span
                                                class="rating-star rating4 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;" onclick="setrating(5)"><span
                                                class="rating-star rating5 fa fa-star"></span></div>
                                    </div>
                                    <div class="col-sm-2" id="rating-container">
                                        <div id="prospect_communication_ref_badge">
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="job_type_text"><?php echo __('Select Job'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="prospect_job_id" class="input-flat" name="job_id">
                                            <option value="0"><?php echo __("Not Classifiable") ?></option>
                                            <?php foreach ($all_jobs as $key => $value): ?>
                                            <option value="<?php echo $value['migareference_jobs_id'] ?>">
                                                <?=__($value['job_title']) ?></option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="name"><?php echo __('Name'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="prospect_name" type="text" name="name" class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="surname"><?php echo __('Surname'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="prospect_surname" type="text" name="surname" class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="mobile"><?php echo __('Mobile'); ?><sup> *</sup></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="prospect_mobile" type="text" name="mobile" class="pin input-flat" value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="email"><?php echo __('Email'); ?>
                                        </label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="prospect_email" type="text" name="email" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                    </div>
                                    <div class="col-sm-6">
                                        <div id="prospect_gdpr_status"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="save form-group">
                                <div class="col-sm-10">
                                    </div>
                                <div class="col-sm-2">
                                    <button  style="float:right;" id="submitprospect" class="button btn bt_save btn color-blue" type="submit">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="phonebook_comm_log_container">
                            <hr>
                            <h3><?php echo __("Manually add communication log") ?></h3>
                            <div class="form-group">
                                <div>
                                    <textarea maxlength="200" rows="4" cols="50" type="text" id="prospect-comm-manual-log-note"
                                        class="input-flat" name="" placeholder=""></textarea>
                                </div>
                            </div>
                            <button style="float:right;" onclick="addProspectCommLog()" class="btn color-blue" type="button"
                                name="button"><?php echo __("Save") ?></button>
                            <br><br>
                            <hr>
                            <h3><?php echo __("Communication logs") ?></h3>
                            <table id="prospect_comm_log" class="table display responsive nowrap content-white-bkg"
                                style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Delete'); ?></th>
                                        <th><?php echo __('ID'); ?></th>
                                        <th><?php echo __('Time Stamp'); ?></th>
                                        <th><?php echo __('Type'); ?></th>
                                        <th><?php echo __('Note'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- Show Pphonebooks -->
                </div>
            </div>
            <!-- New Content -->
            <div class="showProspectJobs" id="toggel-phonebook-referrer-view">
                <div class="feature-block-list">
                    <div class='margin-top'>
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Referrer Phonebook'); ?>
                        </h3>
                        <div id="" class=" container-fluid content-feature pt30">
                            <div id="">
                                <div class="">
                                    <div class="alert alert-warning" id="standard-warrning">
                                        <p style="padding-left:15px;">
                                            <?php echo __('Only International formate of Phone Numbers is accepted i.e. +39xxxxxxxxxx, 00xxxxxxxxxx')?>
                                        </p>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3 col-sm-3">
                                            <a style="width:140px;" id="" class="btn color-blue form-control"
                                                href="<?php echo $base_url.'/app/local/modules/Migareference/resources/propertyaddresses/reportphonenumbers_'.$app_id.'.csv' ?>"><?php echo __('Download CSV') ?></a>
                                        </div>
                                        <div class="col-md-9 col-sm-9">
                                            <form id="migarefrencePhonenumerImportForm" method="post"
                                                action="<?php echo $this->getUrl('migareference/application/uploadephonenumberfile') ?>"
                                                enctype="multipart/form-data">
                                                <input type="hidden" name="value_id" id="value_id"
                                                    value="<?php echo $value_id; ?>" />
                                                <div class="col-md-10 col-sm-10">
                                                    <div class="form-horizontal">
                                                        <div class="infos">
                                                            <div id="migarefrence_content">
                                                                <div class="form-group">
                                                                    <div class="col-sm-5">
                                                                        <label
                                                                            for="migarefrence_import"><?php echo __('Import CSV File'); ?>
                                                                            *</label>
                                                                    </div>
                                                                    <div class="col-sm-7">
                                                                        <input type="file" accept=".csv"
                                                                            id="migarefrence_phonenumber_import"
                                                                            name="migafunnel_import"
                                                                            class="migarefrence_import required input-flat">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-2 col-sm-2">
                                                    <div class="save pull-right">
                                                        <button class="button btn bt_save btn color-blue" type="submit">
                                                            <?php echo __('Save'); ?>
                                                        </button>
                                                    </div>

                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="feature-block-list">
                    <div class='margin-top'>
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Referrer Phonebook'); ?>
                        </h3>
                        <div id="" class=" container-fluid content-feature pt30">
                            <div class="row">
                                <div class="col-sm-3">
                                    <button class="btn btn-success" onclick="buildReferrerDB()"><i class="fa fa-download "> </i> <?php echo __("Referrer DB") ?></button>
                                </div>
                                <div class="col-sm-3">
                                    <button class="btn btn-info" onclick="editProspectJob(0,1,-1,0,0)"><i class="fa fa-plus"> </i> <?php echo __("Add New Referrer") ?> </button>
                                </div>
                                <div class="col-sm-3">
                                    <button class="btn btn-info" onclick="assignAgent()"><i class="fa fa-user"> </i> <?php echo __("Agent Assignment") ?> </button>
                                </div>
                            </div>
                            <hr>
                            <div class="row custom_filter_style" >
                                <div class="col-sm-2">
                                    <select id="ref_phone_agent_filter" class="input-flat" name="">
                                        <option value="-1"><?php echo __("Agent") ?></option>
                                        <?php foreach ($all_agents_collection as $key => $value): ?>
                                        <option value="<?=$value['agent_id'] ?>">
                                            <?=$value['agent_name'] ?>
                                        </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                        <select id="ref_phone_rep_count_filter" class="input-flat">
                                                <option value="-1">
                                                    <?php echo __("Reports"); ?>
                                                </option>
                                                <option  value="0">
                                                    <?php echo __("0-5 Reports"); ?>
                                                </option>
                                                <option  value="1">
                                                    <?php echo __("5-10 Reports"); ?>
                                                </option>
                                                <option  value="2">
                                                    <?php echo __("10-30 Reports"); ?>
                                                </option>
                                                <option  value="3">
                                                    <?php echo __("30-50 Reports"); ?>
                                                </option>
                                                <option  value="4">
                                                    <?php echo __("More Than 50 Reports"); ?>
                                                </option>
                                            </select>
                                </div>
                                <div class="col-sm-2">
                                    <select id="ref_phone_last_contact_filter" class="input-flat">
                                        <option value="-1">
                                            <?php echo __("Contact"); ?>
                                        </option>
                                        <option  value="1">
                                            <?php echo __("Less than 30 Days"); ?>
                                        </option>
                                        <option  value="2">
                                            <?php echo __("30-90 Days"); ?>
                                        </option>
                                        <option  value="3">
                                            <?php echo __("More Than 90 Days"); ?>
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-2" >
                                    <select id="ref_phone_rating_filter" class="input-flat">
                                        <option value="0">
                                            <?php echo __("Rating"); ?>
                                        </option>
                                        <option  value="1">
                                            <?php echo __("1 Star"); ?>
                                        </option>
                                        <option  value="2">
                                            <?php echo __("2 Star"); ?>
                                        </option>
                                        <option  value="3">
                                        <?php echo __("3 Star"); ?>
                                        </option>
                                        <option  value="4">
                                        <?php echo __("4 Star"); ?>
                                        </option>
                                        <option  value="5">
                                        <?php echo __("5 Star"); ?>
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <?php if (COUNT($referrer_provinces)) { ?>
                                    <select id="ref_pho_province_filter" class="input-flat" name="">
                                        <option value="0"><?php echo __("Province") ?></option>
                                        <?php foreach ($referrer_provinces as $key => $value): ?>
                                            <option value="<?=$value['migareference_geo_provinces_id'] ?>">
                                            <?=$value['province']." - ".$value['province_code'] ?>
                                            </option>
                                        <?php endforeach; ?>
                                    </select>
                                    <?php } ?>
                                </div>
                                <div class='col-sm-2'>
                                    <select id="ref_phone_job_filter" class="input-flat" name="field_type">
                                        <option value="-1"><?php echo __("Job") ?></option>
                                        <?php foreach ($all_jobs_collection as $key => $value): ?>
                                        <option value="<?php echo $value['job_id'] ?>">
                                            <?=__($value['job_title']) ?></option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                            </div>
                            <div class="row custom_filter_style" >
                                <div class='col-sm-2'>
                                    <select id="ref_phone_sector_filter" class="input-flat" name="field_type">
                                        <option value="-1"><?php echo __("Sector") ?></option>
                                        <?php foreach ($all_professions_collection as $key => $value): ?>
                                        <option value="<?php echo $value['profession_id'] ?>">
                                            <?=__($value['profession_title']) ?></option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <div class='col-sm-2'>
                                    <select id="ref_phone_range_filter" class="input-flat">
                                        <option value="0">
                                            <?php echo __("Range"); ?>
                                        </option>
                                        <option value="7">
                                            <?php echo __("Past 7 Days"); ?>
                                        </option>
                                        <option value="30">
                                            <?php echo __("Past 30 Days"); ?>
                                        </option>
                                        <option value="90">
                                            <?php echo __("Past 3 Months"); ?>
                                        </option>
                                        <option value="180">
                                            <?php echo __("Past 6 Months"); ?>
                                        </option>
                                        <option value="365">
                                            <?php echo __("Past 12 Months"); ?>
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <select id="ref_profiled_filter" class="input-flat">
                                        <option value="0">
                                            <?php echo __("Profiled"); ?>
                                        </option>
                                        <option value="1">
                                            <?php echo __("Profile Completed"); ?>
                                        </option>
                                        <option value="2">
                                            <?php echo __("Profile Not Completed"); ?>
                                        </option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <div title="T&C not accepted"  onclick="referrerTermsFilter()"><img src="https://beta.migastone.com/app/local/modules/Migareference/resources/appicons/terms_warrning.png" alt="" width="35px"></div>
                                </div>
                                <div class="col-sm-2">
                                </div>
                                <div class="col-sm-2">
                                    <button style='float:right;' class="btn btn-info" onclick="resetRefPhoneFilter()"><?php echo __("Reset") ?></button>
                                </div>
                            </div>
                            <table id="migarefrence_referrel_phonebook" class="table display responsive nowrap content-white-bkg" style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Edit'); ?></th>
                                        <th><?php echo __('Name'); ?></th>
                                        <th><?php echo __('Phone'); ?></th>
                                        <th><?php echo __('Email'); ?></th>
                                        <th><?php echo __('Created At'); ?></th>
                                        <th><?php echo __('Last Comm'); ?></th>
                                        <th><?php echo __('Credits'); ?></th>
                                        <th><?php echo __('Total Earned'); ?></th>
                                        <th><?php echo __('Total Reports'); ?></th>
                                        <th><?php echo __('Sponsor'); ?></th>
                                        <th><?php echo __('Job'); ?></th>
                                        <th><?php echo __('Sector'); ?></th>
                                        <th><?php echo __('Status'); ?></th>
                                        <th><?php echo __('Prospect'); ?></th>
                                        <th><?php echo __('Birth Date'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- End Referrer Phonebook -->
                <!-- Prospect Phonebook -->
                <div class="feature-block-list">
                    <div class="margin-top">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Prospect Phonebook'); ?>
                        </h3>
                        <div id="toggel-phonebook-prospect-view" class="container-fluid content-feature pt30">
                            <div class="row custom_filter_style">
                                <div class="col-sm-4">
                                    <button class="btn btn-success" onclick="buildProspectDB()"><i class="fa fa-download "> </i> <?php echo __("Prospect DB") ?></button>
                                </div>
                                <div class="col-sm-4">
                                    <div class="" style="width:250px;">
                                        <select id="phonebook_prospect_job_filter" class="input-flat" name="field_type">
                                            <option value="0"><?php echo __("Show All") ?></option>
                                            <?php foreach ($all_jobs as $key => $value): ?>
                                            <option value="<?php echo $value['migareference_jobs_id'] ?>">
                                                <?=__($value['job_title']) ?></option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    <div class="" style="float:right;">
                                        <div style="float:left;margin-right:16px;"
                                            onclick="prospectRatingFilter(1)"><span
                                                class="rating-star rating1 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;"
                                            onclick="prospectRatingFilter(2)"><span
                                                class="rating-star rating2 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;"
                                            onclick="prospectRatingFilter(3)"><span
                                                class="rating-star rating3 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;"
                                            onclick="prospectRatingFilter(4)"><span
                                                class="rating-star rating4 fa fa-star"></span></div>
                                        <div style="float:left;margin-right:16px;"
                                            onclick="prospectRatingFilter(5)"><span
                                                class="rating-star rating5 fa fa-star"></span></div>
                                        <button class="btn" style="background-color:#f8d578" onclick="prospectRatingFilter(0)"><?php echo __("All") ?></button>
                                    </div>
                                </div>
                            </div>
                            <table id="migarefrence_prospect_jobs"
                                class="table display responsive nowrap content-white-bkg" style="width:100%">
                                <thead>
                                    <tr class="border-grey">
                                        <th><?php echo __('Edit'); ?></th>
                                        <th><?php echo __('Name'); ?></th>
                                        <th><?php echo __('Surname'); ?></th>
                                        <th><?php echo __('Phone'); ?></th>
                                        <th><?php echo __('Job'); ?></th>
                                        <th><?php echo __('Email'); ?></th>
                                        <th><?php echo __('Referrer'); ?></th>
                                        <th><?php echo __('Last Comm'); ?></th>
                                        <th><?php echo __('Created At'); ?></th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- End Prospect Phonebook -->
                <!-- Potential Phonebook -->
                <div class="feature-block-list">
                    <div class="margin-top">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Contact Phonebook'); ?>
                        </h3>
                        <div id="toggel-phonebook-contact-view"
                            class="container-fluid content-feature pt30">
                            <div class="row">
                                <div class="col-sm-3">
                                    <button class="btn btn-success" onclick="buildSibUserDB()"><i class="fa fa-download "> </i><?php echo __(" Contact DB") ?></button>
                                </div>
                            </div>
                            <div class="form-group">
                                <table id="migarefrence_contacts_phonebook"
                                    class="table display responsive nowrap content-white-bkg"
                                    style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('Tranfer to Referrer'); ?></th>
                                            <th><?php echo __('ID'); ?></th>
                                            <th><?php echo __('Name'); ?></th>
                                            <th><?php echo __('Surname'); ?></th>
                                            <th><?php echo __('Phone'); ?></th>
                                            <th><?php echo __('Email'); ?></th>
                                            <th><?php echo __('Created At'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- End Potential Phonebook -->
                <!-- Referrer Wellcome Email Template Phonebook -->
                <div class="feature-block-list">
                    <div class="margin-top">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Referrer Welcome Email Template'); ?>
                        </h3>
                        <div id="toggel-wellcom-email-view"
                            class="container-fluid content-feature pt30">
                            <form id="wellcomeemailform"
                                action="<?php echo $this->getUrl('migareference/application/wellcomeemail') ?>"
                                method="post">
                                <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                                <input type="hidden" name="operation"
                                    value="<?=(count($pre_report_settings) ) ? "update" : "create" ; ?>" />
                                <input type="hidden" name="migareference_pre_report_settings_id"
                                    value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                                <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            <div class="alert alert-info">
                                                <p style="padding-left:15px;">
                                                    <?php echo __('You can use following custom tags in your Text')." "." @@referrer_link@@, @@user_name@@, @@user_email@@, @@user_firstpassword@@, @@agent_name@@, @@app_link@@, @@rd_name@@, @@rd_email@@, @@rd_phone@@, @@rd_calendar_url@@" ?>
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <label for="read_only"><?php echo __('Enable Welcome Email'); ?>
                                                *</label>
                                        </div>
                                        <div class="col-sm-8">
                                            <select id="" class="input-flat" name="enable_welcome_email">
                                                <option value="1"
                                                    <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_welcome_email']==1) ? "selected" : "" ; ?>>
                                                    <?php echo __('Yes') ?></option>
                                                <option value="2"
                                                    <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_welcome_email']==2) ? "selected" : "" ; ?>>
                                                    <?php echo __('No') ?></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <label for="read_only"><?php echo __('Email Title'); ?>* </label>
                                        </div>
                                        <div class="col-sm-8">
                                            <input type="text" name="referrer_wellcome_email_title" id=""
                                                value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['referrer_wellcome_email_title'] : "Complimenti a te @@user_name@@ sei un nostro segnalatore!" ; ?>"
                                                class="input-flat" placeholder="" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <label for="read_only"><?php echo __('Email Body'); ?> *</label>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            <textarea id="" rows="4" cols="50" class="pin input-flat replace-with-ckeditor" name="referrer_wellcome_email_body"><?=(count($pre_report_settings) && $pre_report_settings[0]['referrer_wellcome_email_body']!='' ) ? $pre_report_settings[0]['referrer_wellcome_email_body'] : "<p>Ciao @@user_name@@,</p><p>Registrandoti nella nostra APP come Segnalatore sei ora parte del nostro Club di Partners e ti aspettano importanti provvigioni per ogni segnalazione andata a buon fine.</p><p>I dati di accesso all&#39;APP sono questi:<br />user: @@user_email@@<br />Pass: @@user_firstpassword@@<br />Link APP: @@app_link@@</p><p>Non esitare a metterti in contatto con noi per qualsiasi dubbio o anche per un semplice aiuto. Sentiamo decine di persone ogni giorno e abbiamo una grande cerchia di influenza.</p><p>Al tuo successo<br />Customer Service</p>" ; ?></textarea>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="save pull-right" style="padding-right:15px;">
                                            <button class="button btn bt_save btn color-blue" type="submit">
                                                <?php echo __('Save'); ?>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- End Potential Phonebook -->
            </div>
            <!-- New Content -->
        </div>
        <!-- START:Report Page -->
        <div role="tabpanel" class="tab-pane" id="tab_reportpage">
            <h4><?php echo __("Report fields") ?></h4>
            <!--START: Report Field Update Form -->
            <div style="display:none" class="" id="showupdatereportfieldform">
                <button class="btn color-blue" onclick="backtoreportfieldlist()"><?php echo __("Back") ?></button>
                <form id="updatereportfield"
                    action="<?php echo $this->getUrl('migareference/application/updatereportfield') ?>" method="post">
                    <?php if (!count($pre_report_settings)){ ?>
                    <div class="alert alert-danger">
                        <p style="padding-left:15px;"><?php echo __('You must setup settings before to setup Status.') ?></p>
                    </div>
                    <?php } ?>
                    <input type="hidden" id="migareference_report_fields_id" name="migareference_report_fields_id"
                        value="" />
                    <input type="hidden" name="migareference_pre_report_settings_id"
                        value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                    <div class="report-extra-tab-content extra-two">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-horizontal">
                                    <div class="form-group">
                                        <div class="row extra_field_input" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="field_type"><?php echo __('Select Field Type'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="field_type" class="input-flat" name="field_type">
                                                        <option value="1"><?php echo __("Text") ?></option>
                                                        <option value="2"><?php echo __("Number") ?></option>
                                                        <option value="3"><?php echo __("Options") ?></option>
                                                        <option style="display:none;" value="4"><?php echo __("Address") ?></option>
                                                        <option value="5"><?php echo __("Long Text") ?></option>
                                                        <option value="6"><?php echo __("Birth Date") ?></option>
                                                        <!-- Type 6 will be considred as DOB-->
                                                        <option value="7"><?php echo __("Email") ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="label"><?php echo __('Filed Label'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <input id="field_label" class="input-flat" name="label" type="text"
                                                        value="">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="is_required"><?php echo __('Is required'); ?>? *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="field_is_required" class="input-flat"
                                                        name="is_required">
                                                        <option value="1"><?php echo __("Yes") ?></option>
                                                        <option value="2"><?php echo __("No") ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="is_visible"><?php echo __('Is visible'); ?>? *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="field_is_visible" class="input-flat" name="is_visible">
                                                        <option value="1"><?php echo __("Yes") ?></option>
                                                        <option value="2"><?php echo __("No") ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="is_visible"><?php echo __('Show in Status Report'); ?>? *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="field_is_visible_status_report" class="input-flat" name="is_visible_status_report">
                                                        <option value="1"><?php echo __("Yes") ?></option>
                                                        <option value="2"><?php echo __("No") ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row unique-address" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="enable_unique_address"><?php echo __('Enable Unique Address'); ?>?
                                                    *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="enable_unique_address" class="input-flat"
                                                        name="enable_unique_address">
                                                        <option value="1"
                                                            <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_unique_address']==1) ? "selected" : "" ; ?>>
                                                            <?php echo __('Yes') ?></option>
                                                        <option value="2"
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_unique_address']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('No') ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row unique-address" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="enable_unique_address"><?php echo __('Block Report for unique address'); ?>?*</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="block_address_report" class="input-flat"
                                                        name="block_address_report">
                                                        <option value="1"
                                                            <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['block_address_report']==1) ? "selected" : "" ; ?>>
                                                            <?php echo __('Yes') ?></option>
                                                        <option value="2"
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['block_address_report']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('No') ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row unique-address" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="address_grace_days"><?php echo __('Address Grace Period'); ?>?
                                                    *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <input type="number" name="address_grace_days" id="address_grace_days"
                                                    value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['address_grace_days'] : 90 ; ?>"
                                                    class="input-flat" placeholder="<?php echo __('180'); ?>" />
                                            </div>
                                        </div>
                                        <div id="is_unique_mobile_container" class="row unique-mobile" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="is_unique_mobile"><?php echo __('Enable unique prospect Phone Number'); ?>? *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="is_unique_mobile" class="input-flat" name="is_unique_mobile">
                                                        <option value="1" <?=(count($pre_report_settings) && $pre_report_settings[0]['is_unique_mobile']==1) ? "selected" : "" ; ?>>
                                                            <?php echo __('Yes') ?>
                                                        </option>
                                                        <option value="2" <?=(count($pre_report_settings) && $pre_report_settings[0]['is_unique_mobile']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('No') ?>
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="grace_days_container" class="row unique-mobile unique-mobile-enabled" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="grace_days"><?php echo __('Phone Number Grace Period'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <input type="number" name="grace_days" id="grace_days"
                                                    value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['grace_days'] : 90 ; ?>"
                                                    class="input-flat" placeholder="<?php echo __('180'); ?>" />
                                            </div>
                                        </div>
                                        <div id="mobile_grace_period_action_container" class="row unique-mobile unique-mobile-enabled" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="mobile_grace_period_action"><?php echo __('Grace Period Action'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="mobile_grace_period_action" class="input-flat" name="mobile_grace_period_action">
                                                        <option value="1" <?=(count($pre_report_settings) && $pre_report_settings[0]['mobile_grace_period_action']==1) ? "selected" : "" ; ?>>
                                                            <?php echo __('Block Report') ?>
                                                        </option>
                                                        <option value="2" <?=(count($pre_report_settings) && $pre_report_settings[0]['mobile_grace_period_action']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('Show Warning') ?>
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="grace_period_warning_message_container" class="row unique-mobile unique-mobile-enabled" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="grace_period_warning_message"><?php echo __('Grace Period Warning Text'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <input type="text" name="grace_period_warning_message" id="grace_period_warning_message"
                                                    value="<?=(count($pre_report_settings) && !empty($pre_report_settings[0]['grace_period_warning_message'])) ? $pre_report_settings[0]['grace_period_warning_message'] : __("Potentialy Duplicate Report Detected") ; ?>"
                                                    class="input-flat" />
                                            </div>
                                        </div>
                                        <div id="mobile_grace_period_database_container" class="row unique-mobile unique-mobile-enabled" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="mobile_grace_period_database"><?php echo __('Select Grace Period Database'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <div class="" style="">
                                                    <select id="mobile_grace_period_database" class="input-flat" name="mobile_grace_period_database">
                                                        <option value="1"
                                                            <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mobile_grace_period_database']==1) ? "selected" : "" ; ?>>
                                                            <?php echo __('Internal Database') ?></option>
                                                        <option value="2"
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mobile_grace_period_database']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('External Database') ?></option>
                                                        <option value="3"
                                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['mobile_grace_period_database']==2) ? "selected" : "" ; ?>>
                                                            <?php echo __('Both Database') ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div id='grace_period_extrnal_db_url_container' class="unique-mobile unique-mobile-enabled">
                                        <div class='row'>
                                            <div class='col-sm-12' style=' padding-left:30px;padding-right: 45px;'>
                                                <div class="alert alert-warning">
                                                    <p>
                                                        <?php echo __('Make sure your API endpoint can handle requests with the mobile number tagged as @@owner_mobile@@. If no response is received from the API endpoint, we will assume the mobile number is not blacklisted, and the report will be posted without further checks.') ?>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class='row'>
                                            <div class="col-sm-4">
                                                <?=__('Example API Endpoint URL') ?>
                                            </div>
                                            <div class="col-sm-7">
                                                <strong>https://your-external-system.com/api/check-duplicate?owner_mobile=@@owner_mobile@@</strong>
                                            </div>
                                        </div>
                                        <div id="grace_period_extrnal_db_url" class="row" style="margin-bottom:8px;">
                                            <div class="col-sm-4">
                                                <label for="grace_period_extrnal_db_url"><?php echo __('External CRM/Database URL'); ?> *</label>
                                            </div>
                                            <div class="col-sm-7">
                                                <input type="text" name="grace_period_extrnal_db_url" id="grace_period_extrnal_db_url"
                                                    value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['grace_period_extrnal_db_url'] : __("") ; ?>"
                                                    class="input-flat" placeholder="<?php echo __(''); ?>" />
                                            </div>
                                        </div>
                                        </div>
                                        <div class="" id="options_config">
                                            <div class="row field-options" style="margin-bottom:8px;display:none;"
                                                id="import_option_list_container">
                                                <div class="col-sm-4">
                                                    <label for="options_type"><?php echo __('Import Option List'); ?>?
                                                        *</label>
                                                </div>
                                                <div class="col-sm-7">
                                                    <div class="" style="">
                                                        <select id="import_option_list" class="input-flat"
                                                            name="options_type">
                                                            <option value="0"><?php echo __("Use Custom Options") ?>
                                                            </option>
                                                            <option value="1"><?php echo __("Countries") ?></option>
                                                            <option value="2"><?php echo __("Provinces") ?></option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row field-options extra_field_input"
                                                id="custom_option_defination" style="margin-bottom:8px;display: none;">
                                                <div class="col-sm-11">
                                                    <div class="alert alert-info">
                                                        <p style="padding-left:15px;">
                                                            <?php echo __('Add option values separated by @ tag. Ex. Option value@Option value or import options from given list') ?>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div id="custom_option_container"
                                                class="row field-options extra_field_input"
                                                style="margin-bottom:8px;display: none;">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="field_option"><?php echo __('Custom option values'); ?></label>
                                                </div>
                                                <div class="col-sm-7">
                                                    <div class="" style="">
                                                        <input id="field_option" class="input-flat" name="field_option"
                                                            type="text" value="">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row field-options" style="margin-bottom:8px;display:none;"
                                                id="default_1_container">
                                                <div class="col-sm-4">
                                                    <label for="default_1"><?php echo __('Select Default value'); ?>?
                                                        *</label>
                                                </div>
                                                <div class="col-sm-7">
                                                    <div class="" style="">
                                                        <select id="default_1" class="input-flat" name="default_1">
                                                            <option value="0"><?php echo __("No default") ?></option>
                                                            <?php foreach ($geoCountries as $key => $value): ?>
                                                            <option
                                                                value="<?php echo $value['migareference_geo_countries_id'] ?>">
                                                                <?php echo $value['country'] ?> </option>
                                                            <?php endforeach; ?>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row field-options" style="margin-bottom:8px;display:none"
                                                id="default_province_container">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="default_province"><?php echo __('Select Dafault Province'); ?>?
                                                        *</label>
                                                </div>
                                                <div class="col-sm-7">
                                                    <div class="" style="">
                                                        <select id="default_province" class="input-flat"
                                                            name="default_2">
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="save pull-right" style="padding-right:15px;">
                                            <button class="button btn bt_save btn color-blue" type="submit">
                                                <?php echo __('Save'); ?>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!--END: Report Field Update Form -->
            <ul class="status_repot_field_list" id="reportfieldlist"
                style="list-style-type:none;background-color:white;padding-left:0;">
                <div class="border-grey row" style="padding:6px;">
                    <div class="col-md-2"> <strong><?php echo __('Field Label'); ?></strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Type'); ?></strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Is visible'); ?>?</strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Is required'); ?>?</strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Webhook Tag'); ?>?</strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Edit'); ?></strong></div>
                    <div class="col-md-2"> <strong><?php echo __('Order'); ?></strong></div>
                </div>
                <?php foreach ($report_fields as $key => $value): ?>
                <li class="eliminatereortfiled" id="<?=$value['migareference_report_fields_id'] ?>">
                    <div class="row" style="padding:5px;">
                        <div class="col-md-2">
                            <?php
                            if ($value['type']==1) {
                                echo $value['label'];
                            }else {
                                echo preg_replace('/\bExtra\b.*/', 'Custom Field', $value['label']);
                            }
                            ?>
                        </div>
                        <div class="col-md-2">
                            <?=($value['type']==1) ? __('MANDATORY') : __('OPTIONAL')." "."(custom_field_".$value['field_type_count'].")"; ?>
                        </div>
                        <div class="col-md-2">
                            <?php echo ($value['is_visible']==1) ? __("Yes") : __("No") ; ?>
                        </div>
                        <div class="col-md-2">
                            <?php echo ($value['is_required']==1) ? __("Yes") : __("No") ; ?>
                        </div>
                        <div class="col-md-2">
                            <?php
                               $static_fields[1]['name']="property_type";
                               $static_fields[2]['name']="sales_expectations";
                               $static_fields[3]['name']="address";
                               $static_fields[4]['name']="owner_name";
                               $static_fields[5]['name']="owner_surname";
                               $static_fields[6]['name']="owner_mobile";
                               $static_fields[7]['name']="note";
                                if ($value['type']==1) {
                                  echo $static_fields[$value['field_type_count']]['name'];
                                }else {
                                  echo 'custom_field_'.$value['field_type_count'];
                                }
                             ?>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-info" type="button" name="button"
                                onclick="importreportfieldformdata(<?=$value['migareference_report_fields_id'] ?>,<?=$value['field_type_count'] ?>)">
                                <i class="fa fa-pencil" rel=""></i>
                            </button>
                        </div>
                        <div class="col-md-1">
                            <i class="folder-sortable-handle fa fa-arrows"></i>
                            </button>
                        </div>
                    </div>
                </li>
                <?php endforeach; ?>
            </ul>
        </div>
        <!-- START:REMINDER: -->
        <div role="tabpanel" class="tab-pane" id="tab_reminder">
            <!-- Reminder Types -->
            <div class="feature-block-list">
                <div class="margin-top">
                    <h3 class="title-editor no-border-radius title-feature-indent">
                        <?php echo __('Reminder Types'); ?>
                        <button id="toggel-reminder-type-view-event" type="button"
                            class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                            <i class="fa fa-angle-down"></i>
                        </button>
                    </h3>
                    <div id="toggel-reminder-type-view" style="display:none"
                        class="container-fluid first-row-feature content-feature feature-manage-items">
                        <div class="" id="addReminderTypeContainer" style="display:none">
                            <h3 class="">
                                <?php echo __('Add New Reminder Type'); ?>
                                <button onclick="showReminderTypeList()" class="btn btn-info" type="button"
                                    name="button" style="float:right;margin-top:-5px;">
                                    <?php echo __("Back") ?>
                                </button>
                            </h3>
                            <div class="">
                                <form id="reportreminderform"
                                    action="<?php echo $this->getUrl('migareference/application/savereportreminderform') ?>"
                                    method="post">
                                    <div class="form-horizontal">
                                        <input type="hidden" name="app_id" value="<?=$app_id ?>">
                                        <input id="reminder-type-operation" type="hidden" name="operation"
                                            value="create">
                                        <input id="rep-rem-id" type="hidden" name="rep_rem_id" value="">
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="rep_rem_title"><?php echo __('Reminder Title'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="" type="text" name="rep_rem_title" id="rep-rem-title"
                                                    class="input-flat" placeholder="<?php echo __('Appointment'); ?>">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label
                                                    for="rep-rem-target-notification"><?php echo __('Notification'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="rep-rem-target-notification" class="input-flat"
                                                    name="rep_rem_target_notification">
                                                    <option value="1"><?php echo __('Both Email/Push') ?></option>
                                                    <option value="2"><?php echo __('Only Email') ?></option>
                                                    <option value="3"><?php echo __('Only Push') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="rep-rem-badge"><?php echo __('Reminder Badge'); ?> *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="rep-rem-badge" class="input-flat" name="rep_rem_badge">
                                                    <option value="1"><?php echo __('Yes') ?></option>
                                                    <option value="2"><?php echo __('NO') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="rep-rem-type"><?php echo __('Reminder Type'); ?> *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="rep-rem-type" class="input-flat" name="rep_rem_type">
                                                    <option value="1"><?php echo __('Report') ?></option>
                                                    <option value="2"><?php echo __('Automation') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for=""><?php echo __('Reminder Icon'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8" style="text-align:center;">
                                                <button style="width:100%" id="rep_rem_icon_picture" type="button"
                                                    class="btn color-blue image_left">
                                                    <i class="icon-camera-retro"></i>
                                                    <?php echo __("Upload") ?>
                                                </button>
                                                <p id="uploader_logo_ie_description" style="display:none">
                                                    <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                </p>
                                                <input id="rep_rem_icon_file" class="uploader" style="display:none"
                                                    type="file" name="files[]"
                                                    data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                <img id="rep_rem_icon_cover_img" width="60" height="60"
                                                    style="display:none" src="" class="cimage" />
                                                <a href="javascript:;" style="display:none"
                                                    id="remove_rep_rem_icon_cover_img" class="btn color-blue rcimage">
                                                    <i class="fa fa-times"></i>
                                                </a>
                                                <input type="hidden" id="c_rep_rem_icon_file" name="c_rep_rem_icon_file"
                                                    value="" />
                                                <input type="hidden" id="rep_rem_icon_cover_file"
                                                    name="rep_rem_icon_file" />
                                                <input type="hidden" id="rep_rem_icon_remove_cover" name="" value="0" />
                                            </div>
                                        </div>
                                        <!-- Report Reminder Custom Email settings -->
                                        <div id="rep-rem-email-container">
                                            <div class="form-group">
                                                <div class="alert alert-info">
                                                    <p style="padding-left:15px;">
                                                        <?php echo __('You can use following custom tags in your Email Title and Text') ?>
                                                        <?php echo __('@@report_no@@, @@referral_name@@, @@report_owner@@, @@report_owner_phone@@, @@time_reminder@@, @@comment@@, @@commission@@, @@agent_name@@, @@app_link@@, @@app_name@@, @@rd_name@@, @@rd_email@@, @@rd_phone@@, @@rd_calendar_url@@')?>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="rep-rem-email-title"><?php echo __('Email Subject'); ?>*</label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <input value="" type="text" name="rep_rem_email_title"
                                                        id="rep-rem-email-title" class="input-flat"
                                                        placeholder="<?php echo __('Subject'); ?>">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label for="rep-rem-email-text"><?php echo __("Email Body") ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-8">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-12">
                                                    <textarea rows="4" cols="50" type="text" id="rep-rem-email-text" class="replace-with-ckeditor input-flat" name="rep_rem_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Report Reminder Custom PUSH settings -->
                                        <div id="rep-rem-push-container">
                                            <div class="form-group" id="rep-rem-push-allowed-tags">
                                                <div class="alert alert-info">
                                                    <p style="padding-left:15px;">
                                                        <?php echo __('You can use following custom tags in your PUSH Title and Text') ?>
                                                        <?php echo __('@@report_owner@@, @@report_owner_phone@@, @@report_no@@, @@time_reminder@@, @@referral_name@@, @@referral_phone@@, @@referral_email@@, @@commission@@, @@app_link@@, @@app_name@@, @@comment@@, @@agent_name@@')?>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group" id="rep-rem-push-warnig-tags" style="display:none;">
                                                <div class="alert alert-warning">
                                                    <p style="padding-left:15px;">
                                                        <?php echo __('Custom Tags are not allowed in Automation settings') ?>
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="form-group" style="display:none;">
                                                <div class="col-sm-4 ">
                                                    <label
                                                        for="rep-rem-before-push-hours"><?php echo __('Before Hours'); ?><sup>*</sup></label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <input value="0" type="number" min="0"
                                                        name="rep_rem_before_push_hours" id="rep-rem-before-push-hours"
                                                        class="required input-flat">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label for="rep-rem-push-title"><?php echo __('Push Title'); ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <input id="rep-rem-push-title" value="" type="text"
                                                        name="rep_rem_push_title" class="input-flat"
                                                        placeholder="<?php echo __('Push Title'); ?>">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label for="rep-rem-push-text"><?php echo __("Push Message") ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <textarea rows="4" cols="50" id="rep-rem-push-text" class="input-flat" name="rep_rem_push_text" placeholder="<?php echo __('Message'); ?>"></textarea>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="rep-rem-open-feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <select id="rep-rem-open-feature" name="rep_rem_open_feature"
                                                        class="no-dk styled-select color-blue">
                                                        <option value="0"><?php echo __("No") ?></option>
                                                        <option value="1"><?php echo __("Yes") ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group" id="rep-rem-feature-id-container"
                                                style="display:none">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="rep-rem-feature-id"><?php echo __('Choose the features to open'); ?></label>
                                                </div>
                                                <div class="col-sm-8 div-all-features">
                                                    <select id="rep-rem-feature-id" name="rep_rem_feature_id"
                                                        class="no-dk styled-select color-blue">
                                                        <?php foreach($features as $feature) : ?>
                                                        <?php if(!$feature->getIsVisible()) continue; ?>
                                                        <option value="<?php echo $feature->getId(); ?>">
                                                            <?php echo $feature->getTabbarName() ?>
                                                        </option>
                                                        <?php endforeach ?>
                                                        <option value="0">
                                                            <?php echo __('Custom URL?'); ?>
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group rep-rem-custom-url-container"
                                                id="rep-rem-custom-url-container" style="display:none">
                                                <div class="col-sm-4">
                                                    <label for="rep-rem-custom-url"><?php echo __('Custom URL'); ?>
                                                        *</label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <input id="rep-rem-custom-url" name="rep_rem_custom_url" value=""
                                                        class="input-flat"
                                                        placeholder="<?php echo __('Custom URL'); ?>">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label
                                                        for="reminder_migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <button id="rep_rem_push_picture" type="button"
                                                        class="upload_contact_picture btn color-blue image_left">
                                                        <i class="icon-camera-retro"></i>
                                                        <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                                    </button>
                                                    <p id="rep_rem_uploader_logo_ie_description" style="display:none">
                                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                    </p>
                                                    <input id="rep_rem_push_file" class="uploader" style="display:none"
                                                        type="file" name="files[]"
                                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                    <img id="rep_rem_push_cover_img" width="210" height="110"
                                                        style="display:none;" src="" class="cimage" />
                                                    <input type="hidden" id="rep_rem_c_migareference_cover_file"
                                                        name="rep_rem_c_migareference_cover_file" value="">
                                                    <input type="hidden" id="rep_rem_push_cover_file"
                                                        name="rep_rem_custom_file" />
                                                    </a>
                                                </div>
                                            </div>
                                            <!-- END Reminder PUSH settings -->
                                        </div>
                                        <div class="form-group">
                                            <div class="save pull-right">
                                                <button class="button btn bt_save btn color-blue" type="submit">
                                                    <?php echo __('Save'); ?>
                                                </button>
                                            </div>
                                        </div>
                                </form>
                            </div>
                        </div>
                    </div>
                    <div class="" id="reminderTypeListContainer">
                        <h3 class="">
                            <button onclick="addReminderType()" class="btn btn-info" type="button" name="button"
                                style="float:right;margin-top:-5px;">
                                <i class="fa fa-plus fa-lg"> </i>
                            </button>
                        </h3>
                        <div class="">
                            <div style="overflow-x:auto;">
                                <table id="table-reminder-type-list"
                                    class="table display responsive nowrap content-white-bkg" style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('Action'); ?></th>
                                            <th><?php echo __('Title'); ?></th>
                                            <th><?php echo __('Notification'); ?>?</th>
                                            <th><?php echo __('App Badge'); ?>?</th>
                                            <th><?php echo __('Type'); ?>?</th>
                                            <th><?php echo __('Date'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Reminder Automation -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Reminder Automation + Webhooks'); ?>
                    <button id="toggel-reminder-notification-view-event" type="button"
                        class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                        <i class="fa fa-angle-down"></i>
                    </button>
                </h3>
                <div id="toggel-reminder-notification-view" style="display:none"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <div class="container-fluid  pt30">
                        <div class="" id="addReminderAutomationContainer" style="display:none">
                            <h3 class="">
                                <button onclick="showReminderAutomationList()" class="btn btn-info" type="button"
                                    name="button" style="margin-top:-5px;">
                                    <?php echo __("Back") ?>
                                </button>
                            </h3>
                            <div class="">
                                <form id="reportautoreminderform"
                                    action="<?php echo $this->getUrl('migareference/application/saveautomationreminderform') ?>"
                                    method="post">
                                    <div class="form-horizontal">
                                        <input type="hidden" name="app_id" value="<?=$app_id ?>">
                                        <input id="reminder-auto-operation" type="hidden" name="operation"
                                            value="create">
                                        <input id="auto-rem-id" type="hidden" name="auto_rem_id" value="">
                                        <input id="auto-rem-trigger-copy" type="hidden" name="auto_rem_trigger_copy"
                                            value="">
                                        <input id="auto-rem-fix-rating-copy" type="hidden"
                                            name="auto_rem_fix_rating_copy" value="">
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-trigger"><?php echo __('Select Trigger'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-trigger"
                                                    class="input-flat styled-select color-blue" name="auto_rem_trigger">
                                                    <option value=""></option>
                                                    <?php foreach ($automation_trigger as $key => $value):
                                                        // $find="disabled";
                                                        //For these key status we allows to add more than one
                                                        // if ($key==6 || $key==4 || $key==9 || $key==10) {
                                                        //     $find="";
                                                        // }
                                                    ?>
                                                    <option <?php echo $find ?> value="<?=$key ?>">
                                                        <?=$value ?>
                                                    </option>
                                                    <?php endforeach; ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt4" id="auto-rem-status-container">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-action"><?php echo __('Select Staus'); ?> *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-status-list"
                                                    class="input-flat styled-select color-blue" name="auto_rem_report_trigger_status">
                                                    <option value=""></option>
                                                    <?php foreach ($property_status as $key => $value):  ?>
                                                    <option  value="<?=$value['migareference_report_status_id'] ?>">
                                                        <?=$value['status_title'] ?>
                                                    </option>
                                                    <?php endforeach; ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group ">
                                            <div class="col-sm-4">
                                                <label
                                                    for="auto_rem_title"><?php echo __('Automation Title'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="" type="text" name="auto_rem_title" id="auto-rem-title"
                                                    class="input-flat" placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt1 rem_opt2 rem_opt3 rem_opt4 rem_opt5 rem_opt6 rem_opt7 rem_opt8 rem_opt9">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-action"><?php echo __('Trigger Action'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-action" class="input-flat" name="auto_rem_action">
                                                    <option value="1"><?php echo __('Reminder') ?></option>
                                                    <option value="2"><?php echo __('Engagement') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt1 rem_opt2 rem_opt3 rem_opt4 rem_opt5 rem_opt6 rem_opt7 rem_opt8 rem_opt9 rem_opt10" id="auto-rem-action-container">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-type"><?php echo __('Select Reminder Type'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-type" class="input-flat" name="auto_rem_type">
                                                    <?php foreach ($reminder_types as $key => $value):
                                                        if ($value['rep_rem_type']==2) { ?>
                                                    <option <?=$selected ?>
                                                        value="<?=$value['migarefrence_report_reminder_types_id'] ?>">
                                                        <?=$value['rep_rem_title'] ?>
                                                    </option>
                                                    <?php } endforeach; ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group" style="display:none;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="auto-rem-trigger-hour"><?php echo __('Select Trigger Time (Hour)'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-trigger-hour" class="input-flat"
                                                    name="auto_rem_trigger_hour">
                                                    <?php for ($i=0; $i < 24; $i++) { ?>
                                                    <option value="<?php echo $i ?>"><?php echo $i ?></option>
                                                    <?php } ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class=" rem_opt rem_opt1 rem_opt2 rem_opt2 rem_opt4 rem_opt5 rem_opt7 rem_opt8">
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label for="auto-rem-min-rating"><?php echo __('Minimum Rating'); ?>
                                                    </label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <select id="auto-rem-min-rating" class="input-flat"
                                                        name="auto_rem_min_rating">
                                                        <option selected value="1"><?php echo __('1 Star') ?></option>
                                                        <option value="2"><?php echo __('2 Star') ?></option>
                                                        <option value="3"><?php echo __('3 Star') ?></option>
                                                        <option value="4"><?php echo __('4 Star') ?></option>
                                                        <option value="5"><?php echo __('5 Star') ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-4">
                                                    <label for="auto-rem-max-rating"><?php echo __('Maximum Rating'); ?>
                                                    </label>
                                                </div>
                                                <div class="col-sm-8">
                                                    <select id="auto-rem-max-rating" class="input-flat"
                                                        name="auto_rem_max_rating">
                                                        <option value="1"><?php echo __('1 Star') ?></option>
                                                        <option value="2"><?php echo __('2 Star') ?></option>
                                                        <option value="3"><?php echo __('3 Star') ?></option>
                                                        <option value="4"><?php echo __('4 Star') ?></option>
                                                        <option selected value="5"><?php echo __('5 Star') ?></option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt6">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-fix-rating"><?php echo __('Fix Rating'); ?>
                                                </label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-fix-rating" class="input-flat"
                                                    name="auto_rem_fix_rating">
                                                    <?php for ($i=1; $i < 6; $i++) {
                                                            $find = (in_array($i,$auto_fixed_rating)) ? "disabled" : "";
                                                        ?>
                                                    <option <?php echo $find ?> value="<?php echo $i ?>">
                                                        <?php echo $i.__(' Star') ?></option>
                                                    <?php    } ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt" id="auto-rem-engagement-container">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-engagement"><?php echo __('Set Engagement'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-engagement" class="input-flat"
                                                    name="auto_rem_engagement">
                                                    <option value="1"><?php echo __('+1') ?></option>
                                                    <option value="2"><?php echo __('+2') ?></option>
                                                    <option value="3"><?php echo __('-1') ?></option>
                                                    <option value="4"><?php echo __('-2') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt1">
                                            <div class="col-sm-4">
                                                <label
                                                    for="auto_rem_reports"><?php echo __('Number of  reports'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="5" type="number" name="auto_rem_reports"
                                                    id="auto-rem-reports" class="input-flat" placeholder="">
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt2 rem_opt4 rem_opt6 rem_opt7 rem_opt8 rem_opt9">
                                            <div class="col-sm-4">
                                                <label for="auto_rem_days"><?php echo __('Number of days'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="60" type="number" name="auto_rem_days" id="auto-rem-days"
                                                    class="input-flat" placeholder="30">
                                            </div>
                                        </div>
                                        <div class="form-group rem_opt rem_opt9">
                                            <div class="col-sm-4">
                                                <label for="auto_rem_percent"><?php echo __('Percentage of failed invitations'); ?> % *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-percent" class="input-flat"
                                                    name="auto_rem_percent">
                                                    <option value="20"><?php echo __('20%') ?></option>
                                                    <option value="30"><?php echo __('30%') ?></option>
                                                    <option value="40"><?php echo __('40%') ?></option>
                                                    <option value="50"><?php echo __('50%') ?></option>
                                                    <option value="60"><?php echo __('60%') ?></option>
                                                    <option value="70"><?php echo __('70%') ?></option>
                                                    <option value="80"><?php echo __('80%') ?></option>
                                                    <option value="90"><?php echo __('90%') ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <!-- Recap Email -->
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="auto-rem-add-recap-email"><?php echo __('Add this trigger to Recap Email'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="auto-rem-add-recap-email" class="input-flat" name="auto_rem_add_recap_email">
                                                    <option value="2"><?php echo __("No") ?></option>
                                                    <option value="1"><?php echo __("Yes") ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="auto_rem_recap_email_header"><?php echo __('Recap email header'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="" type="text" name="auto_rem_recap_email_header" id="auto_rem_recap_email_header" class="input-flat" placeholder="">
                                                <small><?php echo __('This is trigger-specific header, and is displayed in the recap email for the corresponding section. Use it to add instructions or context for admins regarding the actions they need to take.') ?></small>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for=""><?php echo __('Recap email template'); ?>*</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <textarea rows="4" cols="50" type="text" id="auto_rem_recap_email_template" class="replace-with-ckeditor input-flat" name="auto_rem_recap_email_template" placeholder="<?php echo __('Message') ?>"></textarea>
                                            </div>
                                        </div>
                                        <?php if ($pre_report_settings[0]['enable_webhooks']==1){ ?>
                                        <div class="form-group">
                                            <div class="col-sm-12">
                                                <div class="alert alert-info">
                                                    <p style="padding-left:15px;">
                                                        <?php echo __('The Webhook method will be triggered whenever a corresponding Reminder Triger is fired.') ?>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-12">
                                                <div class="alert alert-info">
                                                    <p style="padding-left:15px;">
                                                        <?php echo __("WEBHOOK Fields Label") ?><?php echo __(': referrer_id, referrer_name, referrer_surname, referrer_email, referrer_phone, agent_name, agent_surname, agent_email, agent_phone, agent_id, user_name, user_surname, user_email, user_phone, reminder_uid, referrer_rating, rd_name, rd_phone, rd_email, rd_calendar_url,') ?>
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="read_only"><?php echo __('Enable Reminder WebHooks'); ?>? *</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select class="input-flat" name="enable_reminder_triger_webhooks">
                                                    <option value="1">
                                                        <?php echo __('Yes') ?></option>
                                                    <option value="2">
                                                        <?php echo __('No') ?></option>
                                                </select>
                                            </div>
                                        </div>     -->
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label for="auto_rem_days"><?php echo __('Add the WEBHOOK address (URL) where to receive data'); ?></label>
                                            </div>
                                            <div class="col-sm-8">
                                                <input value="" type="text" name="auto_rem_webhook_url" id="auto-rem-webhook-url" placeholder='www.yourwebhook.com'
                                                    class="input-flat" >
                                            </div>
                                        </div>
                                        <?php } ?>
                                        <div class="form-group">
                                            <!-- <div class="col-sm-4">
                                                <label for="auto_rem_days"><?php echo __('Are you aware about possible effects of this automation ?'); ?>*</label>
                                            </div>
                                            <div class="col-sm-2">
                                                <input id="autom_rem_effects" class="sb-form-checkbox color-blue height15" type="checkbox" name="autom_rem_effects" value="1">
                                            </div> -->
                                            <!-- <div class="col-sm-4">
                                                <?php echo __("Calculate possible effects of this automation"); ?>
                                            </div>
                                            <div class="save pull-right">
                                                <button onclick="showAutomationEffects()"
                                                    class="button btn bt_save btn color-blue" type="button">
                                                    <?php echo __('Calculate'); ?>
                                                </button>
                                            </div> -->
                                        </div>
                                        <div class="form-group">
                                            <div class="save pull-right">
                                                <button class="button btn bt_save btn color-blue" type="submit">
                                                    <?php echo __('Save'); ?>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <table id="automation_effects_table"
                                    class="table display responsive nowrap content-white-bkg" style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('Referrer Id'); ?></th>
                                            <th><?php echo __('Name'); ?></th>
                                            <th><?php echo __('Surname'); ?></th>
                                            <th><?php echo __('Email'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="" id="reminderAutomationListContainer">
                        <h3 class="">
                            <button style="margin-left: 25px;" onclick="sendRecapTestMail('<?php echo $pre_report_settings[0]['recap_email_bcc']; ?>')" class="btn btn-warning" type="button" name="button">
                                <?php echo __("Send Sample Test Email") ?>
                            </button>
                            <button onclick="sendrecaplivemail('<?php echo $pre_report_settings[0]['recap_email_bcc']; ?>')" class="btn btn-success" type="button" name="button">
                                <?php echo __("Send Test Email with Real Data") ?>
                            </button>
                            <button style="float:right;" onclick="addReminderAutomation()" class="btn btn-info" type="button" name="button" >
                                <?php echo __("Add New Reminder") ?>
                            </button>
                        </h3>
                        <div class="">
                            <div style="overflow-x:auto;">
                                <table id="table-reminder-auto-list"
                                    class="table display responsive nowrap content-white-bkg" style="width:100%">
                                    <thead>
                                        <tr class="border-grey">
                                            <th><?php echo __('UID'); ?></th>
                                            <th><?php echo __('Action'); ?></th>
                                            <th><?php echo __('Trigger'); ?></th>
                                            <th><?php echo __('Title'); ?></th>
                                            <th><?php echo __('Type'); ?></th>
                                            <th><?php echo __('Trigger Count'); ?>?</th>
                                            <th><?php echo __('Date'); ?></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Report Reminder View -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Report Reminders'); ?>
                    <button id="toggel-reminder-report-view-event" type="button"
                        class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                        <i class="fa fa-angle-down"></i>
                    </button>
                </h3>
                <div id="toggel-reminder-report-view" style="display:none"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <!-- Postpone Reminder Form -->
                    <div class="" id="postponereminderformcontainer" style="display:none;">
                        <button class="btn color-blue"
                            onclick="showReportReminderLog()"><?php echo __("Back") ?></button>
                        <br><br>
                        <form id="postponereminderform" method="post"
                            action="<?php echo $this->getUrl('migareference/application/postponereminder') ?>">
                            <div class="form-horizontal">
                                <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                                <input type="hidden" name="rep_rem_id" id="rep_rem_id" value="" />
                                <div class="form-group ">
                                    <div class="col-sm-6">
                                        <label for=""><?php echo __('Select Reminder type'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select id="rep_rem_type" class="input-flat" name="rep_rem_type">
                                            <?php foreach ($reminder_types as $key => $value):
                                                        if ($value['rep_rem_type']==2) { ?>
                                            <option <?=$selected ?>
                                                value="<?=$value['migarefrence_report_reminder_types_id'] ?>">
                                                <?=$value['rep_rem_title'] ?>
                                            </option>
                                            <?php } endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for=""><?php echo __('Reminder Date'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="rep_rem_date" type="date" name="rep_rem_date" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for="rep_rem_time"><?php echo __('Reminder Time'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <input id="rep_rem_time" type="time" name="rep_rem_time" class="pin input-flat"
                                            value="" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for=""><?php echo __('Reminder Before Time'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <select class="input-flat" name="rep_rem_before" id="rep_rem_before">
                                            <option value="1"><?php echo __("Just in Time")   ?></option>
                                            <option value="2"><?php echo __("before 15 mins") ?></option>
                                            <option value="3"><?php echo __("before 30 mins") ?></option>
                                            <option value="4"><?php echo __("before 45 mins") ?></option>
                                            <option value="5"><?php echo __("before 1 hour")  ?></option>
                                            <option value="6"><?php echo __("before 2 hours") ?></option>
                                            <option value="7"><?php echo __("before 6 hours") ?></option>
                                            <option value="8"><?php echo __("before 1 day")   ?></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-6">
                                        <label for=""><?php echo __('Note'); ?></label>
                                    </div>
                                    <div class="col-sm-6">
                                        <textarea rows="4" cols="50" type="text" id="rep_rem_note" class="input-flat" name="rep_rem_note" placeholder="<?php echo __('Add Note') ?>"></textarea>
                                    </div>
                                </div>
                                <div class="save form-group">
                                    <div class="col-sm-10">
                                    </div>
                                    <div class="col-sm-2">
                                        <button style="float:right;" class="button btn bt_save btn color-blue"
                                            type="submit">
                                            <?php echo __('Save'); ?>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="report-reminder-log-table" style="overflow-x:auto;">
                        <table id="table-report-reminder-log" class="table display responsive nowrap content-white-bkg"
                            style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('Action'); ?></th>
                                    <th><?php echo __('Title'); ?></th>
                                    <th><?php echo __('Date'); ?></th>
                                    <th><?php echo __('Prospect'); ?></th>
                                    <th><?php echo __('Phone'); ?></th>
                                    <th><?php echo __('Status'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Reminders logs View -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Automation Trigger Log'); ?>
                    <button id="toggel-reminder-logs-view-event" type="button"
                        class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                        <i class="fa fa-angle-down"></i>
                    </button>
                </h3>
                <div id="toggel-reminder-logs-view" style="display:none" class="container-fluid first-row-feature content-feature feature-manage-items">
                <form id="resetreminderform" action="<?php echo $this->getUrl('migareference/application/resetreminder') ?>" method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class='row' style='display:none;' id='reminder-reset-warning'>
                            <div class="col-sm-12">
                                <div class="alert alert-danger">
                                    <p style="padding-left:15px;">
                                        <?php echo __('Please be aware that performing the reset action will permanently remove all selected reminders. Additionally, this action will update the statistics data accordingly. Once deleted, this information could not be recovered.') ?>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class='row custom_filter_style'>
                            <!-- Reminder Trigger Filter -->
                            <div class='col-sm-2'>
                                <select onChange='loadReminderAutoLogs()' id="auto-rem-log-trigger-filter" class="input-flat" name="auto_rem_log_trigger_filter">
                                    <option value="0"><?php echo __("Trigger") ?></option>
                                    <?php foreach ($auto_reminders as $key => $value): ?>
                                    <option value="<?=$value['migarefrence_report_reminder_auto_id'] ?>">  <?=$value['auto_rem_title'] ?></option>
                                    <?php endforeach; ?>
                                </select>
                            </div>
                            <!-- Reminder Aiisgned To Filter -->
                            <div class='col-sm-2'>
                                <select id="auto-rem-log-assigned-filter" onChange="loadReminderAutoLogs()" class="input-flat" name="agent_filter">
                                <option value="0"><?php echo __("Admin / Agent") ?></option>
                                <option value="1000000"><?php echo __("Only Admin") ?></option>
                                <?php foreach ($all_agents_collection as $key => $value): ?>
                                        <option value="<?=$value['agent_id'] ?>"> <?=$value['agent_name'] ?> </option>
                                <?php endforeach; ?>
                                </select>
                            </div>
                            <!-- Reminder Status Filter -->
                            <div class='col-sm-2'>
                                <select id="auto-rem-log-status-filter" onChange="loadReminderAutoLogs()" class="input-flat" name="status_filter">
                                    <option value="all"><?php echo __("Reminder Staus"); ?></option>
                                    <option value="pending" selected><?php echo __("Pending"); ?></option>
                                    <option value="done"><?php echo __("Done"); ?></option>
                                    <option value="postponed"><?php echo __("Postponed"); ?></option>
                                    <option value="canceled"><?php echo __("Canceled"); ?></option>
                                </select>
                            </div>
                            <!-- Reminder Filter Sapce -->
                            <div class='col-sm-3'>
                                <div>
                                    <input type="checkbox" onchange="selAllReminders(this)" id="selectAllReminders" />
                                    <label for="selectAllReminders"><?php echo __('Select All'); ?></label>
                                </div>
                            </div>
                            <div class='col-sm-3'>
                                <button onClick='reminderReset()' type='button' id='reset_reminder' disabled class="button btn btn-danger">
                                    <?php echo __('Reset Reminders'); ?>
                                </button>
                            </div>

                        </div>
                        <table id="table-auto-reminder-log" class="table display responsive nowrap content-white-bkg" style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('ID'); ?></th>
                                    <th><?php echo __('Reset'); ?></th>
                                    <th><?php echo __('Title'); ?></th>
                                    <th><?php echo __('Referrer'); ?></th>
                                    <th><?php echo __('Report NO'); ?></th>
                                    <th><?php echo __('Status'); ?></th>
                                    <th><?php echo __('Date'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </form>
                    <h1><?php echo __("Reminder Reset Logs") ?></h1>
                    <table id="table-auto-reminder-reset-log" class="table display responsive nowrap content-white-bkg" style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('ID'); ?></th>
                                    <th><?php echo __('Admin Name'); ?></th>
                                    <th><?php echo __('Total Reset Reminder Count'); ?></th>
                                    <th><?php echo __('Date'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                </div>
            </div>
        </div>
        <!-- New Note Email / PUSH Template -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('New Notes PUSH / Email Template'); ?>
                    <button id="toggel-new-note-view-event" type="button"
                        class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                        <i class="fa fa-angle-down"></i>
                    </button>
                </h3>
            </div>
            <div id="new-note-template-view" style="display:none" class="container-fluid first-row-feature content-feature feature-manage-items">
                <form id="newnotenotification" action="<?php echo $this->getUrl('migareference/application/savenewnotenotification') ?>" method="post">
                    <input type="hidden" id='migarefrence_new_note_notification_id' name="migarefrence_new_note_notification_id" value="" />
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="new-note-target-notification"><?php echo __('Notification'); ?>*</label>
                            </div>
                            <div class="col-sm-8">
                                <select id="new-note-target-notification" class="input-flat" name="new_note_target_notification">
                                    <option value="1"><?php echo __('Both Email/Push') ?></option>
                                    <option value="2"><?php echo __('Only Email') ?></option>
                                    <option value="3"><?php echo __('Only Push') ?></option>
                                </select>
                            </div>
                        </div>
                        <!-- New Note Custom Email settings -->
                        <div id="new-note-email-container">
                            <div class="form-group">
                                <div class="alert alert-info">
                                    <p style="padding-left:15px;">
                                        <?php echo __('You can use following custom tags in your Title and Text') ?>
                                        <?php echo __('@@report_no@@, @@report_date@@, @@owner_name@@, @@owner_surname@@, @@app_name@@, @@app_link@@, @@new_note@@, @@agent_name@@')?>
                                    </p>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="new-note-email-title"><?php echo __('Email Subject'); ?>*</label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="" type="text" name="new_note_email_title"
                                        id="new-note-email-title" class="input-flat"
                                        placeholder="<?php echo __('Subject'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="new-note-email-text"><?php echo __("Email Body") ?>*</label>
                                </div>
                                <div class="col-sm-8">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea rows="4" cols="50" type="text" id="new-note-email-text" class="replace-with-ckeditor input-flat" name="new_note_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                </div>
                            </div>
                        </div>
                        <!-- New Note Custom PUSH settings -->
                        <div id="new-note-push-container">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="new-note-push-title"><?php echo __('Push Title'); ?>*</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="new-note-push-title" value="" type="text"
                                        name="new_note_push_title" class="input-flat"
                                        placeholder="<?php echo __('Push Title'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="new-note-push-text"><?php echo __("Push Message") ?>*</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea rows="4" cols="50" id="new-note-push-text" class="input-flat" name="new_note_push_text" placeholder="<?php echo __('Message'); ?>"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="new-note-open-feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="new-note-open-feature" name="new_note_open_feature" class="no-dk styled-select color-blue">
                                        <option value="0"><?php echo __("No") ?></option>
                                        <option value="1"><?php echo __("Yes") ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="new-note-feature-id-container"
                                style="display:none">
                                <div class="col-sm-4">
                                    <label for="new-note-feature-id"><?php echo __('Choose the features to open'); ?></label>
                                </div>
                                <div class="col-sm-8 div-all-features">
                                    <select id="new-note-feature-id" name="new_note_feature_id"
                                        class="no-dk styled-select color-blue">
                                        <?php foreach($features as $feature) : ?>
                                        <?php if(!$feature->getIsVisible()) continue; ?>
                                        <option value="<?php echo $feature->getId(); ?>">
                                            <?php echo $feature->getTabbarName() ?>
                                        </option>
                                        <?php endforeach ?>
                                        <option value="0">
                                            <?php echo __('Custom URL?'); ?>
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group new-note-custom-url-container"
                                id="new-note-custom-url-container" style="display:none">
                                <div class="col-sm-4">
                                    <label for="new-note-custom-url"><?php echo __('Custom URL'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="new-note-custom-url" name="new_note_custom_url" value=""
                                        class="input-flat"
                                        placeholder="<?php echo __('Custom URL'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4"> <label for="reminder_migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <button id="new_note_push_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                    </button>
                                    <p id="new_note_uploader_logo_ie_description" style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="new_note_push_file" class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="new_note_push_cover_img" width="210" height="110"
                                        style="display:none;" src="" class="cimage" />
                                    <input type="hidden" id="new_note_c_migareference_cover_file"
                                        name="new_note_c_migareference_cover_file" value="">
                                    <input type="hidden" id="new_note_push_cover_file"
                                        name="new_note_custom_file" />
                                    </a>
                                </div>
                            </div>
                            <!-- END Reminder PUSH settings -->
                        </div>
                        <div class="form-group">
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- Reminder Webhook Erro Notification Template and Webhook Triger Logs-->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Reminder Webhook Logs and Failure Notification Template'); ?>
                    <button id="toggel-reminder-webhook-log-view-event" type="button"
                        class="toggle_design color-blue pull-right bt-header-right btn feature-toggle-items">
                        <i class="fa fa-angle-down"></i>
                    </button>
                </h3>
            </div>
            <div id="toggel-reminder-webhook-log-view" style="display:none" class="container-fluid first-row-feature content-feature feature-manage-items">
            <form id="reminderwebhookerrormessageform"
                    action="<?php echo $this->getUrl('migareference/application/savewebhookremindererrortemplate') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <input type="hidden" name="webhook_type" value="reminder" />
                        <input type="hidden" name="migareference_webhook_error_template_id" value="<?=(count($webhook_reminder_msg_template)) ? $webhook_reminder_msg_template[0]['migareference_webhook_error_template_id'] : "" ; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('This notification template will be triggered if there is still an error after 3 attempts and will be delivered to the Admin.') ?></p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                    <p style="padding-left:15px;">
                                        <?php echo __('You can use following custom tags in your Title and Text') ?>
                                        <?php echo __('@@reminder_id@@')?>
                                    </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Webhook Error Notification'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="is_enabled">
                                        <option value="1" <?=(!count($webhook_reminder_msg_template)) ? "selected" : "" ; ?>
                                            <?=(count($webhook_reminder_msg_template) && $webhook_reminder_msg_template[0]['is_enabled']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($webhook_reminder_msg_template) && $webhook_reminder_msg_template[0]['is_enabled']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="auto_rem_days"><?php echo __('Email Subject'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(count($webhook_reminder_msg_template)) ? $webhook_reminder_msg_template[0]['email_title'] : "" ; ?>" type="text" name="email_title" id="" placeholder='' class="input-flat" >
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __("Email Body") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea rows="4" cols="50" type="text" id="" class=" replace-with-ckeditor input-flat" name="email_message" placeholder="<?php echo __('Message') ?>"><?=(!empty($webhook_reminder_msg_template[0]['email_message']) ) ? $webhook_reminder_msg_template[0]['email_message'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </form>
                    <br><br><hr><br><br>
                    <h4><?php echo __("Webhook Logs") ?></h4>
                    <div class="">
                        <div class="form-group">
                            <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('This table displays the webhook logs for the last 48 hours.') ?>
                                </p>
                            </div>
                        </div>
                        <table id="reminder_webhook_log" class="table content-white-bkg">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('Reminder UID'); ?></th>
                                    <th><?php echo __('Response Type'); ?></th>
                                    <th><?php echo __('Response Message'); ?></th>
                                    <th><?php echo __('Created At'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
            </div>
        </div>
    </div>
    <!-- START:Report API: -->
    <div role="tabpanel" class="tab-pane" id="tab_api">
        <!-- Report API -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Report API'); ?>
                    <a target="_blank" style="width: 300px;float: right;margin-top: -6px;" id="" class="btn color-blue form-control"
                        href="https://docs.google.com/document/d/e/2PACX-1vRCdZK67cUnwiTFJm5jkRe7sLqzaSF9EYt-KFpzIDiB3ojeVDm9wHzpoC2xrDbIqbAEY7ga4JD6DhWn/pub"><?php echo __('API + WEBHOOK Documentation') ?></a>
                </h3>

                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <form id="reportapiform"
                        action="<?php echo $this->getUrl('migareference/application/savereportapi') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-danger">
                                        <p style="padding-left:15px;">
                                            <?php echo __('Make sure API clients aware about TOKEN reset.') ?></p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="reminder_type_text"><?php echo __('API Token'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <strong><?=(count($pre_report_settings)) ? $pre_report_settings[0]['report_api_token'] : "" ; ?></strong>
                                </div>
                                <div class="col-sm-2">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue"
                                            type="submit"><?php echo __('Reset Token'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form id="adminapiform"
                        action="<?php echo $this->getUrl('migareference/application/saveadminapi') ?>" method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for=""><?php echo __('API Admin'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <select id="admin_id" class="input-flat" name="admin_id" style="width:200px">
                                        <option value=""></option>
                                        <?php foreach ($admins as $key => $value):
                                          $selected = ($value['api_admin']==1) ? 'selected' : '' ;
                                        ?>
                                        <option <?=$selected ?> value="<?=$value['migareference_app_admins_id'] ?>">
                                            <?=$value['firstname']." ".$value['lastname'] ?>
                                        </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue"
                                            type="submit"><?php echo __('Reset Admin'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Report Webhook -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Report Webhooks'); ?>
                </h3>
                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <form id="reportwebhookform"
                        action="<?php echo $this->getUrl('migareference/application/savereportwebhook') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <!-- START:Form Elements  -->
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('The Webhook method will be triggerd any time a NEW REPORT is ADDED or MODIFIED.') ?></p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;" id='report_webhook_tags_list'>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Report API WebHooks'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_report_api_webhooks">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_api_webhooks']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_report_api_webhooks']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="auto_rem_days"><?php echo __('Add the WEBHOOK address (URL) where to receive data'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['report_api_webhook_url'] : "" ; ?>" type="text" name="report_api_webhook_url" id="auto-rem-webhook-url" placeholder='www.yourwebhook.com'
                                        class="input-flat" >
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                            <!-- END:Form Elements  -->
                        </div>
                    </form>
                    <form id="reportwebhooktestcallform"
                        action="<?php echo $this->getUrl('migareference/application/sendreportapitestcall') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <?php if (!empty($pre_report_settings[0]['report_api_webhook_url'])) { ?>
                            <div class="save pull-left">
                                <button style='background-color:#dea435 !important;color:white;' class="button btn bt_save" type="submit">
                                <?php echo __('Send a Test Call'); ?>
                                </button>
                            </div>
                            <?php   } ?>
                            <!-- END:Form Elements  -->
                        </div>
                    </form>
                    <!-- Report Webhook Error Message Dynamic Template -->
                    <br><br><br><hr><br>
                    <h4><?php echo __("Webhook Error Notification Template") ?></h4>
                    <form id="reportwebhookerrormessageform"
                    action="<?php echo $this->getUrl('migareference/application/savewebhookreporterrortemplate') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <input type="hidden" name="webhook_type" value="report" />
                        <input type="hidden" name="migareference_webhook_error_template_id" value="<?=(count($webhook_report_msg_template)) ? $webhook_report_msg_template[0]['migareference_webhook_error_template_id'] : "" ; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('This notification template will be triggered if there is still an error after 3 attempts and will be delivered to the Admin.') ?></p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                    <p style="padding-left:15px;">
                                        <?php echo __('You can use following custom tags in your Title and Text') ?>
                                        <?php echo __('@@report_no@@, @@last_attempt_at@@, @@report_source@@, @@error_message@@')?>
                                    </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Webhook Error Notification'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="is_enabled">
                                        <option value="1" <?=(!count($webhook_report_msg_template)) ? "selected" : "" ; ?>
                                            <?=(count($webhook_report_msg_template) && $webhook_report_msg_template[0]['is_enabled']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($webhook_report_msg_template) && $webhook_report_msg_template[0]['is_enabled']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="auto_rem_days"><?php echo __('Email Subject'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(count($webhook_report_msg_template)) ? $webhook_report_msg_template[0]['email_title'] : "" ; ?>" type="text" name="email_title" id="" placeholder='' class="input-flat" >
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __("Email Body") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea rows="4" cols="50" type="text" id="" class=" replace-with-ckeditor input-flat" name="email_message" placeholder="<?php echo __('Message') ?>"><?=(!empty($webhook_report_msg_template[0]['email_message']) ) ? $webhook_report_msg_template[0]['email_message'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </form>
                    <br><br><hr><br><br>
                    <h4><?php echo __("Webhook Logs") ?></h4>
                    <div class="">
                        <div class="form-group">
                            <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('This table displays the webhook logs for the last 10 days.') ?>
                                </p>
                            </div>
                        </div>
                        <table id="report_webhook_log" class="table content-white-bkg">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('Report NO'); ?></th>
                                    <th><?php echo __('Response Type'); ?></th>
                                    <th><?php echo __('Response Message'); ?></th>
                                    <th><?php echo __('Created At'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- New Referrer Webhook -->
        <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Referrer Webhooks'); ?>
                </h3>
                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <form id="newrefwebhookform"
                        action="<?php echo $this->getUrl('migareference/application/savenewrefwebhook') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <!-- START:Form Elements  -->
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('The Webhook method is set up to be triggered whenever there is a NEW REFERRER created or existing referrer updated.') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('Use event_type=create for new referrer creation and event_type=update for existing referrer updates to differentiate requests on the receiver end.') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;" id=''>
                                            <?php echo __('WEBHOOK Fields Label') ?>:
                                            <?php echo __('referrer_id, referrer_name, referrer_surname, referrer_mobile, referrer_email, referrer_dob, referrer_job, referrer_profession, referrer_gdpr, agent_id, agent_email, agent_name, agent_surname, referrer_link,') ?>
                                            <?php  echo $tags_list = ($pre_report_settings[0]['enable_main_address']==1) ? "referrer_country, referrer_country_code, referrer_province, referrer_province_code,referrer_note, reciprocity_notes," : '' ; ?>
                                            <?php  echo __('rd_name, rd_phone, rd_email, rd_calendar_url'); ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Referrer WebHook'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="enable_new_ref_webhooks">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_new_ref_webhooks']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_new_ref_webhooks']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable event'); ?>? *</label>
                                </div>
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Create'); ?></label>
                                    <input id="" class="sb-form-checkbox color-blue height15" type="checkbox" <?php echo ($pre_report_settings[0]['enable_new_ref_webhooks_create']==1) ? 'checked' : '' ; ?> name="enable_new_ref_webhooks_create" value="">
                                </div>
                                <div class="col-sm-4">
                                <label for="read_only"><?php echo __('Update'); ?></label>
                                    <input id="" class="sb-form-checkbox color-blue height15" type="checkbox" <?php echo ($pre_report_settings[0]['enable_new_ref_webhooks_update']==1) ? 'checked' : '' ; ?> name="enable_new_ref_webhooks_update" value="">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="auto_rem_days"><?php echo __('Add the WEBHOOK address (URL) where to receive data'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['new_ref_webhook_url'] : "" ; ?>" type="text" name="new_ref_webhook_url" id="auto-rem-webhook-url" placeholder='www.yourwebhook.com'
                                        class="input-flat" >
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                            <!-- END:Form Elements  -->
                        </div>
                    </form>
                    <form id="referrerwebhooktestcallform"
                        action="<?php echo $this->getUrl('migareference/application/sendreferrerwebhooktestcall') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <?php if (!empty($pre_report_settings[0]['new_ref_webhook_url'])) { ?>
                            <div class="save pull-left">
                                <button style='background-color:#dea435 !important;color:white;' class="button btn bt_save" type="submit">
                                <?php echo __('Send a Test Call'); ?>
                                </button>
                            </div>
                            <?php   } ?>
                            <!-- END:Form Elements  -->
                        </div>
                    </form>
                      <!-- Report Webhook Error Message Dynamic Template -->
                      <br><br><br><hr><br>
                    <h4><?php echo __("Referrer Webhook Error Notification Template") ?></h4>
                    <form id="referrerwebhookerrormessageform"
                    action="<?php echo $this->getUrl('migareference/application/savewebhookreporterrortemplate') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <input type="hidden" name="webhook_type" value="referrer" />
                        <input type="hidden" name="migareference_webhook_error_template_id" value="<?=(count($webhook_referrer_msg_template)) ? $webhook_referrer_msg_template[0]['migareference_webhook_error_template_id'] : "" ; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('This notification template will be triggered if there is still an error after 3 attempts and will be delivered to the Admin.') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('You can use following custom tags in your Title and Text') ?>
                                            <?php echo __('@@referrer_id@@, @@error_message@@')?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Webhook Error Notification'); ?>? *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select class="input-flat" name="is_enabled">
                                        <option value="1" <?=(!count($webhook_referrer_msg_template)) ? "selected" : "" ; ?>
                                            <?=(count($webhook_referrer_msg_template) && $webhook_referrer_msg_template[0]['is_enabled']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($webhook_referrer_msg_template) && $webhook_referrer_msg_template[0]['is_enabled']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="auto_rem_days"><?php echo __('Email Subject'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(count($webhook_referrer_msg_template) && !empty($webhook_referrer_msg_template[0]['email_title'])) ? $webhook_referrer_msg_template[0]['email_title'] : "Errore Webhook invio Nuovi Segnalatori" ; ?>" type="text" name="email_title" id="" placeholder='' class="input-flat" >
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __("Email Body") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea rows="4" cols="50" type="text" id="" class=" replace-with-ckeditor input-flat" name="email_message" placeholder="<?php echo __('Message') ?>"><?=(COUNT($webhook_referrer_msg_template) && !empty($webhook_referrer_msg_template[0]['email_message']) ) ? $webhook_referrer_msg_template[0]['email_message'] : "<p>Gentile Admin,<br /> abbiamo rilevato un errore di invio dei dati nel WEBHOOK che raccoglie i nuovi iscritti come Segnalatori.<br /> L&#39;id del Segnalatore che non &egrave; stato possibile inviare al webhook &egrave;&nbsp;@@referrer_id@@<br />Il messaggio di errore &egrave; questo&nbsp;@@error_message@@<br />Preghiamo di controllare se il sistema esterno &egrave; allineato correttamente</p><p>Buon Lavoro</p>" ; ?></textarea>
                                </div>
                            </div>
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </form>
                    <br><br><hr><br><br>
                    <h4><?php echo __("Webhook Logs") ?></h4>
                    <div class="">
                        <div class="form-group">
                            <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('This table displays the webhook logs for the last 48 hours.') ?>
                                </p>
                            </div>
                        </div>
                        <table id="referrer_webhook_log" class="table content-white-bkg">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('User ID'); ?></th>
                                    <th><?php echo __('Name'); ?></th>
                                    <th><?php echo __('Email'); ?></th>
                                    <th><?php echo __('Response Type'); ?></th>
                                    <th><?php echo __('Response Message'); ?></th>
                                    <th><?php echo __('Created At'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
         <!-- Credits API -->
         <div class="feature-block-list">
            <div class="margin-top">
                <h3 class="title-editor no-border-radius title-feature-indent">
                    <?php echo __('Credits API'); ?>
                </h3>
                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <form id="creditsapitokenform"
                        action="<?php echo $this->getUrl('migareference/application/savecreditsapi') ?>" method="post">
                        <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="alert alert-danger">
                                        <p style="padding-left:15px;"><?php echo __('Make sure API clients aware about TOKEN reset.') ?></p>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4 ">
                                    <label for="reminder_type_text"><?php echo __('API Token'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-6">
                                    <strong><?=(count($pre_report_settings)) ? $pre_report_settings[0]['credits_api_token'] : "" ; ?></strong>
                                </div>
                                <div class="col-sm-2">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue"
                                            type="submit"><?php echo __('Reset Token'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form id="creditsapiadminform"
                        action="<?php echo $this->getUrl('migareference/application/savecreditsadminapi') ?>" method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-4 ">
                                    <label for=""><?php echo __('API Admin'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-6">
                                    <select id="credits_api_admin" class="input-flat" name="credits_api_admin" style="width:200px">
                                        <option value=""></option>
                                        <?php foreach ($admins as $key => $value):
                                          $selected = ($value['credits_api_admin']==1) ? 'selected' : '' ;
                                        ?>
                                        <option <?=$selected ?> value="<?=$value['migareference_app_admins_id'] ?>">
                                            <?=$value['firstname']." ".$value['lastname'] ?>
                                        </option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue"
                                            type="submit"><?php echo __('Reset Admin'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <form id="enablecreditsapiform"
                        action="<?php echo $this->getUrl('migareference/application/saveenablecreditsapi') ?>" method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="read_only"><?php echo __('Enable Credits API'); ?>? *</label>
                                </div>
                                <div class="col-sm-6">
                                    <select class="input-flat"  style="width:200px;" name="enable_credits_api">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_credits_api']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_credits_api']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue"
                                            type="submit"><?php echo __('Submit'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                    <hr>
                    <h4><?php echo __("Credits API log") ?></h4>
                    <div class="">
                        <table id="credits_api_log" class="table content-white-bkg">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('Request IP'); ?></th>
                                    <th><?php echo __('Response Type'); ?></th>
                                    <th><?php echo __('Description'); ?></th>
                                    <th><?php echo __('Created At'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                    <hr>
                    <h4><?php echo __("Custom Credits Notifications") ?></h4>
                    <form id="creditsapinotification" action="<?php echo $this->getUrl('migareference/application/savecreditsapinotifications') ?>" method="post">
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <input type="hidden" name="migarefrence_credits_notification_id" value="<?=(count($getCreditsApiNotification) && !empty($getCreditsApiNotification[0]['migarefrence_credits_notification_id']) ) ? $getCreditsApiNotification[0]['migarefrence_credits_notification_id'] : "" ; ?>" />
                    <input id="credits-api-operation" type="hidden" name="operation" value="<?=(count($getCreditsApiNotification) && !empty($getCreditsApiNotification[0]['app_id']) ) ? "update" : "create" ; ?>">
                    <!-- Credits API notifications  -->
                    <div class="form-horizontal" id="credits_api_refferral_notification">
                        <!--Agent Prize Email -->
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="ref-credits-api-enable-notification"><?php echo __('Enable Notifaction'); ?>*</label>
                            </div>
                            <div class="col-sm-8">
                                <select id="ref-credits-api-enable-notification" class="input-flat" name="ref_credits_api_enable_notification">
                                        <option value="1" <?=(!count($getCreditsApiNotification)) ? "selected" : "" ; ?>
                                            <?=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_enable_notification']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_enable_notification']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="ref-credits-api-notification-type"><?php echo __('Notifaction Type'); ?>*</label>
                            </div>
                            <div class="col-sm-8">
                                <select id="ref-credits-api-notification-type" class="input-flat" name="ref_credits_api_notification_type">
                                    <option <?=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_notification_type']==2) ? "selected" : "" ; ?>  value="1"><?php echo __('Both Email/PUSH') ?></option>
                                    <option <?=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_notification_type']==2) ? "selected" : "" ; ?> value="2"><?php echo __('Only Email') ?></option>
                                    <option <?=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_notification_type']==2) ? "selected" : "" ; ?> value="3"><?php echo __('Only PUSH') ?></option>
                                </select>
                            </div>
                        </div>
                        <div class="alert alert-info">
                            <p style="padding-left:15px;">
                                <?php echo __('You can use following custom tags in your Title and Text')." "." @@referrer_name@@, @@referrer_surname@@, @@credit@@, @@credit_type@@, @@credit_description@@, @@credit_balance@@, @@app_link@@, @@rd_name@@, @@rd_email@@, @@rd_phone@@, @@rd_calendar_url@@" ?>
                            </p>
                        </div>
                        <div id="ref-credits-api-email-settings" class="">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __('Email Subject'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="<?=(!empty($getCreditsApiNotification[0]['ref_credits_api_email_title']) ) ? $getCreditsApiNotification[0]['ref_credits_api_email_title'] : "" ; ?>" type="text" name="ref_credits_api_email_title"
                                        id="ref-credits-api-email-title" class="credits-api-text required input-flat"
                                        placeholder="<?php echo __('Subject'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __("Email Body") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea rows="4" cols="50" type="text" id="ref-credits-api-email-text" class="credits-api-text replace-with-ckeditor input-flat" name="ref_credits_api_email_text" placeholder="<?php echo __('Message') ?>"><?=(!empty($getCreditsApiNotification[0]['ref_credits_api_email_text']) ) ? $getCreditsApiNotification[0]['ref_credits_api_email_text'] : "" ; ?></textarea>
                                </div>
                            </div>
                        </div>
                        <!-- Refreer Prize PUSH -->
                        <div id="ref-credits-api-push-settings" class="">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for=""><?php echo __('Push Title'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="ref-credits-api-push-title" value="<?=(!empty($getCreditsApiNotification[0]['ref_credits_api_push_title']) ) ? $getCreditsApiNotification[0]['ref_credits_api_push_title'] : "" ; ?>" type="text"
                                        name="ref_credits_api_push_title" class="prz-text required input-flat"
                                        placeholder="<?php echo __('Push Title'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="ref_credits_api_push_text"><?php echo __("Push Message") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea rows="4" cols="50" id="ref-credits-api-push-text" class="prz-text ref_credits_api_push_text input-flat" name="ref_credits_api_push_text" placeholder="<?php echo __('Message'); ?>"><?=(!empty($getCreditsApiNotification[0]['ref_credits_api_push_text']) ) ? $getCreditsApiNotification[0]['ref_credits_api_push_text'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="ref_credits_api_open_feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="ref-credits-api-open-feature" name="ref_credits_api_open_feature" class="no-dk styled-select color-blue">
                                        <option value="1"><?php echo __("Yes") ?></option>
                                        <option value="0"><?php echo __("No") ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group" id="ref-credits-api-feature-id-container">
                                <div class="col-sm-4">
                                    <label for="ref_credits_api_feature_id"><?php echo __('Choose the features to open'); ?></label>
                                </div>
                                <div class="col-sm-8 div-all-features">
                                    <select id="ref-credits-api-feature-id" name="ref_credits_api_feature_id"
                                        class="no-dk styled-select color-blue">
                                        <?php echo $getCreditsApiNotification[0]['ref_credits_api_feature_id']; ?>
                                        <?php foreach($features as $feature) : ?>
                                        <?php if(!$feature->getIsVisible()) continue; ?>
                                        <?php $selected=(count($getCreditsApiNotification) && $getCreditsApiNotification[0]['ref_credits_api_feature_id']==$feature->getId()) ? "selected" : "" ; ?>
                                        <option <?php echo $selected ?> value="<?php echo $feature->getId(); ?>">
                                            <?php echo $feature->getTabbarName() ?>
                                        </option>
                                        <?php endforeach ?>
                                        <option value="0">
                                            <?php echo __('Custom URL?'); ?>
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group ref-credits-api-custom-url-container " style="display:none"
                                id="ref-credits-api-custom-url-container">
                                <div class="col-sm-4">
                                    <label for="ref_credits_api_custom_url"><?php echo __('Custom URL'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="ref_credits_api_custom_url" name="ref_credits_api_custom_url" value=""
                                        class="ref_credits_api_custom_url required input-flat"
                                        placeholder="<?php echo __('Custom URL'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label
                                        for="ref_credits_api_migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                </div>
                                <div class="col-sm-8">
                                    <!--[if gte IE 10]><!-->
                                    <button id="ref_credits_api_custom_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                    </button>
                                    <!--<![endif]-->
                                    <p id="ref_credits_api_custom_uploader_logo_ie_description" style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="ref_credits_api_custom_file" class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="ref_credits_api_custom_cover_img" width="210" height="110"
                                        style="<?php if(!count($getCreditsApiNotification) || empty($getCreditsApiNotification[0]['ref_credits_api_custom_file'])) {?> display:none; <?php } ?>"
                                        src="<?php if(count($getCreditsApiNotification) && !empty($getCreditsApiNotification[0]['ref_credits_api_custom_file'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$getCreditsApiNotification[0]['ref_credits_api_custom_file']; } ?>"
                                        class="cimage" />
                                    <a href="javascript:;" style="<?php if(!count($getCreditsApiNotification) || empty($getCreditsApiNotification[0]['ref_credits_api_custom_file'])) {?> display:none; <?php } ?>"
                                        id="remove_ref_credits_api_custom_cover_img" class="btn color-blue rcimage">
                                        <i class="fa fa-times"></i>
                                    </a>
                                    <!-- <input type="hidden" id="ref_credits_api_custom_c_cover_file"
                                                name="ref_credits_api_custom_c_cover_file"
                                                value="" /> -->
                                    <input type="hidden" id="ref_credits_api_custom_migareference_cover_file"
                                        name="ref_credits_api_custom_file" />
                                    <input type="hidden" id="remove_ref_credits_api_custom_cover_img_field"
                                        name="remove_ref_credits_api_custom_cover_img_field" value="0" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue" type="submit"><?php echo __('Submit'); ?></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END Referrer Prize PUSH -->
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <!-- START:Twillio API: -->
    <div role="tabpanel" class="tab-pane" id="tab_twillioapi">
        <div class="feature-block-list">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Manage Twillio API'); ?>
            </h3>
            <div class="margin-top">
                <!-- Twillio API Credential Form -->
                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <form id="twillioapiform"
                        action="<?php echo $this->getUrl('migareference/application/savetwilliocredentials') ?>"
                        method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <input type="hidden" name="migareference_pre_report_settings_id"
                            value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label
                                        for="reminder_type_text"><?php echo __('Enable Twillio SMS Notifications'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <select id="enable_twillio_notification" class="input-flat"
                                        name="enable_twillio_notification">
                                        <option value="1" <?=(!count($pre_report_settings)) ? "selected" : "" ; ?>
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_twillio_notification']==1) ? "selected" : "" ; ?>>
                                            <?php echo __('Yes') ?></option>
                                        <option value="2"
                                            <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_twillio_notification']==2) ? "selected" : "" ; ?>>
                                            <?php echo __('No') ?></option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="twillio_sid"><?php echo __('Twillio SID'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="text" name="twillio_sid" id=""
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['twillio_sid'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="twillio_token"><?php echo __('Twillio Token'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="text" name="twillio_token" id=""
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['twillio_token'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="twillio_sim_id"><?php echo __('Twillio sim id'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="text" name="twillio_sim_id" id=""
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['twillio_sim_id'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                        </div>
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label
                                        for="default_country_code"><?php echo __('Default Country Code'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="text" name="default_country_code" id=""
                                        value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['default_country_code'] : "+39" ; ?>"
                                        class="input-flat" placeholder="+39" />
                                </div>
                            </div>
                        </div>
                        <div class="save pull-right">
                            <button class="button btn bt_save btn color-blue" type="submit">
                                <?php echo __('Save'); ?>
                            </button>
                        </div>
                    </form>
                </div>
                <!-- Twillio API Test Credentials -->
                <div id="toggel-api-type-view"
                    class="container-fluid first-row-feature content-feature feature-manage-items">
                    <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('Below you can add a PHONE NUMBER to receive a test SMS using above Twillio settings.') ?>
                                </p>
                            </div>
                    <form id="twilliotestform"
                        action="<?php echo $this->getUrl('migareference/application/twilliotestform') ?>"
                        method="post">
                        <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                        <div class="form-horizontal">
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="test_phone"><?php echo __('Phone Number'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <input type="text" name="test_phone" id=""
                                        value="+39"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-3 ">
                                    <label for="test_phone"><?php echo __('Text'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-7">
                                    <textarea rows="4" cols="50" type="text" id="" class="input-flat" name="twillio_test_message" placeholder="<?php echo __('Type Your Message') ?>"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="save pull-right">
                            <button class="button btn bt_save btn color-blue" type="submit">
                                <?php echo __('Test'); ?>
                            </button>
                        </div>
                    </form>
                </div>
                <div>
                    <div style="overflow-x:auto;">
                        <h3 class="title-editor no-border-radius title-feature-indent">
                            <?php echo __('Twillio Logs(Last 7 Days)'); ?>
                        </h3>
                        <table id="twillio_logs_table" class="table display responsive nowrap content-white-bkg"
                            style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('Date'); ?></th>
                                    <th><?php echo __('Referrer Name'); ?></th>
                                    <th><?php echo __('SMS Text'); ?></th>
                                    <th><?php echo __('API Response'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- START:OPTIN FORM: -->
    <div role="tabpanel" class="tab-pane" id="tab_optionform">
        <div class="feature-block-list">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Manage Optin Form'); ?>
            </h3>
            <div class="margin-top">
                <div id="optin-form-container"></div>
            </div>
        </div>
    </div>
    <!-- START:AI Integration: -->
    <div role="tabpanel" class="tab-pane" id="tab_ai_integration">
        <div id="ai-integration-container">
                    <!-- Content will be added included here -->
        </div>
    </div>
    <!-- START:Qualification Integreation: -->
    <div role="tabpanel" class="tab-pane" id="tab_qualification">
        <div id="qualification-container">

        

             <!-- Content will be added included here -->
        </div>
    </div>
    <!--START: Tab Status and Notifications -->
    <div role="tabpanel" class="tab-pane" id="tab_push">
        <!--STATRT  STATUS TEMPLATE and thier Notifications settings -->
        <div id="status-notification-form" class="container-fluid first-row-feature content-feature migareference-push"
            style="display: none;">
            <button class="btn color-blue" onclick="backtoStatussettings()"><?php echo __("Back") ?></button>
            <br><br>
            <!--START:  ZIP Import Form -->
            <form id="statusImportForm" method="post"
                action="<?php echo $this->getUrl('migareference/application/importstatus') ?>"
                enctype="multipart/form-data">
                <input type="hidden" name="value_id" id="value_id" value="<?php echo $value_id; ?>" />
                <div class="form-horizontal">
                    <div class="infos">
                        <div id="status_content">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="status_import"><?php echo __('Select Zip File'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="file" accept=".zip" id="status_import" name="status_import"
                                        class="status_import required input-flat">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="save pull-right">
                    <button class="button btn bt_save btn color-blue" type="submit">
                        <?php echo __('Save'); ?>
                    </button>
                </div>
            </form>
            <br><br>
            <hr><br>

            <!-- END: ZIP Import Form -->
            <?php if (!count($pre_report_settings)): ?>
            <div class="alert alert-danger">
                <p style="padding-left:15px;"><?php echo __('You must setup settings before to setup Status.') ?>
                </p>
            </div>
            <?php else: ?>
            <?php if (count($standard_status)<$standard_limit): ?>
            <div class="alert alert-warning" id="standard-warrning">
                <p style="padding-left:15px;">
                    <?php echo __('To setup any new status first you have to setup all')." ".$standard_limit." ".__('standard status.') ?>
                </p>
            </div>
            <h4 class="sub-heading" id="standard-heading"><?php echo __('Standard Status'); ?></h4>
            <div class="alert alert-info" id="standard-info">
                <p style="padding-left:15px;" id="standard-info-text">
                    <?php
                    // Standard Staus
                    // 1 for new report
                    // 2 Make trigger to paid
                    // 3 for closing report
                    // 4 for Mandate ackquired
                    // 5 for Short Reminder
                    // 6 for Long Reminder
                    // Save Status
                    switch ($standard_index) {
                      case 1:
                        echo __("This will be first status for any new generated Report.");
                        break;
                      case 2:
                        echo __("Commission or Credits (As per settings) will be assigned to Referral.");
                        break;
                      case 3:
                        echo __("This will be last or closing status for any Report.");
                        break;
                      case 4:
                        echo __("This status is specifically for % commission to acquire the commission amount from agent.");
                        break;
                    }
                     ?>
                </p>
            </div>
            <?php endif; ?>
            <form id="migareferenceEmailForm"
                action="<?php echo $this->getUrl('migareference/application/savestatus') ?>"
                enctype="multipart/form-data">
                <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                <div class="form-horizontal">
                    <div class="infos">
                        <div id="migareference_migareference_push">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="status_title"><?php echo __('Status Title'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input value="" type="text" name="status_title" id="status-title"
                                        class="status_title required input-flat">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="status_title"><?php echo __('Status Icon'); ?> *</label>
                                </div>
                                <div class="col-sm-8" style="margin-left:-5px">
                                    <!--[if gte IE 10]><!-->
                                    <button id="migareference_status_icon_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                    </button>
                                    <!--<![endif]-->
                                    <p id="uploader_logo_ie_description" style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="migareference_status_icon_file" class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="migareference_status_icon_cover_img" width="100" height="100"
                                        style="<?php if(!count($migareference_push) || empty($migareference_push[0]['status_icon'])) {?> display:none; <?php } ?>"
                                        src="<?php if(count($migareference_push) && !empty($migareference_push[0]['status_icon'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$migareference_push[0]['status_icon']; } ?>"
                                        class="cimage" />
                                    <!-- <a href="javascript:;"
                                          style="<?php if(empty($migareference_push[0]['status_icon'])) {?> display:none; <?php } ?>"
                                          id="remove_migareference_status_icon_cover_img"
                                          class="btn color-blue rcimage">
                                           <i class="fa fa-times"></i>
                                       </a> -->
                                    <input type="hidden" id="c_migareference_status_icon_cover_file"
                                        name="c_migareference_status_icon_cover_file" value="" />
                                    <input type="hidden" id="migareference_status_icon_cover_file"
                                        name="status_icon_file" />
                                    <input type="hidden" id="remove_migareference_status_icon_cover"
                                        name="migareference_status_icon_remove_cover" value="0" />
                                </div>
                            </div>
                            <div class="alert alert-info">
                                <p style="padding-left:15px;">
                                    <?php echo __('You can use following custom tags in your Title and Text') ?>
                                    <?php echo __('@@referrer_link@@, @@rd_name@@, @@rd_email@@, @@rd_phone@@, @@rd_calendar_url@@, @@report_no@@, @@referral_name@@, @@report_owner@@, @@report_owner_phone@@, @@comment@@, @@commission@@, @@agent_name@@, @@app_link@@, @@app_name@@,@@custom_field_1@@,@@custom_field_2@@,@@custom_field_3@@,@@custom_field_4@@,@@custom_field_5@@,@@custom_field_6@@,@@custom_field_7@@,@@custom_field_8@@,@@custom_field_9@@,@@custom_field_10@@')?>
                                </p>
                            </div>
                            <div class="alert alert-warning" id="fisrt_status_warning"
                                style="display:<?=($standard_index==1) ? 'none' : 'block' ;  ?>">
                                <p style="padding-left:15px;">
                                    <?php echo __('You are not allowed to add @@agent_name@@ tag in Referral notification for Standard 1 or New Report Status.') ?>
                                </p>
                            </div>
                            <div class="alert alert-warning" id="mandate_acquired_warrning"
                                style="display:<?=($standard_index==2) ? 'none' : 'block' ;  ?>">
                                <p style="padding-left:15px;">
                                    <?php echo __('In the Percentage Commission operating method, this state requires that the app admin enter the commission amount') ?>
                                </p>
                            </div>
                            <input value="" type="hidden" name="migareference_notification_event_id"
                                id="migareference_notification_event_id"
                                class="migareference_notification_event_id required input-flat">
                            <input value="" type="hidden" name="migareference_email_template_id"
                                id="migareference_email_template_id"
                                class="migareference_email_template_id required input-flat">
                            <input value="" type="hidden" name="migareference_report_status_id"
                                id="migareference_report_status_id"
                                class="migareference_report_status_id required input-flat">
                            <input value="" type="hidden" name="migareference_push_template_id"
                                id="migareference_push_template_id"
                                class="migareference_push_template_id required input-flat">
                            <input value="" type="hidden" name="operation" id="status_setting_operation"
                                class="status_setting_operation required input-flat">
                            <!--status_type 1 for standard 2 for Normanl  -->
                            <input value="<?= (count($standard_status)<$standard_limit) ? 1 : 2 ; ?>" type="hidden"
                                name="status_type" id="status_type" class="status_type required input-flat">
                            <!-- if standard send the standard index -->
                            <input value="<?= (count($standard_status)<$standard_limit) ? $standard_index : 0 ; ?>"
                                type="hidden" name="standard_index" id="standard_index"
                                class="standard_index required input-flat">
                            <!-- Email settings START-->
                            <h4 class="sub-heading" id="para-new-group">
                                <?php echo __('Email Notification settings'); ?></h4>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification-to-user"><?php echo __('Send To'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="email-notification-to-user" class="input-flat"
                                        name="email_notification_to_user">
                                        <option value="1"><?php echo __('Both Referral/Agent') ?></option>
                                        <option value="2"><?php echo __('Only Referral') ?></option>
                                        <option value="3"><?php echo __('Only Agent') ?></option>
                                    </select>
                                </div>
                            </div>
                            <!-- Refferral emaiil Form Fields -->
                            <div id="ref_email_form_fields">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="ref_email_title"><?php echo __('Referral Subject'); ?> *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input value="" type="text" name="ref_email_title" id="ref-email-title"
                                            class="ref_email_title required input-flat"
                                            placeholder="<?php echo __('Subject'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_message"><?php echo __("Referral Body") ?>
                                            *</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <textarea rows="4" cols="50" type="text" id="ref-email-text" class="replace-with-ckeditor input-flat ref_email_text" name="ref_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!-- Agent Email form fiesd -->
                            <div id="agt_email_form_fields">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_title"><?php echo __('Agent Subject'); ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input id="agt-email-title" value="" type="text" name="agt_email_title"
                                            class="agt_email_title required input-flat"
                                            placeholder="<?php echo __('Subject'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_message"><?php echo __("Agent Body") ?> *</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <textarea rows="4" cols="50" type="text" id="agt-email-text" class="replace-with-ckeditor input-flat agt_email_text" name="agt_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="email-delay-days"><?php echo __('Delay Days'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="email-delay-days" class="input-flat" name="email_delay_days">
                                        <?php for ($i=0; $i < 31; $i++) { ?>
                                        <option value="<?php echo $i ?>"><?php echo $i ?></option>
                                        <?php } ?>
                                    </select>
                                </div>
                            </div>
                            <!-- Refferral emaiil Form Fields -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="email-delay-hours"><?php echo __('Delay Hours'); ?> </label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="email-delay-hours" class="input-flat" name="email_delay_hours">
                                        <?php for ($i=0; $i < 24; $i++) { ?>
                                        <option value="<?php echo $i ?>"><?php echo $i ?></option>
                                        <?php } ?>
                                    </select>
                                </div>
                            </div>
                            <!-- Refferral emaiil Form Fields -->
                            <!-- Email settings END -->
                        </div>
                    </div>
                </div>
                <div class="form-horizontal">
                    <h4 class="sub-heading" id="para-new-group"><?php echo __('PUSH Notification settings'); ?></h4>
                    <div id="migareference_migareference_push">
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="notification-to-user"><?php echo __('Send To'); ?> *</label>
                            </div>
                            <div class="col-sm-8">
                                <select id="push-notification-to-user" class="input-flat"
                                    name="push_notification_to_user">
                                    <option value="1"><?php echo __('Both Referral/Agent') ?></option>
                                    <option value="2"><?php echo __('Only Referral') ?></option>
                                    <option value="3"><?php echo __('Only Agent') ?></option>

                                </select>
                            </div>
                        </div>
                        <div class="" id="ref_push_form_fields">
                            <!-- For Referral -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="migareference_title"><?php echo __('Referral Title'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="ref-push-title" value="" type="text" name="ref_push_title"
                                        class="ref_push_title required input-flat"
                                        placeholder="<?php echo __('Referral PUSH Title'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="ref_push_text"><?php echo __("Referral Message") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea rows="4" cols="50" id="ref-push-text" class="ref_push_text input-flat" name="ref_push_text" placeholder="<?php echo __('Message'); ?>"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label
                                        for="migareference_is_feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                </div>
                                <div class="col-sm-2">
                                    <select id="ref-is-feature" name="ref_is_feature"
                                        class="no-dk styled-select color-blue migareference_is_feature">
                                        <option value="0"><?php echo __("No") ?></option>
                                        <option value="1"> <?php echo __("Yes") ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group ">
                                <div class="" style="padding-left:16px;">
                                    <div class="form-group" id="ref-feature-id-div">
                                        <div class="col-sm-4">
                                            <label
                                                for="migareference_feature_id"><?php echo __('Choose the features to open'); ?></label>
                                        </div>
                                        <div class="col-sm-4 div-all-features" style="margin-left:-5px">
                                            <select id="ref-feature-id" name="ref_feature_id"
                                                class="no-dk styled-select color-blue migareference_feature_id">
                                                <?php foreach($features as $feature) : ?>
                                                <?php if(!$feature->getIsVisible()) continue; ?>
                                                <option value="<?php echo $feature->getId(); ?>">
                                                    <?php echo $feature->getTabbarName() ?>
                                                </option>
                                                <?php endforeach ?>
                                                <option value="0">
                                                    <?php echo __('Custom URL?'); ?>
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group div-custom-url " id="div-custom-url-ref">
                                        <div class="col-sm-4">
                                            <label for="migareference_custom_url"><?php echo __('Custom URL'); ?>
                                                *</label>
                                        </div>
                                        <div class="col-sm-8" style="margin-left:-5px">
                                            <input id="migareference-custom-url-agt" name="migareference_custom_url_agt"
                                                value="" class="migareference_custom_url required input-flat"
                                                placeholder="<?php echo __('Custom URL'); ?>">
                                        </div>
                                    </div>
                                    <div class="form-group push_status_add_status">
                                        <div class="col-sm-4">
                                            <label for="migareference_status"><?php echo __("Status") ?></label>
                                        </div>
                                        <div class="col-sm-3" style="margin-left:-5px">
                                            <select name="migareference_status"
                                                class="no-dk styled-select color-blue migareference_status">
                                                <option value="1"><?php echo __("Enabled") ?></option>
                                                <option value="0"
                                                    <?php echo (count($migareference_push) && !intval($migareference_push[0]['status'])) ? 'selected' : ''; ?>>
                                                    <?php echo __("Disabled") ?></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <label for="migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                        </div>
                                        <div class="col-sm-8" style="margin-left:-5px">
                                            <!--[if gte IE 10]><!-->
                                            <button id="migareference_picture" type="button"
                                                class="upload_contact_picture btn color-blue image_left">
                                                <i class="icon-camera-retro"></i>
                                                <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                            </button>
                                            <!--<![endif]-->
                                            <p id="uploader_logo_ie_description" style="display:none">
                                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                            </p>
                                            <input id="migareference_file" class="uploader" style="display:none"
                                                type="file" name="files[]"
                                                data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                            <img id="migareference_cover_img" width="210" height="110"
                                                style="<?php if(!count($migareference_push) || empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                src="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$migareference_push[0]['cover_image']; } ?>"
                                                class="cimage" />
                                            <a href="javascript:;"
                                                style="<?php if(empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                id="remove_migareference_cover_img" class="btn color-blue rcimage">
                                                <i class="fa fa-times"></i>
                                            </a>
                                            <input type="hidden" id="c_migareference_cover_file"
                                                name="c_migareference_cover_file"
                                                value="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $migareference_push[0]['cover_image']; } ?>" />
                                            <input type="hidden" id="migareference_cover_file" name="file" />
                                            <input type="hidden" id="remove_migareference_cover"
                                                name="migareference_remove_cover" value="0" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="agt_push_form_fields">
                            <!-- For agent -->
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="migareference_title"><?php echo __('Agent Title'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="agt-push-title" value="" type="text" name="agt_push_title"
                                        class="agt_push_title required input-flat"
                                        placeholder="<?php echo __('Agent PUSH Title'); ?>">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="agt_push_text"><?php echo __("Agent Message") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea rows="4" cols="50" id="agt-push-text" class="agt_push_text input-flat" name="agt_push_text" placeholder="<?php echo __('Message for Agent'); ?>"></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label
                                        for="migareference_is_feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                </div>
                                <div class="col-sm-2">
                                    <select id="agt-is-feature" name="agt_is_feature"
                                        class="no-dk styled-select color-blue migareference_is_feature">
                                        <option value="0"><?php echo __("No") ?></option>
                                        <option value="1"><?php echo __("Yes") ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group all-features ">
                                <div class="" style="padding-left:16px;">
                                    <div class="form-group" id="agt-feature-id-div">
                                        <div class="col-sm-4">
                                            <label
                                                for="migareference_feature_id"><?php echo __('Choose the features to open'); ?></label>
                                        </div>
                                        <div class="col-sm-4 div-all-features" style="margin-left:-5px">
                                            <select id="agt-feature-id" name="agt_feature_id"
                                                class="no-dk styled-select color-blue migareference_feature_id">
                                                <?php foreach($features as $feature) : ?>
                                                <?php if(!$feature->getIsVisible()) continue; ?>
                                                <option value="<?php echo $feature->getId(); ?>">
                                                    <?php echo $feature->getTabbarName() ?>
                                                </option>
                                                <?php endforeach ?>
                                                <option value="0">
                                                    <?php echo __('Custom URL?'); ?>
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group div-custom-url " id="div-custom-url-agt">
                                        <div class="col-sm-4">
                                            <label for="migareference_custom_url"><?php echo __('Custom URL'); ?>
                                                *</label>
                                        </div>
                                        <div class="col-sm-8" style="margin-left:-5px">
                                            <input value="" type="text" id="migareference-custom-url"
                                                name="agt_custom_url"
                                                class="migareference_custom_url required input-flat"
                                                placeholder="<?php echo __('Custom URL'); ?>">
                                        </div>
                                    </div>
                                    <div class="form-group push_status_add_status">
                                        <div class="col-sm-4">
                                            <label for="migareference_status"><?php echo __("Status") ?></label>
                                        </div>
                                        <div class="col-sm-3" style="margin-left:-5px">
                                            <select name="migareference_status"
                                                class="no-dk styled-select color-blue migareference_status">
                                                <option value="1"><?php echo __("Enabled") ?></option>
                                                <option value="0"><?php echo __("Disabled") ?></option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="col-sm-4">
                                            <label for="migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                        </div>
                                        <div class="col-sm-8" style="margin-left:-5px">
                                            <!--[if gte IE 10]><!-->
                                            <button id="migareference_picture_agt" type="button"
                                                class="upload_contact_picture btn color-blue image_left">
                                                <i class="icon-camera-retro"></i>
                                                <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                            </button>
                                            <!--<![endif]-->
                                            <p id="uploader_logo_ie_description_agt" style="display:none">
                                                <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                            </p>
                                            <input id="migareference_file_agt" class="uploader" style="display:none"
                                                type="file" name="files_agt[]"
                                                data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                            <img id="migareference_cover_img_agt" width="210" height="110"
                                                style="<?php if(!count($migareference_push) || empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                src="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$migareference_push[0]['cover_image']; } ?>"
                                                class="cimage" />
                                            <a href="javascript:;"
                                                style="<?php if(empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                id="remove_migareference_cover_img_agt" class="btn color-blue rcimage">
                                                <i class="fa fa-times"></i>
                                            </a>
                                            <input type="hidden" id="c_migareference_cover_file_agt"
                                                name="c_migareference_cover_file_agt"
                                                value="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $migareference_push[0]['cover_image']; } ?>" />
                                            <input type="hidden" id="migareference_cover_file_agt" name="file_agt" />
                                            <input type="hidden" id="remove_migareference_cover_agt"
                                                name="migareference_remove_cover_agt" value="0" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="push-delay-days"><?php echo __('Delay Days'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <select id="push-delay-days" class="input-flat" name="push_delay_days">
                                    <?php for ($i=0; $i < 31; $i++) { ?>
                                    <option value="<?php echo $i ?>"><?php echo $i ?></option>
                                    <?php } ?>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Delay Hours'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <select id="push-delay-hours" class="input-flat" name="push_delay_hours">
                                    <?php for ($i=0; $i < 24; $i++) { ?>
                                    <option value="<?php echo $i ?>"><?php echo $i ?></option>
                                    <?php } ?>
                                </select>
                            </div>
                        </div>
                        <!-- SMS settings START-->
                        <?php  if ($pre_report_settings[0]['enable_twillio_notification']==1) { ?>
                        <div id="ref_sms_form_fields_container">
                            <h4 class="sub-heading" id="para-new-group"> <?php echo __('SMS Notification settings'); ?></h4>
                            <div class="form-group" style="display:none;">
                                <div class="col-sm-4">
                                    <label for="notification-to-user"><?php echo __('Send To'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="sms-notification-to-user" class="input-flat"
                                        name="sms_notification_to_user">
                                        <option value="1"><?php echo __('Both Referral/Agent') ?></option>
                                        <option selected value="2"><?php echo __('Only Referral') ?></option>
                                        <option value="3"><?php echo __('Only Agent') ?></option>
                                    </select>
                                </div>
                            </div>
                             <!-- Refferral SMS Form Fields -->
                        <div id="ref_sms_form_fields">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="migareference_message"><?php echo __("Referral SMS") ?>*</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea maxlength="160" rows="4" cols="50" type="text" id="ref-sms-text" class="input-flat ref_sms_text" name="ref_sms_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                </div>
                            </div>
                        </div>
                        <!-- Agent SMS form fiesd -->
                        <div id="agt_sms_form_fields" style="display:none">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="migareference_message"><?php echo __("Agent SMS") ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea maxlength="160" rows="4" cols="50" type="text" id="agt-sms-text" class=" input-flat agt_sms_text" name="agt_sms_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                </div>
                            </div>
                        </div>
                        </div>
                         <?php } ?>
                        <div class="form-group" id="is_comment_container">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Comment Required'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <input id="is_comment" class="sb-form-checkbox color-blue height15" type="checkbox" name="is_comment" value="1">
                            </div>
                        </div>
                        <div class="form-group" id="is_acquired_container">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Mandate Acquired'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <input id="is_acquired" class="sb-form-checkbox color-blue height15" type="checkbox"
                                    name="is_acquired" value="1">
                            </div>
                        </div>
                        <div class="form-group" id="is_declined_container">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Fall Back Automation'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <input id="is_auto_declined" class="sb-form-checkbox color-blue height15"
                                    type="checkbox" name="is_auto_declined" value="1">
                            </div>
                        </div>
                        <div class="form-group" id="is_declined_container">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Pause Sending'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <input id="is_pause_sending" class="sb-form-checkbox color-blue height15"
                                    type="checkbox" name="is_pause_sending" value="1">
                            </div>
                        </div>
                        <div id="declined-grace-container" style="display:none">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="declined_grace"><?php echo __('Fallback Period'); ?>
                                        <span>*</span></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="number" name="declined_grace" id="declined_grace" value=""
                                        class="input-flat" placeholder="<?php echo __('30'); ?>" />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="declined_grace"><?php echo __('Fallback Status'); ?>
                                        <span>*</span></label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="declined_to_status" class="input-flat" name="declined_to_status">
                                        <option value="0"><?=__("Select Status") ?></option>
                                        <?php foreach ($property_status as $key => $value): ?>
                                        <option value="<?=$value['migareference_report_status_id']; ?>">
                                            <?=$value['status_title'] ?></option>
                                        <?php endforeach; ?>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="reminder_ref_push_text"><?php echo __("Fallback Comment") ?>
                                        *</label>
                                </div>
                                <div class="col-sm-8">
                                    <textarea rows="4" cols="50" id="auto-fallabck-comment" class="input-flat" name="auto_fallabck_comment" placeholder="<?php echo __('Message'); ?>"></textarea>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="is_auto_reminer" style="display:none">
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Auto Reminder'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <input id="is_auto_reminder" class="sb-form-checkbox color-blue height15"
                                    type="checkbox" name="is_auto_reminder" value="1">
                            </div>
                        </div>
                        <!-- START Reminder Fields -->
                        <div class="" id="reminer-notification-container" style="display:none">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="reminder_grace"><?php echo __('Reminder Grace Days'); ?>
                                        <span>*</span></label>
                                </div>
                                <div class="col-sm-8">
                                    <input type="number" name="reminder_grace" id="reminder_grace" value=""
                                        class="input-flat" placeholder="<?php echo __('7'); ?>" />
                                </div>
                            </div>
                            <!--Reminder Email settings -->
                            <h4 class="sub-heading" id="para-new-group">
                                <?php echo __('Reminder Email Notification settings'); ?></h4>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification-to-user"><?php echo __('Send To'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="reminder-email-notification-to-user" class="input-flat"
                                        name="reminder_email_notification_to_user">
                                        <option value="1"><?php echo __('Both Referral/Agent') ?></option>
                                        <option value="2"><?php echo __('Only Referral') ?></option>
                                        <option value="3"><?php echo __('Only Agent') ?></option>
                                    </select>
                                </div>
                            </div>
                            <!-- Refferral emaiil Form Fields -->
                            <div id="reminder_ref_email_form_fields">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="reminder_ref_email_title"><?php echo __('Referral Subject'); ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input value="" type="text" name="reminder_ref_email_title"
                                            id="reminder-ref-email-title" class="ref_email_title required input-flat"
                                            placeholder="<?php echo __('Subject'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_message"><?php echo __("Referral Body") ?>
                                            *</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <textarea rows="4" cols="50" type="text" id="reminder-ref-email-text" class="replace-with-ckeditor input-flat ref_email_text" name="reminder_ref_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!-- Agent Email form fiesd -->
                            <div id="reminder_agt_email_form_fields">
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_title"><?php echo __('Agent Subject'); ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input id="reminder-agt-email-title" value="" type="text"
                                            name="reminder_agt_email_title" class="agt_email_title required input-flat"
                                            placeholder="<?php echo __('Subject'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="migareference_message"><?php echo __("Agent Body") ?> *</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <textarea rows="4" cols="50" type="text" id="reminder-agt-email-text" class="replace-with-ckeditor input-flat agt_email_text" name="reminder_agt_email_text" placeholder="<?php echo __('Message') ?>"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!-- Reminder PUSH settings -->
                            <h4 class="sub-heading" id="para-new-group">
                                <?php echo __('Reminder PUSH Notification settings'); ?></h4>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="notification-to-user"><?php echo __('Send To'); ?> *</label>
                                </div>
                                <div class="col-sm-8">
                                    <select id="reminder-push-notification-to-user" class="input-flat"
                                        name="reminder_push_notification_to_user">
                                        <option value="1"><?php echo __('Both Referral/Agent') ?></option>
                                        <option value="2"><?php echo __('Only Referral') ?></option>
                                        <option value="3"><?php echo __('Only Agent') ?></option>
                                    </select>
                                </div>
                            </div>
                            <div class="" id="reminder_ref_push_form_fields">
                                <!-- For Referral -->
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="reminder_migareference_title"><?php echo __('Referral Title'); ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input id="reminder-ref-push-title" value="" type="text"
                                            name="reminder_ref_push_title"
                                            class="reminder_ref_push_title required input-flat"
                                            placeholder="<?php echo __('Referral PUSH Title'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="reminder_ref_push_text"><?php echo __("Referral Message") ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <textarea rows="4" cols="50" id="reminder-ref-push-text" class="reminder_ref_push_text input-flat" name="reminder_ref_push_text" placeholder="<?php echo __('Message'); ?>"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label
                                            for="migareference_is_feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                    </div>
                                    <div class="col-sm-2">
                                        <select id="reminder-ref-is-feature" name="reminder_ref_is_feature"
                                            class="no-dk styled-select color-blue migareference_is_feature">
                                            <option value="0"><?php echo __("No") ?></option>
                                            <option value="1"> <?php echo __("Yes") ?></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group ">
                                    <div class="" style="padding-left:16px;">
                                        <div class="form-group" id="reminder-ref-feature-id-div" style="display:none">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_feature_id"><?php echo __('Choose the features to open'); ?></label>
                                            </div>
                                            <div class="col-sm-4 div-all-features" style="margin-left:-5px">
                                                <select id="reminder-ref-feature-id" name="reminder_ref_feature_id"
                                                    class="no-dk styled-select color-blue reminder_migareference_feature_id">
                                                    <?php foreach($features as $feature) : ?>
                                                    <?php if(!$feature->getIsVisible()) continue; ?>
                                                    <option value="<?php echo $feature->getId(); ?>">
                                                        <?php echo $feature->getTabbarName() ?>
                                                    </option>
                                                    <?php endforeach ?>
                                                    <option value="0">
                                                        <?php echo __('Custom URL?'); ?>
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group div-custom-url " id="reminder-div-custom-url-ref"
                                            style="display:none">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_custom_url"><?php echo __('Custom URL'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8" style="margin-left:-5px">
                                                <input id="reminder-migareference-custom-url-agt"
                                                    name="reminder_migareference_custom_url_agt" value=""
                                                    class="migareference_custom_url required input-flat"
                                                    placeholder="<?php echo __('Custom URL'); ?>">
                                            </div>
                                        </div>
                                        <div class="form-group push_status_add_status">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_status"><?php echo __("Status") ?></label>
                                            </div>
                                            <div class="col-sm-3" style="margin-left:-5px">
                                                <select name="reminder_migareference_status"
                                                    class="no-dk styled-select color-blue migareference_status">
                                                    <option value="1"><?php echo __("Enabled") ?></option>
                                                    <option value="0"
                                                        <?php echo (count($migareference_push) && !intval($migareference_push[0]['status'])) ? 'selected' : ''; ?>>
                                                        <?php echo __("Disabled") ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                            </div>
                                            <div class="col-sm-8" style="margin-left:-5px">
                                                <!--[if gte IE 10]><!-->
                                                <button id="reminder_migareference_picture" type="button"
                                                    class="upload_contact_picture btn color-blue image_left">
                                                    <i class="icon-camera-retro"></i>
                                                    <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                                </button>
                                                <!--<![endif]-->
                                                <p id="reminder_uploader_logo_ie_description" style="display:none">
                                                    <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                </p>
                                                <input id="reminder_migareference_file" class="uploader"
                                                    style="display:none" type="file" name="files[]"
                                                    data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                <img id="reminder_migareference_cover_img" width="210" height="110"
                                                    style="<?php if(!count($migareference_push) || empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                    src="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$migareference_push[0]['cover_image']; } ?>"
                                                    class="cimage" />
                                                <a href="javascript:;"
                                                    style="<?php if(empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                    id="reminder_remove_migareference_cover_img"
                                                    class="btn color-blue rcimage">
                                                    <i class="fa fa-times"></i>
                                                </a>
                                                <input type="hidden" id="reminder_c_migareference_cover_file"
                                                    name="reminder_c_migareference_cover_file"
                                                    value="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $migareference_push[0]['cover_image']; } ?>" />
                                                <input type="hidden" id="reminder_migareference_cover_file"
                                                    name="reminder_file" />
                                                <input type="hidden" id="reminder_remove_migareference_cover"
                                                    name="reminder_migareference_remove_cover" value="0" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div id="reminder_agt_push_form_fields">
                                <!-- For Reminder agent -->
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="reminder_migareference_title"><?php echo __('Agent Title'); ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <input id="reminder-agt-push-title" value="" type="text"
                                            name="reminder_agt_push_title" class="agt_push_title required input-flat"
                                            placeholder="<?php echo __('Agent PUSH Title'); ?>">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label for="reminder_agt_push_text"><?php echo __("Agent Message") ?>
                                            *</label>
                                    </div>
                                    <div class="col-sm-8">
                                        <textarea rows="4" cols="50" id="reminder-agt-push-text" class="reminder_agt_push_text input-flat" name="reminder_agt_push_text" placeholder="<?php echo __('Message for Agent'); ?>"></textarea>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label
                                            for="reminder_migareference_is_feature"><?php echo __("Open a feature or a custom URL") ?></label>
                                    </div>
                                    <div class="col-sm-2">
                                        <select id="reminder-agt-is-feature" name="reminder_agt_is_feature"
                                            class="no-dk styled-select color-blue reminder migareference_is_feature">
                                            <option value="0"><?php echo __("No") ?></option>
                                            <option value="1"><?php echo __("Yes") ?></option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group all-features ">
                                    <div class="" style="padding-left:16px;">
                                        <div class="form-group" id="reminder-agt-feature-id-div" style="display:none;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_feature_id"><?php echo __('Choose the features to open'); ?></label>
                                            </div>
                                            <div class="col-sm-4 div-all-features" style="margin-left:-5px">
                                                <select id="reminder-agt-feature-id" name="reminder_agt_feature_id"
                                                    class="no-dk styled-select color-blue reminder_migareference_feature_id">
                                                    <?php foreach($features as $feature) : ?>
                                                    <?php if(!$feature->getIsVisible()) continue; ?>
                                                    <option value="<?php echo $feature->getId(); ?>">
                                                        <?php echo $feature->getTabbarName() ?>
                                                    </option>
                                                    <?php endforeach ?>
                                                    <option value="0">
                                                        <?php echo __('Custom URL?'); ?>
                                                    </option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group reminder-div-custom-url "
                                            id="reminder-div-custom-url-agt" style="display:none">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_custom_url"><?php echo __('Custom URL'); ?>
                                                    *</label>
                                            </div>
                                            <div class="col-sm-8" style="margin-left:-5px">
                                                <input value="" type="text" id="reminder-migareference-custom-url"
                                                    name="reminder_agt_custom_url"
                                                    class="reminder_migareference_custom_url required input-flat"
                                                    placeholder="<?php echo __('Custom URL'); ?>">
                                            </div>
                                        </div>
                                        <div class="form-group reminder_push_status_add_status" style="display:none;">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_status"><?php echo __("Status") ?></label>
                                            </div>
                                            <div class="col-sm-3" style="margin-left:-5px">
                                                <select name="reminder_migareference_status"
                                                    class="no-dk styled-select color-blue reminder_migareference_status">
                                                    <option value="1"><?php echo __("Enabled") ?></option>
                                                    <option value="0"><?php echo __("Disabled") ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-4">
                                                <label
                                                    for="reminder_migareference_cover"><?php echo __('Upload a cover'); ?></label>
                                            </div>
                                            <div class="col-sm-8" style="margin-left:-5px">
                                                <!--[if gte IE 10]><!-->
                                                <button id="reminder_migareference_picture_agt" type="button"
                                                    class="upload_contact_picture btn color-blue image_left">
                                                    <i class="icon-camera-retro"></i>
                                                    <?php echo __('Insert a <span class="bold">cover image</span>'); ?>
                                                </button>
                                                <!--<![endif]-->
                                                <p id="reminder_uploader_logo_ie_description_agt" style="display:none">
                                                    <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                                </p>
                                                <input id="reminder_migareference_file_agt" class="uploader"
                                                    style="display:none" type="file" name="files_agt[]"
                                                    data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                                <img id="reminder_migareference_cover_img_agt" width="210" height="110"
                                                    style="<?php if(!count($migareference_push) || empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                    src="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $this->getUrl("images/application")."/".$this->getApplication()->getId()."/features/migareference/".$migareference_push[0]['cover_image']; } ?>"
                                                    class="cimage" />
                                                <a href="javascript:;"
                                                    style="<?php if(empty($migareference_push[0]['cover_image'])) {?> display:none; <?php } ?>"
                                                    id="reminder_remove_migareference_cover_img_agt"
                                                    class="btn color-blue rcimage">
                                                    <i class="fa fa-times"></i>
                                                </a>
                                                <input type="hidden" id="reminder_c_migareference_cover_file_agt"
                                                    name="reminder_c_migareference_cover_file_agt"
                                                    value="<?php if(count($migareference_push) && !empty($migareference_push[0]['cover_image'])) { echo $migareference_push[0]['cover_image']; } ?>" />
                                                <input type="hidden" id="reminder_migareference_cover_file_agt"
                                                    name="reminder_file_agt" />
                                                <input type="hidden" id="reminder_remove_migareference_cover_agt"
                                                    name="reminder_migareference_remove_cover_agt" value="0" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END Reminder Fields -->
                        <div class="form-group" id="is_import_container">
                            <div class="alert alert-info">
                                <?=__("The Order of Status should be higher than the status from where you import.") ?>
                            </div>
                            <div class="col-sm-4">
                                <label for="push-delay-hours"><?php echo __('Import Reports from'); ?> </label>
                            </div>
                            <div class="col-sm-8">
                                <select id="import_status" class="input-flat" name="import_status">
                                    <option value="0"><?=__("Select Status") ?></option>
                                    <?php foreach ($property_status as $key => $value): ?>
                                    <option value="<?=$value['migareference_report_status_id']; ?>">
                                        <?=$value['status_title'] ?></option>
                                    <?php endforeach; ?>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="save pull-right">
                    <button class="button btn bt_save btn color-blue" type="submit">
                        <?php echo __('Save'); ?>
                    </button>
                </div>
            </form>
            <?php endif; ?>
        </div>
        <!--END  STATUS TEMPLATE and thier Notifications settings -->
        <!-- Status Record Table -->
        <div class="status-display container-fluid content-feature pt30">
            <button style="float:right;" id="delbtn" class="btn color-blue"
                onclick="addStatus(<?=$need_standard.','.$standard.','.$pre_report_settings[0]['commission_type'] ?>)">
                <i class="fa fa-plus fa-lg"> </i>
            </button>
            <button style="float:right;margin-right:10px;" id="delbtn" class="btn color-blue" onclick="exportStatus()">
                <i class="fa fa-download "> </i>
            </button>
            <button class="btn color-blue"
                onclick="resetDefaultStatus(<?=$app_id ?>)"><?php echo __("RESET AS DEFAULT") ?></button>
            <h4><?php echo __("Status settings") ?></h4>
            <ul class="status_order_list" id="containlist"
                style="list-style-type:none;background-color:white;padding-left:0;">
                <div class="border-grey row" style="padding:6px;">
                    <div class="col-md-2"> <strong><?php echo __('Status ID'); ?></strong></div>
                    <div class="col-md-3"> <strong><?php echo __('Status Title'); ?></strong></div>
                    <div class="col-md-3"> <strong><?php echo __('Type'); ?></strong></div>
                    <div class="col-md-1"> <strong><?php echo __('Reports'); ?></strong></div>
                    <div class="col-md-1"> <strong><?php echo __('Edit'); ?></strong></div>
                    <div class="col-md-1"> <strong><?php echo __('Delete'); ?></strong></div>
                    <div class="col-md-1"> <strong><?php echo __('Order'); ?></strong></div>
                </div>
                <?php foreach ($property_status as $key => $value): ?>
                <li class="eliminatelink" id="<?=$value['migareference_report_status_id'] ?>">
                    <div class="row" style="padding:5px;">
                        <div class="col-md-1">
                            <?=$value['migareference_report_status_id'] ?>
                        </div>
                        <div class="col-md-4">
                            <?php echo $value['status_title'] ?>
                        </div>
                        <div class="col-md-3">
                            <?=($value['is_standard']) ? __('MANDATORY') : __('OPTIONAL') ; ?>
                        </div>
                        <div class="col-md-1">
                            <?php echo $value['joined_repoort'] ?>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-info" type="button" name="button"
                                onclick="importnotificationformdata(<?=$value['migareference_report_status_id'].','.$value['is_standard'].','.$value['standard_type'] ?>)">
                                <i class="fa fa-pencil" rel=""></i>
                            </button>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-danger" type="button" name="button"
                                <?=($value['is_standard']) ? 'disabled' : '' ; ?>
                                onclick="deleteStatus(<?=$value['migareference_report_status_id'].','.$value['is_standard'],','.$value['standard_type'].','.$value['joined_repoort'] ?>)">
                                <i class="fa fa-remove"></i>
                            </button>
                        </div>
                        <div class="col-md-1">
                            <i class="folder-sortable-handle fa fa-arrows"></i>
                            </button>
                        </div>
                    </div>
                </li>
                <?php endforeach; ?>
            </ul>
        </div>
        <!-- Push Record Table -->
        <div class="status-display container-fluid content-feature pt30">
            <h4><?php echo __("PUSH Notifications Log") ?></h4>
            <table id="table_push_log" class="table content-white-bkg">
                <thead>
                    <tr class="border-grey">
                        <th><?php echo __('Message Id'); ?></th>
                        <th><?php echo __('Push Title'); ?></th>
                        <th><?php echo __('Push Message'); ?></th>
                        <th><?php echo __('Target User'); ?></th>
                        <th><?php echo __('Status'); ?></th>
                        <th><?php echo __('Created At'); ?></th>
                    </tr>
                </thead>
            </table>
        </div>
        <!-- Email Record Table -->
        <div class="status-display container-fluid content-feature pt30">
            <h4><?php echo __("EMAIL Notifications Log") ?></h4>
            <table id="table_email_log" class="table content-white-bkg">
                <thead>
                    <tr class="border-grey">
                        <th><?php echo __('Message Id'); ?></th>
                        <th><?php echo __('Email Title'); ?></th>
                        <th><?php echo __('Email Message'); ?></th>
                        <th><?php echo __('Target User'); ?></th>
                        <th><?php echo __('Status'); ?></th>
                        <th><?php echo __('Created At'); ?></th>
                    </tr>
                </thead>
            </table>
        </div>
    </div>
    <!--END:  Tab Status and Notifications -->
    <div role="tabpanel" class="tab-pane" id="tab_creditledger">
        <h3 class="title-editor no-border-radius title-feature-indent">
            <?php echo __('Credits Ledger Statement'); ?>
        </h3>
        <div class="container-fluid content-feature pt30">
            <div class="row">
                <div class="col-sm-6">
                    <label for=""><?php echo __("Select Referrer") ?></label for="">
                </div>
                <div class="col-sm-6">
                    <select id="credits_referrer_filter" class="input-flat" name="credits_referrer_filter">
                        <?php foreach ($referral_usrs as $key => $value): ?>
                        <option value="<?=$value['user_id'] ?>">
                            <?=$value['invoice_surname']." ".$value['invoice_name'] ?>
                        </option>
                        <?php endforeach; ?>
                    </select>
                </div>
            </div>
            <div style="overflow-x:auto;">
                <table id="credit_ledger" class="table display responsive nowrap content-white-bkg" style="width:100%">
                    <thead>
                        <tr class="border-grey">
                            <th><?php echo __('Date'); ?></th>
                            <th><?php echo __('User'); ?></th>
                            <th><?php echo __('Description'); ?></th>
                            <th><?php echo __('Credits'); ?></th>
                            <th><?php echo __('Balance'); ?></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Migareference Prizes settings -->
    <div role="tabpanel" class="tab-pane" id="tab_prizes">
        <div class="" id="addPrizeContainer" style="display:none">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Add New Prize'); ?>
                <button onclick="showPrizelist()" class="btn btn-info" type="button" name="button"
                    style="float:right;margin-top:-5px;">
                    <?php echo __("Back") ?>
                </button>
            </h3>
            <div class="container-fluid content-feature pt30">
                <form id="prizeform" action="<?php echo $this->getUrl('migareference/application/saveprize') ?>"
                    method="post">
                    <div class="form-horizontal">

                        <input type="hidden" name="app_id" value="<?=$app_id ?>">
                        <input id="prize-operation" type="hidden" name="operation" value="create">
                        <input id="migarefrence-prizes-id" type="hidden" name="migarefrence_prizes_id" value="">
                        <div class="form-group">
                            <div class="col-sm-3 ">
                                <label for="prize_name"><?php echo __('Prize Name'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-9 ">
                                <input id="prize-name" type="text" name="prize_name" value="" class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 ">
                                <label for="credits_number"><?php echo __('Prize Credits'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-9 ">
                                <input id="credits-number" type="number" name="credits_number" value=""
                                    class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 ">
                                <label for="prize_start_date"><?php echo __('Applied At'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-9 ">
                                <input id="prize-start-date" type="date" name="prize_start_date" value=""
                                    class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 ">
                                <label for="prize_expire_date"><?php echo __('Expire At'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-9 ">
                                <input id="prize-expire-date" type="date" name="prize_expire_date" value=""
                                    class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Redeemed once'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <select id="redeemed-once" class="input-flat" name="redeemed_once">
                                    <option value="1"><?php echo __('Yes') ?></option>
                                    <option value="2"><?php echo __('No') ?></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3 ">
                                <label for="prize_expire_date"><?php echo __('Prize Image'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-9 " style="text-align:center;">
                                <button style="width:100%" id="migarefrence_prizes_icon_picture" type="button"
                                    class="upload_contact_picture btn color-blue image_left">
                                    <i class="icon-camera-retro"></i>
                                    <?php echo __("Upload") ?>
                                </button>
                                <p id="uploader_logo_ie_description" style="display:none">
                                    <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span></p>
                                <input id="migarefrence_prizes_icon_file" class="uploader" style="display:none"
                                    type="file" name="files[]"
                                    data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                <img id="migarefrence_prizes_icon_cover_img" width="200" height="150"
                                    style="display:none" src="" class="cimage" />
                                <a href="javascript:;" style="display:none"
                                    id="remove_migarefrence_prizes_icon_cover_img" class="btn color-blue rcimage">
                                    <i class="fa fa-times"></i>
                                </a>
                                <input type="hidden" id="migarefrence_prizes_icon_cover_file" name="prize_icon" />
                            </div>
                        </div>
                        <!-- Link 1 -->
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Enable Link 1'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <select id="prize-link1-enable" class="input-flat" name="prize_link1_enable">
                                    <option value="1"><?php echo __('Yes') ?></option>
                                    <option selected value="0"><?php echo __('No') ?></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Link 1 URL'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <input id="prize-link1" type="text" name="prize_link1" value="" class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Link 1 Button text'); ?> *
                                    <?php echo __("(Max 9 Characters including space)") ?></label>
                            </div>
                            <div class="col-sm-9">
                                <input maxlength="9" id="prize-link1-btn-text" type="text" name="prize_link1_btn_text"
                                    value="" class="pin input-flat">
                            </div>
                        </div>
                        <!-- Link 2 -->
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Enable Link 2'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <select id="prize-link2-enable" class="input-flat" name="prize_link2_enable">
                                    <option value="1"><?php echo __('Yes') ?></option>
                                    <option selected value="0"><?php echo __('No') ?></option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Link 2 URL'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <input id="prize-link2" type="text" name="prize_link2" value="" class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Link 2 Button text'); ?> *
                                    <?php echo __("(Max 9 Characters including space)") ?></label>
                            </div>
                            <div class="col-sm-9">
                                <input maxlength="9" id="prize-link2-btn-text" type="text" name="prize_link2_btn_text"
                                    value="" class="pin input-flat">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-12">
                                <label for="how_to_text"><?php echo __('Prize Description'); ?><sup>*</sup></label>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-12">
                                <textarea rows="4" cols="50" id="prize-description" class="pin input-flat replace-with-ckeditor" name="prize_description" rows="10" cols="80"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="save pull-right" style="padding-right:15px;">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="" id="prizeListContainer">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Prize List'); ?>
                <button onclick="addPrize()" class="btn btn-info" type="button" name="button"
                    style="float:right;margin-top:-5px;">
                    <i class="fa fa-plus fa-lg"> </i>
                </button>
            </h3>
            <div class="container-fluid content-feature pt30">
                <div style="overflow-x:auto;">
                    <table id="table_prize_list" class="table content-white-bkg">
                        <thead>
                            <tr class="border-grey">
                                <th><?php echo __('Prize Name'); ?></th>
                                <th><?php echo __('Applied Date'); ?></th>
                                <th><?php echo __('Expire Date'); ?></th>
                                <th><?php echo __('Credits'); ?></th>
                                <th><?php echo __('Disable ?'); ?></th>
                                <th><?php echo __('Action'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Migareference Manage Prizes settings -->
    <div role="tabpanel" class="tab-pane" id="tab_manageprizes">
        <div class="" id="prizeListContainer">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Manage Prize'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <div style="overflow-x:auto;">
                    <table id="table_manageprize_list" class="table content-white-bkg">
                        <thead>
                            <tr class="border-grey">
                                <th><?php echo __('ID'); ?></th>
                                <th><?php echo __('Date'); ?></th>
                                <th><?php echo __('Name'); ?></th>
                                <th><?php echo __('Surname'); ?></th>
                                <th><?php echo __('Email'); ?></th>
                                <th><?php echo __('Prize Name'); ?></th>
                                <th><?php echo __('Status'); ?></th>
                                <th><?php echo __('Action'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="tab_prizesnotification">
        <div class="" id="prizeListContainer">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Prizes Notifaction'); ?>
            </h3>
            <button style="display:none;float:right;margin-top: -33px;" id='back-to-prize-notification-list' onclick="backToPrizeNotificationList()" class="btn btn-info" type="button" name="button"> <?php echo __("Back") ?></button>
            <div id="prizes-notifications">
            </div>
        </div>
    </div>
    <div role="tabpanel" class="tab-pane" id="tab_gdpr">
        <div class="">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Users List'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <div class="alert alert-danger">
                    <p style="padding-left:15px;">
                        <?php echo __('Welcome to GDPR oblivion feature. If you select one of the user from the list and click ACTION, the system will delete all the data related to this user.') ?>
                    </p>
                </div>
                <form id="gdpraction" action="<?php echo $this->getUrl('migareference/application/gdprsave') ?>"
                    method="post">
                    <input type="hidden" name="app_id" value="<?=$app_id ?>">
                    <a style="width:140px;" id="downloade_gdpr_users_file" class="btn color-blue form-control"
                        href="<?php echo $base_url.'/app/local/modules/Migareference/resources/propertyaddresses/gdprusers_'.$app_id.'.csv' ?>"><i class="fa fa-download "> </i><?php echo __('CSV') ?></a>
                    <button disabled id="gdpr-save" class="button btn-gdpr-apply btn bt_save btn color-blue"
                        type="submit"><?php echo __("Apply") ?></button>
                    <div style="overflow-x:auto;">
                        <table id="table_gdprusers" class="table display responsive nowrap content-white-bkg"
                            style="width:100%">
                            <thead>
                                <tr class="border-grey">
                                    <th><?php echo __('User Id'); ?></th>
                                    <th><?php echo __('Name'); ?></th>
                                    <th><?php echo __('Surname'); ?></th>
                                    <th><?php echo __('Email'); ?></th>
                                    <th><?php echo __('Mobile'); ?></th>
                                    <th><?php echo __('Type'); ?></th>
                                    <th><?php echo __('Action'); ?></th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </form>
                <!-- GDPR Popup Form settings  -->
                <form id="gdprpopupsettings" method="post"
                    action="<?php echo $this->getUrl('migareference/application/upategdprsettings') ?>">
                    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <input type="hidden" name="operation" value="<?=(count($gdpr_settings) ) ? "update" : "create" ; ?>" />
                    <input type="hidden" name="migarefrence_gdpr_settings_id"
                    value="<?=(count($gdpr_settings) ) ? $gdpr_settings[0]['migarefrence_gdpr_settings_id'] : 0 ; ?>" />
                    <h2 class="fs-title"><?php echo __('GDPR Popup settings') ?></h2>
                    <div class="row form-group">
                            <div class="col-sm-3">
                                <label for="read_only"><?php echo __('Select Popup'); ?> *</label>
                            </div>
                            <div class="col-sm-9">
                                <select id="enable_consent_collection" class="input-flat">
                                    <option value="1" >
                                        <?php echo __('REPORT GDPR Popup') ?>
                                    </option>
                                    <option value="2">
                                        <?php echo __('Invite Prospectus Popup') ?>
                                    </option>
                                </select>
                            </div>
                    </div>
                    <!-- GDPR Popup -->
                    <div calss="gdpr_popups">
                        <div id="gdpr_report_popup">
                            <div class="row form-group">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Is this popup active'); ?> ?</label>
                                </div>
                                <div class="col-sm-9">
                                    <div class="col-sm-1">
                                        <?php  echo __("Yes"); ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input onClick="isReportGdprPopup(1)" value='1' <?=(count($gdpr_settings) && $gdpr_settings[0]['consent_info_active']==1) ? "checked" : "" ; ?> class="inpirt-falt radio" name="consent_info_active" type="radio">
                                    </div>
                                    <div class="col-sm-1">
                                        <?php  echo __("No"); ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input onClick="isReportGdprPopup(2)" value='2' <?=(count($gdpr_settings) && $gdpr_settings[0]['consent_info_active']==2) ? "checked" : "" ; ?> class="inpirt-falt radio" name="consent_info_active" type="radio">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup ICON'); ?>* </label>
                                    <sub>(<?php echo __("Recommended") ?> 100 x 100 PX)</sub>
                                </div>
                                <div class="col-sm-9" style="text-align:center;">
                                    <button style="width:100%"
                                        id="report_page_popup_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __("Upload") ?>
                                    </button>
                                    <p id="uploader_logo_ie_description"
                                        style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="report_page_popup_file"
                                        class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="report_page_popup_cover_img" width="100"
                                        height="100" style="display:"
                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$gdpr_settings[0]['report_page_popup_file']; ?>"
                                        class="cimage" />
                                    <a href="javascript:;" style="display:none"
                                        id="remove_report_page_popup_cover_img"
                                        class="btn color-blue rcimage">
                                        <i class="fa fa-times"></i>
                                    </a>
                                    <input type="hidden"
                                        id="c_report_page_popup_cover_file" name=""
                                        value="" />
                                    <input type="hidden"
                                        id="report_page_popup_cover_file"
                                        name="report_page_popup_file" />
                                    <input type="hidden"
                                        id="report_page_popup_remove_cover" name=""
                                        value="0" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup Title'); ?>* </label>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" name="consent_info_popup_title" id=""
                                        value="<?=(count($gdpr_settings)) ? $gdpr_settings[0]['consent_info_popup_title'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup Description'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="" rows="4" cols="50" class="pin input-flat" name="consent_info_popup_body"><?=(count($gdpr_settings) && $gdpr_settings[0]['consent_info_popup_body']!='' ) ? $gdpr_settings[0]['consent_info_popup_body'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                </div>
                                <div class="col-sm-9">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('You can use following custom tags in your Text @@referrer_name@@, @@agent_name@@, @@report_owner@@, @@consent_link@@') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Sharing Text for Report GDPR'); ?>* </label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="" rows="4" cols="50" class="pin input-flat"
                                        name="consent_invit_msg_body"><?=(count($gdpr_settings) && $gdpr_settings[0]['consent_invit_msg_body']!='' ) ? $gdpr_settings[0]['consent_invit_msg_body'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Popup Button (Do you for me)'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="consent_popup_doyou_text" id=""
                                        value="<?=(!empty($gdpr_settings[0]['consent_popup_doyou_text'])) ? $gdpr_settings[0]['consent_popup_doyou_text'] : __("Do you for me") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_popup_doyou_background"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_popup_doyou_background'])) ? $gdpr_settings[0]['consent_popup_doyou_background'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_popup_doyou_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_popup_doyou_font'])) ? $gdpr_settings[0]['consent_popup_doyou_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Popup Button (Yes, I Proceed)'); ?>
                                        *</label>
                                </div>
                                 <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="consent_popup_proceed_text" id=""
                                        value="<?=(!empty($gdpr_settings[0]['consent_popup_proceed_text'])) ? $gdpr_settings[0]['consent_popup_proceed_text'] : __("Yes I, proceed") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_popup_proceed_background"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_popup_proceed_background'])) ? $gdpr_settings[0]['consent_popup_proceed_background'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_popup_proceed_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_popup_proceed_font'])) ? $gdpr_settings[0]['consent_popup_proceed_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Consent Collection Page Title'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                <input type="text" name="consent_col_page_title" id=""
                                    value="<?=(!empty($gdpr_settings[0]['consent_col_page_title'])) ? $gdpr_settings[0]['consent_col_page_title'] : "" ; ?>"
                                    class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Consent Collection Page Header'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" name="consent_col_page_header" id=""
                                        value="<?=(!empty($gdpr_settings[0]['consent_col_page_header'])) ? $gdpr_settings[0]['consent_col_page_header'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">

                                <div class="col-sm-3"></div>
                                <div class="col-sm-9">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('You can use following custom tags in your Text @@agent_name@@, @@app_name@@, @@report_owner@@,@@report_owner@@, @@report_owner_phone@@, @@app_privacy_link@@') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Consent Collection Page Body'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="" rows="4" cols="50" class="pin input-flat"
                                        name="consent_col_page_body"><?=(!empty($gdpr_settings[0]['consent_col_page_body'])) ? $gdpr_settings[0]['consent_col_page_body'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Consent Page Button (I Agree)'); ?>
                                        *</label>
                                </div>
                                 <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="consent_col_agree_btn_text" id=""
                                        value="<?=(!empty($gdpr_settings[0]['consent_col_agree_btn_text'])) ? $gdpr_settings[0]['consent_col_agree_btn_text'] : __("I Agree") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_col_agree_btn_background"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_col_agree_btn_background'])) ? $gdpr_settings[0]['consent_col_agree_btn_background'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_col_agree_btn_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_col_agree_btn_font'])) ? $gdpr_settings[0]['consent_col_agree_btn_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Consent Collection Page'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_col_page_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_col_page_bg'])) ? $gdpr_settings[0]['consent_col_page_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_col_page_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(!empty($gdpr_settings[0]['consent_col_page_font'])) ? $gdpr_settings[0]['consent_col_page_font'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-3"></div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Thank You Page Title'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" name="consent_thank_page_title" id=""
                                        value="<?=(!empty($gdpr_settings[0]['consent_thank_page_title'])) ? $gdpr_settings[0]['consent_thank_page_title'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Thank You Page Title Header'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" name="consent_thank_page_header" id=""
                                        value="<?=(count($gdpr_settings)  && $gdpr_settings[0]['consent_thank_page_header']!='') ? $gdpr_settings[0]['consent_thank_page_header'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Thank You Page Body'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="" rows="4" cols="50" class="pin input-flat"
                                        name="consent_thank_page_body"><?=(count($gdpr_settings) && $gdpr_settings[0]['consent_thank_page_body']!='' ) ? $gdpr_settings[0]['consent_thank_page_body'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Thank You Page'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_thank_page_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings)  && $gdpr_settings[0]['consent_thank_page_bg']!='') ? $gdpr_settings[0]['consent_thank_page_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="consent_thank_page_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings)  && $gdpr_settings[0]['consent_thank_page_font']!='') ? $gdpr_settings[0]['consent_thank_page_font'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-3"></div>
                            </div>
                        </div>
                        <div style="display:none;" id="gdpr_invite_prospect_popup">
                            <div class="row form-group">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Is this Popup Active'); ?> ?</label>
                                </div>
                                <div class="col-sm-9">
                                    <div class="col-sm-1">
                                        <?php  echo __("Yes"); ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input onClick="isInvitePopup(1)" value='1' <?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_warning_active']==1) ? "checked" : "" ; ?> class="inpirt-falt radio" name="invite_consent_warning_active" type="radio">
                                    </div>
                                    <div class="col-sm-1">
                                        <?php  echo __("No"); ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input onClick="isInvitePopup(2)" value='2' <?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_warning_active']==2) ? "checked" : "" ; ?> class="inpirt-falt radio" name="invite_consent_warning_active" type="radio">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup ICON'); ?>* </label>
                                    <sub>(<?php echo __("Recommended") ?> 100 x 100 PX)</sub>
                                </div>
                                <div class="col-sm-9" style="text-align:center;">
                                    <button style="width:100%"
                                        id="invite_report_popup_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __("Upload") ?>
                                    </button>
                                    <p id="uploader_logo_ie_description"
                                        style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="invite_report_popup_file"
                                        class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="invite_report_popup_cover_img" width="100"
                                        height="100" style="display:"
                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$gdpr_settings[0]['invite_report_popup_file']; ?>"
                                        class="cimage" />
                                    <a href="javascript:;" style="display:none"
                                        id="remove_invite_report_popup_cover_img"
                                        class="btn color-blue rcimage">
                                        <i class="fa fa-times"></i>
                                    </a>
                                    <input type="hidden"
                                        id="c_invite_report_popup_cover_file" name=""
                                        value="" />
                                    <input type="hidden"
                                        id="invite_report_popup_cover_file"
                                        name="invite_report_popup_file" />
                                    <input type="hidden"
                                        id="invite_report_popup_remove_cover" name=""
                                        value="0" />
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup Title'); ?>* </label>
                                </div>
                                <div class="col-sm-9">
                                    <input type="text" name="invite_consent_warning_title" id=""
                                        value="<?=(count($gdpr_settings)) ? $gdpr_settings[0]['invite_consent_warning_title'] : "" ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Popup Description'); ?> *</label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="" rows="4" cols="50" class="pin input-flat"
                                        name="invite_consent_warning_body"><?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_warning_body']!='' ) ? $gdpr_settings[0]['invite_consent_warning_body'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                </div>
                                <div class="col-sm-9">
                                    <div class="alert alert-info">
                                        <p style="padding-left:15px;">
                                            <?php echo __('You can use following custom tags in your Text @@landing_link@@, @@referrer_name@@') ?>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label for="read_only"><?php echo __('Sharing Texts for Invite Prospectus'); ?> </label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea id="invite_message" rows="4" cols="50" class="pin input-flat" name="invite_message"><?=(count($gdpr_settings) && $gdpr_settings[0]['invite_message']!='' ) ? $gdpr_settings[0]['invite_message'] : "Ciao sono @@referrer_name@@, ti invio il modulo richiesta contatto per l'azienda con cui collaboro. Compilalo per essere richiamato senza impegno: @@landing_link@@ " ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Popup Button (Understood)'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="invite_consent_btn_under_text" id=""
                                        value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_under_text']!='' ) ? $gdpr_settings[0]['invite_consent_btn_under_text'] : __("Understood") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_under_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_under_bg']!='' ) ? $gdpr_settings[0]['invite_consent_btn_under_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_under_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_under_font']!='' ) ? $gdpr_settings[0]['invite_consent_btn_under_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Popup Button (Discard)'); ?>
                                        *</label>
                                </div>
                                 <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="invite_consent_btn_discard_text" id=""
                                        value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_discard_text']!='' ) ? $gdpr_settings[0]['invite_consent_btn_discard_text'] : __("Discard") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_discard_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_discard_bg']!='' ) ? $gdpr_settings[0]['invite_consent_btn_discard_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_discard_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_discard_font']!='' ) ? $gdpr_settings[0]['invite_consent_btn_discard_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label for=""><?php echo __('Page Title'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input class="input-flat" type="text"
                                        name="landing_page_title"
                                        value="<?=(count($gdpr_settings) && $gdpr_settings[0]['landing_page_title']!='' ) ? $gdpr_settings[0]['landing_page_title'] : "" ; ?>">
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label for=""><?php echo __('Form Title'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input class="input-flat" type="text"
                                        name="landing_page_form_title"
                                        value="<?=(count($gdpr_settings) && $gdpr_settings[0]['landing_page_form_title']!='' ) ? $gdpr_settings[0]['landing_page_form_title'] : "" ; ?>">
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for="commission_type"><?php echo __('Header Image'); ?>
                                        *</label>
                                        <sub>(<?php echo __("Recommended") ?> 800 x 300 PX)</sub>
                                </div>
                                <div class="col-sm-9" style="text-align:center;">
                                    <button style="width:100%"
                                        id="landing_page_header_picture" type="button"
                                        class="upload_contact_picture btn color-blue image_left">
                                        <i class="icon-camera-retro"></i>
                                        <?php echo __("Upload") ?>
                                    </button>
                                    <p id="uploader_logo_ie_description"
                                        style="display:none">
                                        <?php echo __('Insert a <br /><span class="bold">cover image</span>'); ?></span>
                                    </p>
                                    <input id="landing_page_header_file"
                                        class="uploader" style="display:none"
                                        type="file" name="files[]"
                                        data-url="<?php echo $this->getUrl('template/crop/upload'); ?>">
                                    <img id="landing_page_header_cover_img" width="260"
                                        height="100" style="display:"
                                        src="<?=$base_url."/images/application/".$app_id."/features/migareference/".$gdpr_settings[0]['landing_page_header_file']; ?>"
                                        class="cimage" />
                                    <a href="javascript:;" style="display:none"
                                        id="remove_landing_page_header_cover_img"
                                        class="btn color-blue rcimage">
                                        <i class="fa fa-times"></i>
                                    </a>
                                    <input type="hidden"
                                        id="c_landing_page_header_cover_file" name=""
                                        value="" />
                                    <input type="hidden"
                                        id="landing_page_header_cover_file"
                                        name="landing_page_header_file" />
                                    <input type="hidden"
                                        id="landing_page_header_remove_cover" name=""
                                        value="0" />
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for="landing_page_bg_color"><?php echo __('Report Landing Page'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for="landing_page_bg_color"><?php echo __('Page Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                        <input type="hidden"
                                            name="landing_page_bg_color"
                                            class="top-header-bg-color opacity-colorpicker"
                                            value="<?=$gdpr_settings[0]['landing_page_bg_color'] ?>">
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for="landing_page_form_bg_color"><?php echo __('Form Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class=""
                                        style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            name="landing_page_form_bg_color"
                                            class="top-header-bg-color opacity-colorpicker"
                                            value="<?=$gdpr_settings[0]['landing_page_form_bg_color'] ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for="landing_page_text_color"><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class=""
                                        style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            name="landing_page_text_color"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=$gdpr_settings[0]['landing_page_text_color'] ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Form Button (Submit)'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <label
                                        for=""><?php echo __('Text'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                        <input type="text" name="invite_consent_btn_submit_text" id=""
                                        value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_submit_text']!='' ) ? $gdpr_settings[0]['invite_consent_btn_submit_text'] : __("Submit Report") ; ?>"
                                        class="input-flat" placeholder="" />
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_submit_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_submit_bg']!='' ) ? $gdpr_settings[0]['invite_consent_btn_submit_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="invite_consent_btn_submit_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings) && $gdpr_settings[0]['invite_consent_btn_submit_font']!='' ) ? $gdpr_settings[0]['invite_consent_btn_submit_font'] : "" ; ?>">
                                    </div>
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Confirm page title'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-9">
                                    <input class="input-flat" type="text"
                                        name="reportconfirm_page_title"
                                        value="<?=$gdpr_settings[0]['reportconfirm_page_title'] ?>">
                                </div>
                            </div>
                            <div class="row form-group is_invite_prospect_popup">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Confirm page message'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-9">
                                    <textarea class="pin input-flat" name="reportconfirm_page_message" rows="5" cols="80"><?=(count($gdpr_settings)) ? $gdpr_settings[0]['reportconfirm_page_message'] : "" ; ?></textarea>
                                </div>
                            </div>
                            <div class="row form-group gdpr_consent_share">
                                <div class="col-sm-3">
                                    <label
                                        for=""><?php echo __('Thank You Page'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Background'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="reportconfirm_page_bg"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings)  && $gdpr_settings[0]['reportconfirm_page_bg']!='') ? $gdpr_settings[0]['reportconfirm_page_bg'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <label
                                        for=""><?php echo __('Text Color'); ?>
                                        *</label>
                                </div>
                                <div class="col-sm-1">
                                    <div class="" style="border:1px solid black;width: fit-content;">
                                        <input type="hidden"
                                            id=""
                                            name="reportconfirm_page_font"
                                            class="top-header-text-color opacity-colorpicker"
                                            value="<?=(count($gdpr_settings)  && $gdpr_settings[0]['reportconfirm_page_font']!='') ? $gdpr_settings[0]['reportconfirm_page_font'] : "" ; ?>">
                                    </div>
                                </div>
                                <div class="col-sm-3"></div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-12">
                            <div class="save pull-right">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
                <hr>
                <!-- Privacy Global -->
                 <form id="migarefrencgdprprivacy" method="post"
                    action="<?php echo $this->getUrl('migareference/application/gdprprivacy') ?>">
                    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                    <input type="hidden" name="operation"
                        value="<?=(count($pre_report_settings) ) ? "update" : "create" ; ?>" />
                    <input type="hidden" name="migareference_pre_report_settings_id"
                        value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <h2 class="fs-title"><?php echo __('GDPR STATEMENT FOR PROSPECTS') ?></h2>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="row" style="padding-left: 15px;">
                                <div class="col-sm-8">
                                    <label for="read_only"><?php echo __('GDPR Consent Landing and Opt-In Landing should have a different GDPR Statement'); ?>?</label>
                                </div>
                                <div class="col-sm-4">
                                    <div class="row">
										<div class="col-sm-12">
											<select id="enable_privacy_global_settings"  class="input-flat" name="enable_privacy_global_settings" style="width: 95%;">
												<option value="2"><?php echo __("Siberian App Privacy Statement") ?></option>
												<option value="3" <?php echo count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] == 3 ? 'selected' : ''; ?>><?php echo __("External Link") ?></option>
												<option value="1" <?php echo count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] == 1 ? 'selected' : ''; ?>><?php echo __("Custom Privacy Statement") ?></option>
											</select>
										</div>
                                        <!-- <div class="col-sm-8">
                                            <div class="col-sm-1">
                                                <?php  echo __("Yes"); ?>
                                            </div>
                                            <div class="col-sm-1">
                                                <input  class="inpirt-falt radio" value='1' <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings']==1) ? "checked" : "" ; ?> name="enable_privacy_global_settings" type="radio">
                                            </div>
                                            <div class="col-sm-1">
                                                <?php  echo __("No"); ?>
                                            </div>
                                            <div class="col-sm-1">
                                                <input  class="inpirt-falt radio" value='2' <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings']==2) ? "checked" : "" ; ?> name="enable_privacy_global_settings" type="radio">
                                            </div>
                                        </div>  -->
                                    </div>
                                </div>
                            </div>
                        </div>
						<div class="form-group">
							<div class="col-sm-4">
								<label for="custom_landing_report_text"><?php echo __('Custom Text'); ?></label>
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-12">
								<textarea type="text" rows="4" cols="40" class="pin input-flat replace-with-ckeditor" name="custom_landing_report_text"><?=(count($pre_report_settings)) ? $pre_report_settings[0]['custom_landing_report_text'] : "" ; ?></textarea>
								<p><small><?php echo __('This text will be displayed just above the Privacy Label and right below your last form field.'); ?></small></p>
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-4">
								<label for="confirm_report_privacy_label"><?php echo __('Privacy Label'); ?> *</label>
							</div>
							<div class="col-sm-8">
								<input class="input-flat" id="confirm_report_privacy_label" type="text"
									name="confirm_report_privacy_label"
									value="<?=(count($pre_report_settings)) ? $pre_report_settings[0]['confirm_report_privacy_label'] : 'Accetto linformativa privacy' ; ?>" />
							</div>
						</div>
						<div class="form-group div-privacy div-privacy-both <?php echo (!count($pre_report_settings)) || (count($pre_report_settings) && !in_array($pre_report_settings[0]['enable_privacy_global_settings'], [2, 3])) ? 'hide' : ''; ?>">
							<div class="col-sm-4">
								<label for="confirm_report_privacy_link"><?php echo __('Privacy Link'); ?> *</label>
							</div>
							<div class="col-sm-8">
								<input class="input-flat" id="confirm_report_privacy_link" type="text"
									name="confirm_report_privacy_link"
									<?php echo count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] == 2 ? 'readonly' : ''; ?>
									value="<?php echo (count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] == 2 ? $ppUrl : (count($pre_report_settings) && $pre_report_settings[0]['confirm_report_privacy_link'] ? $pre_report_settings[0]['confirm_report_privacy_link'] : '')); ?>" />
							</div>
						</div>
                        <div class="form-group div-privacy <?php echo (!count($pre_report_settings)) || (count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] != 1) ? 'hide' : ''; ?>">
                            <div class="col-sm-4">
                                <label for="privacy-global-settings"><?php echo __('GDPR Statment Text'); ?> *</label>
                            </div>
                        </div>
                        <div class="form-group div-privacy <?php echo (!count($pre_report_settings)) || (count($pre_report_settings) && $pre_report_settings[0]['enable_privacy_global_settings'] != 1) ? 'hide' : ''; ?>">
                            <div class="col-sm-12">
                                <textarea id="privacy-global-settings" class="pin input-flat replace-with-ckeditor" name="privacy_global_settings" rows="3" cols="80">  <?=(count($pre_report_settings)) ? $pre_report_settings[0]['privacy_global_settings'] : ""; ?></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="save pull-right">
                        <button class="button btn bt_save btn color-blue" type="submit">
                            <?php echo __('Save'); ?>
                        </button>
                    </div>
                </form>
                <!-- GDPR Special settings -->
                <br>
                <br>
                <hr>
                 <form id="migarefrencgdprspecial" method="post"
                    action="<?php echo $this->getUrl('migareference/application/gdprspecial') ?>">
                    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                    <input type="hidden" name="operation"
                        value="<?=(count($pre_report_settings) ) ? "update" : "create" ; ?>" />
                    <input type="hidden" name="migareference_pre_report_settings_id"
                        value="<?=(count($pre_report_settings) ) ? $pre_report_settings[0]['migareference_pre_report_settings_id'] : 0 ; ?>" />
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <h2 class="fs-title"><?php echo __('GDPR SPECIAL SETTINGS') ?></h2>
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="row" style="padding-left: 15px;">
                                <div class="col-sm-8">
                                    <label for="read_only"><?php echo __('Allow manual validation GDPR time stamp'); ?>?</label>
                                </div>
                                <div class="col-sm-4">
                                    <div class="row">
                                        <div class="col-sm-8">
                                            <div class="col-sm-1">
                                                <?php  echo __("Yes"); ?>
                                            </div>
                                            <div class="col-sm-1">
                                                <input  class="inpirt-falt radio" value='1' <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_gdpr_special_settings']==1) ? "checked" : "" ; ?> name="enable_gdpr_special_settings" type="radio">
                                            </div>
                                            <div class="col-sm-1">
                                                <?php  echo __("No"); ?>
                                            </div>
                                            <div class="col-sm-1">
                                                <input  class="inpirt-falt radio" value='2' <?=(count($pre_report_settings) && $pre_report_settings[0]['enable_gdpr_special_settings']==2) ? "checked" : "" ; ?> name="enable_gdpr_special_settings" type="radio">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="save pull-right">
                        <button class="button btn bt_save btn color-blue" type="submit">
                            <?php echo __('Save'); ?>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Referrer Detail Model -->
            <div id="referrerDetailModal" class="modal" style="display:none;">
                <!-- Modal content -->
                <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto;">
                    <div class="modal-header" style="padding:0;">
                        <span onclick="closeReferrerdetail()"
                            style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                            class="close">&times;</span>
                        <h4 style="text-align:center;"><?php echo __("Referrer Detail") ?></h4>
                    </div>
                    <div class="modal-body">
                                    <form style="display:none" id="customcredits" action="<?php echo $this->getUrl('migareference/application/customcredits') ?>" method="post">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Referrer') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="ref-user"></p>
                                            </div>
                                            <div class="col-md-3">
                                                <strong><?php echo __('Entry Type') ?>*</strong>
                                            </div>
                                            <div class="col-md-3">
                                                <select class="input-flat" name="entry_type">
                                                    <option value="1"><?php echo __("Credit") ?></option>
                                                    <option value="2"><?php echo __("Debit") ?></option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Created at') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="ref-created-at"></p>
                                            </div>
                                            <div class="col-md-3">
                                                <strong><?php echo __('Add Custom Credits') ?>*</strong>
                                            </div>
                                            <div class="col-md-3">
                                                <input type="number" name="custom_credits" value="" class="pin input-flat">
                                                <input id="custom-credits" type="hidden" name="user_id" value="" class="pin input-flat">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Terms Accepted') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="ref-terms-accepted"></p>
                                            </div>
                                            <div class="col-md-3">
                                                <strong><?php echo __('Description') ?>*</strong>
                                            </div>
                                            <div class="col-md-3">
                                                <input type="text" name="custom_credit_description" value="" class="pin input-flat">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Disable Date') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="ref-leave-date"></p>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                            <div class="col-md-3">
                                                <button class="button btn bt_save btn color-blue" type="submit">
                                                    <?php echo __('Save'); ?>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <form style="display:none" id="customagents" action="<?php echo $this->getUrl('migareference/application/customagents') ?>" method="post">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Birth Date') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="ref-birth-date"></p>
                                            </div>
                                            <div class="col-md-3">
                                                <strong><?php echo __("Select Agent") ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <input id="referrer_user" name="referrer_user" type="hidden">
                                                <select id="referrer_agent" class="input-flat" name="referrer_agent">
                                                <?php if ($pre_report_settings[0]['enable_mandatory_agent_selection']==2) { ?>
                                                    <option value="0"><?php echo __("I dont know") ?></option>
                                                <?php } ?>
                                                    <?php foreach ($customer_agents as $key => $value): ?>
                                                    <option value="<?=$value['user_id'] ?>">
                                                    <?=$value['lastname']." ".$value['firstname'] ?>
                                                    </option>
                                                    <?php endforeach; ?>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-3">
                                                <strong><?php echo __('Agent') ?></strong>
                                            </div>
                                            <div class="col-md-3">
                                                <p id="sponsor-agent"></p>
                                            </div>
                                            <div class="col-md-3">
                                            </div>
                                            <div class="col-md-3">
                                                <button class="button btn bt_save btn color-blue" type="submit">
                                                    <?php echo __('Save'); ?>
                                                </button>
                                            </div>
                                        </div>
                                    </form>
                                    <div style="overflow-x:auto;">
                                        <table id="ref_table_report_status_old" class="table content-white-bkg" style="display:none;">
                                            <thead>
                                                <tr class="border-grey">
                                                    <th><?php echo __('Report NO'); ?></th>
                                                    <th><?php echo __('Created At'); ?></th>
                                                    <th><?php echo __('Last Modification'); ?></th>
                                                    <th><?php echo __('Report Owner'); ?></th>
                                                    <th><?php echo __('Status'); ?></th>
                                                </tr>
                                            </thead>
                                        </table>
                                    </div>
                                </div>
                            </div>
            </div>
    <!-- Consent Collection Modal -->
    <div id="crmreportlinksModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onClick="closeExternalLinkModal()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("Manage Reports Externally") ?></h4>
            </div>
            <div class="modal-body">
                <table id="table_externallinks" class="table display responsive nowrap content-white-bkg"
                    style="width:100%">
                    <thead>
                        <tr class="border-grey">
                            <th></th>
                            <th><?php echo __('Admin'); ?></th>
                            <th><?php echo __('Link'); ?></th>
                            <th><?php echo __('Reset'); ?></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <table id="table_agent_externallinks" class="table display responsive nowrap content-white-bkg"
                    style="width:100%">
                    <thead>
                        <tr class="border-grey">
                            <th></th>
                            <th><?php echo __('Agent'); ?></th>
                            <th><?php echo __('Link'); ?></th>
                            <th><?php echo __('Reset'); ?></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div id="agenttypeModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content" style="width: 35%;left: 26%;top: 25%;height:150px;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onClick="closeagentTypeModal()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("Choose Agent Type") ?></h4>
            </div>
            <div class="modal-body" style='padding-top: 30px;'>
            <div class="row form-group">
                <input id='multi_agent_customer' type="hidden" value=''>
                <input id='multi_agent_status' type="hidden" value=''>
                                <div class="col-sm-10" style='padding-top: 7px;'>
                                    <div class="col-sm-5">
                                        <?php  echo $pre_report_settings[0]['agent_type_label_one']; ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input  value='1' checked  class="inpirt-falt radio" name="multi_agent_type" type="radio">
                                    </div>
                                    <div class="col-sm-5">
                                        <?php  echo $pre_report_settings[0]['agent_type_label_two']; ?>
                                    </div>
                                    <div class="col-sm-1">
                                        <input  value='2'  class="inpirt-falt radio" name="multi_agent_type" type="radio">
                                    </div>
                                </div>
                                <div class="col-sm-2">
                                    <button onClick='savemultiagent()' class="button btn bt_save btn color-blue" type="button">
                                        <?php echo __('Save'); ?>
                                    </button>
                                </div>
                            </div>
            </div>
        </div>
    </div>
    <div id="aiMatchingModal" class="modal" style="background:#00000047;">
        <!-- Modal content -->
        <div class="modal-content" style="width: 55.5%;left: 15%;top: 20%;height:60%;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onClick="closeaiMatchingModal()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("AI Matching System") ?></h4>
            </div>
            <div class="modal-body" style="padding-left:30px;padding-right:30px;">
                <div class="row form-group">
                    <!-- Header -->
                    <div class="ai-matching-tabs" style='dispaly:block;margin-bottom:30px;'>
                        <button id='available-matching-tab-btn' class="btn color-blue" onclick="openAiMatchingTab('available')"><?php echo __('Available Matching'); ?></button>
                        <button id='matched-matching-tab-btn' class="btn " onclick="openAiMatchingTab('matched')"><?php echo __('Matched'); ?></button>
                        <button id='discard-matching-tab-btn' class="btn " onclick="openAiMatchingTab('discard')"><?php echo __('Discard'); ?></button>
                        <strong class="" style="padding-left: 50px;"><?php echo __("Last Update") ?>: <span id="last-matcing-call"></span>  </strong>
                        <strong class="" style="padding-left: 50px;"><?php echo __("Token Used") ?>: <span id="token_used"></span></strong>
                        <button class="btn color-blue pull-right" onclick="refreshAiMatching()"><i class="fa fa-refresh" rel=""></i></button>
                    </div>
                    <!-- Header -->
                    <div class="tab-content-container">
                        <!-- Tab 1: Available Matching -->
                        <div class='' id='available-matching-container'>
                        </div>
                        <!-- Tab 2: Matched -->
                        <div class='' id='matched-container' style="display:none">
                        </div>
                        <!-- Tab 3: Matched -->
                        <div class='' id='discard-container' style="display:none">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Manage Deleted Users Modal -->
    <div id="deletedusersModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onClick="closeExternalLinkModal()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("Manage Deleted Users") ?></h4>
            </div>
            <div class="modal-body">
                <table id="table_deletedusers" class="table display responsive nowrap content-white-bkg"
                    style="width:100%">
                    <thead>
                        <tr class="border-grey">
                            <th><?php echo __('User ID'); ?></th>
                            <th><?php echo __('Reports'); ?></th>
                            <th><?php echo __('Shift Reports To'); ?></th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- Consent Collection Modal -->
    <div id="consentModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onclick="closeConsent()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("Consent") ?></h4>
            </div>
            <div class="modal-body">
                <form id="migarefrencemanualconsent" method="post"
                    action="<?php echo $this->getUrl('migareference/application/savemanualconsent') ?>">
                    <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                    <input type="hidden" name="report_id" id="manual_consent_report_id" value="" />
                    <div class="form-group">
                        <div class="col-sm-4">
                            <label for="geo_country"><?php echo __('Manual Consent Date Stamp'); ?><sup>*</sup></label>
                        </div>
                        <div class="col-sm-6">
                            <input class="input-flat" type="datetime-local" name="consentdatestamp" value="" <?php echo  ($pre_report_settings[0]['enable_gdpr_special_settings']==2) ? 'disabled' : '' ; ?>>
                        </div>
                        <div class="col-sm-2">
                            <a target="_blank" class="btn btn-info" id="consentshare" href=''>
                                <i class="fa fa-whatsapp" rel=""></i>
                            </a>
                        </div>
                    </div>
                    <br><br><br><br>
                    <div class="save pull-right">
                        <button class="button btn bt_save btn color-blue" type="submit" <?php echo  ($pre_report_settings[0]['enable_gdpr_special_settings']==2) ? 'disabled' : '' ; ?>>
                            <?php echo __('Save'); ?>
                        </button>
                    </div>
                </form>
            </div>
        </div>

    </div>
    <!-- DOB Warning -->
    <div id="dobModal" class="modal">
        <!-- Modal content -->
        <div class="modal-content" style="width: 40%;left: 22%;top: 25%;overflow:auto;">
            <div class="modal-header" style="padding:0;">
                <span onclick="closedob()" style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                    class="close">&times;</span>
                <h4 style="text-align:center;"><?php echo __("Warning!") ?></h4>
            </div>
            <div class="modal-body">
                <?php echo __("The Date of Birth is a very important excuse to hear from your Referrer and build relationships. Try your best to add it to the system!") ?>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="savePhonebook()"><?php echo __("OK I understood") ?></button>
                <button onclick="closedob()"  type="button" class="btn btn-primary"><?php echo __("Oh yes! I add it now") ?></button>
            </div>
        </div>

    </div>
    <!-- Migareference Admin settings -->
    <div role="tabpanel" class="tab-pane" id="tab_admins">
        <div class="">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('Admin List'); ?>
            </h3>
            <!-- Geo Province model -->
            <div id="geoprovinceallocationmodal" class="modal" >
                <!-- Modal content -->
                <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto; background-color:#d4d4d4;">
                    <div class="modal-header" style="padding:0;">
                        <span onclick="closeProvinceAllocationMOdal()"
                            style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                            class="close">&times;</span>
                        <h4 style="text-align:center;"><?php echo __("Assign provinces") ?></h4>
                    </div>
                    <div class="modal-body" style="">

                    </div>
                </div>
            </div>
            <div id="affiliateLinkModel" class="modal" style="display:none;">
                <!-- Modal content -->
                <div class="modal-content" style="width: 40%;left: 22%;top: 25%;height:50%;overflow:auto;">
                    <div class="modal-header" style="padding:0;">
                        <span onclick="closeProvince()"
                            style="margin-top: -2px;color: red;text-align: center;height: 23px;width: 33px;opacity: 1;"
                            class="close">&times;</span>
                        <h4 style="text-align:center;"><?php echo __("Genrate Affiliate Link") ?></h4>
                    </div>
                    <div class="modal-body">
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label for="geo_country"><?php echo __('URL'); ?><sup>*</sup></label>
                                </div>
                                <div class="col-sm-8">
                                    <input id="affiliate_domain_url" type="text" name="affiliate_domain_url"
                                    value=""
                                    class="pin input-flat">
                                    <input id="affiliate_agent" type="hidden">
                                </div>
                            </div>
                            <br><br>
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue" onclick="getaffiliatelink()">
                                            <?php echo __('GENERATE LINK'); ?>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <br><br>

                        <div class="form-group" id="display_affiliate_link" style="display:none">
                                <div class="col-sm-4">
                                    <label for="geo_country"><?php echo __('Affiliate Link'); ?><sup></sup></label>
                                </div>
                                <div class="col-sm-8">
                                            <input id="display_affiliate_domain_url" disabled type="text" name="display_affiliate_domain_url"
                                value=""
                                class="pin input-flat">
                                </div>
                                <br><br>
                                <div class="form-group">
                                <div class="col-sm-9">
                                    <div class="save pull-right">
                                        <p id="affiliate_link_copied" style="display:none"><?=__("URL Copied") ?>!</p>
                                    </div>
                                </div>
                                <div class="col-sm-3">
                                    <div class="save pull-right">
                                        <button class="button btn bt_save btn color-blue" onclick="copyaffiliatelink()">
                                            <?php echo __('COPY LINK'); ?>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <br><br>

                        </div>
                    </div>
                </div>
            </div>
            <div  class="container-fluid content-feature pt30">
            <div id="agent_province_list" style='display:none;' >
                <div class="form-group">
                    <div style="text-align:end;">
                        <button onclick="customToggleView('admin_user_list','agent_province_list')" class="btn btn-info" type="button" name="button"> <?php echo __("Back") ?></button>
                    </div>
                </div>
                <form id="migarefrenceagentprovince" method="post" action="<?php echo $this->getUrl('migareference/application/saveagentprovince') ?>">
                    <input type="hidden" name="app_id" id="app_id" value="<?php echo $app_id; ?>" />
                    <input type="hidden" name="operation" id="geo-operation" value="" />
                    <input type="hidden" name="customer_id" id="agent_customer_id" value="" />
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-sm-3" style='margin-bottom: 30px;'>
                                <label for="geo_country"><?php echo __('Select Country'); ?><sup>*</sup></label>
                            </div>
                            <div class="col-sm-3">
                                <select id="agnet_province_cuntry" class="input-flat" name="geo_country">
                                    <option value="0"></option>
                                    <?php foreach ($geoProvinceCountries as $key => $value): ?>
                                    <option value="<?php echo $value['migareference_geo_countries_id'] ?>">
                                        <?php echo $value['country']."-".$value['country_code'] ?> </option>
                                    <?php endforeach; ?>
                                </select>
                            </div>
                            <div class="col-sm-4" style='margin-bottom: 30px;'>
                                <label for="geo_country"><?php echo __('Select all avaible provinces'); ?><sup></sup></label>
                            </div>
                            <div class="col-sm-1">
                                <input id='select_all_provinces' type="checkbox" name="selectsall" value="" class="pin input-flat" onclick="selectAllProvinces()">
                            </div>
                        </div>
                        <hr>
                        <div class="form-group" id="agent_province_container" style='padding-left: 15px;'>
                            <!-- Dynamic content will be here -->
                        </div>
                        <div class="save pull-right">
                            <button class="button btn bt_save btn color-blue" type="submit">
                                <?php echo __('Save'); ?>
                            </button>
                        </div>
                    </div>
                </form>
            </div>
                <div id="admin_user_list" class='custom_filter_style' style='text-align:right;'>
                    <div class="">
                        <?php if ($pre_report_settings[0]['sponsor_type']==2) { ?>
                            <div style='width: 180px;position: absolute;right: 0;margin-right: 388px;'>
                                <select id="admin_province_filter" onChange="adminFilter('province',this)" class="input-flat" name="">
                                    <option value="0"><?=__("Province") ?></option>
                                    <option value="0"><?=__("Show All") ?></option>
                                    <?php foreach ($allocated_provinces as $key => $value) { ?>
                                        <option value="<?=$value['province_id'] ?>"><?=$value['province'] ?></option>
                                    <?php } ?>
                                </select>
                            </div>
                        <?php } ?>
                        <button title="<?php echo __('Is Admin'); ?>?" class="btn btn-danger admin-filter"
                            onclick="adminFilter('admin',this)">
                            <i class='fa fa-user' rel=''></i>
                        </button>
                        <button title="<?php echo __('Is Agent'); ?>?" class="btn btn-danger admin-filter"
                            onclick="adminFilter('agent',this)">
                            <i class='fa fa-users' rel=''></i>
                        </button>
                        <button title="<?php echo __('Is Referrer'); ?>?" class="btn btn-danger admin-filter"
                            onclick="adminFilter('referrer',this)">
                            <?php echo __("Referrers") ?>
                        </button>
                        <button title="<?php echo __('Is Contact'); ?>?" class="btn btn-danger admin-filter"
                            onclick="adminFilter('contact',this)">
                            <?php echo __("Contacts") ?>
                        </button>
                        <button id="admin_filter_all_user" title="<?php echo __('All users'); ?>?" class="btn btn-info admin-filter"
                            onclick="adminFilter('default',this)">
                            <?php echo __("All users") ?>
                        </button>
                    </div>
                    <table id="table_appowners" class="table display responsive nowrap content-white-bkg" style="width:100%;margin-top: 15px;">
                        <thead>
                            <tr class="border-grey">
                                <th><?php echo __('Action'); ?></th>
                                <th><?php echo __('UID'); ?></th>
                                <th><?php echo __('Name'); ?></th>
                                <th><?php echo __('Email'); ?></th>
                                <th><?php echo __('Agent Type'); ?></th>
                                <th><?php echo __('Full Phonebook'); ?>?</th>
                                <th><?php echo __('Enable Paid Status'); ?>?</th>
                                <th><?php echo __('Assign Admin'); ?></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- Migareference How To settings -->
    <div role="tabpanel" class="tab-pane" id="tab_news">
        <h3 class="title-editor no-border-radius title-feature-indent">
            <?php echo __('Add How it Works settings'); ?>
        </h3>
        <div id="how_it_works_content_container" class="container-fluid content-feature pt30">

        </div>
    </div>
    <div role="tabpanel" class="tab-pane " id="tab_background">
        <div class="background-images-import">
            <?php echo $this->importBackground($option); ?>
        </div>
    </div>
</div>
<!-- Temp Form to Handle Response -->
<form style="display:none;" id="tempresponseform"
    action="<?php echo $this->getUrl('migareference/application/responseaddressesfile'); ?>">
    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
    <div class="form-horizontal">
        <div class="form-group">
            <div class="col-sm-6">
                <input type="text" id="response_message_body" name="response_message_body" class="input-flat" />
                <input type="number" id="response_type" name="response_type" class="input-flat" />
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-12">
                <button id="submit_response_form" class="button btn bt_save btn color-blue" type="submit">
                    <?php echo __('Save'); ?>
                </button>
            </div>
        </div>
    </div>
</form>
</div>
<!-- SweetAlert2 CSS -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">

<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=<?php echo $appKey; ?>&libraries=places"></script>
<link rel="stylesheet"
    href="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/';?>datatables.min.css">
<link rel="stylesheet"
    href="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/Responsive-2.2.7/css/';?>responsive.bootstrap.min.css">
<link rel="stylesheet"
    href="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/Responsive-2.2.7/css/';?>responsive.dataTables.min.css">
<script
    src="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/';?>datatables.min.js">
</script>
<script
    src="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/Responsive-2.2.7/js/';?>responsive.bootstrap.min.js">
</script>
<script
    src="<?php echo $this->getUrl("/app/local/modules") . '/Migareference/resources/design/desktop/flat/DataTables/Responsive-2.2.7/js/';?>dataTables.responsive.min.js">
</script>
<style>
/* START:Multi Seclect checkboxesss */
.multiselecttt {
    width: 200px;
}

.selectBox {
    position: relative;
}

.selectBox select {
    width: 100%;
    font-weight: bold;
}

.overSelect {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
}

#checkboxesss {
    display: none;
    border: 1px #dadada solid;
}

#checkboxesss label {
    display: block;
}

#checkboxesss label:hover {
    background-color: #1e90ff;
}

/* END:Multi Seclect checkboxesss */
/* datatables new css start*/
.dataTables_filter input[type=search] {
    border-style: none none solid;
    border-style: none none solid;
    border-width: medium medium 2px;
    padding: 6px 12px;
    border-color: #b2b1b1;
    background-color: #f3f3f3;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}

.dataTables_wrapper .dataTables_filter {
    float: left;
    text-align: right;
    /*margin-bottom: 20px;*/
}

table.dataTable.stripe tbody tr.odd,
table.dataTable.display tbody tr.odd {
    background-color: #ffffff;
}

table.dataTable.display tbody tr.odd>.sorting_1,
table.dataTable.order-column.stripe tbody tr.odd>.sorting_1 {
    background-color: #ffffff;
}

table.dataTable.hover tbody tr:hover,
table.dataTable.display tbody tr:hover {
    background-color: #ffffff;
}

table.dataTable.display tbody tr:hover>.sorting_1,
table.dataTable.order-column.hover tbody tr:hover>.sorting_1 {
    background-color: #ffffff;
}

table.dataTable.display tbody tr.even>.sorting_1,
table.dataTable.order-column.stripe tbody tr.even>.sorting_1 {
    background-color: #ffffff;
}

.dataTables_wrapper .dataTables_paginate .paginate_button.disabled,
.dataTables_wrapper .dataTables_paginate .paginate_button.disabled:hover,
.dataTables_wrapper .dataTables_paginate .paginate_button.disabled:active {
    color: #fff !important;
}

.dataTables_wrapper .dataTables_paginate .paginate_button.current,
.dataTables_wrapper .dataTables_paginate .paginate_button.current:hover {
    color: #ffffff !important;
    border: 1px solid #979797;
    background-color: #11c1f3;
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #11c1f3), color-stop(100%, #11c1f3));
    background: -webkit-linear-gradient(top, #11c1f3 0%, #11c1f3 100%);
    background: -moz-linear-gradient(top, #11c1f3 0%, #11c1f3 100%);
    background: -ms-linear-gradient(top, #11c1f3 0%, #11c1f3 100%);
    background: -o-linear-gradient(top, #11c1f3 0%, #11c1f3 100%);
    background: linear-gradient(to bottom, #11c1f3 0%, #11c1f3 100%);
}

.dataTables_wrapper .dataTables_paginate .paginate_button {
    color: #fff !important;
}

.dataTables_wrapper .dataTables_paginate .paginate_button:hover {
    color: white !important;
    background: inherit;
    background-color: inherit;
    border: 1px solid #008ab3;
}

/* datatables new css end*/
.dropdown-check-list {
    display: inline-block;
}

.dropdown-check-list .anchor {
    position: relative;
    cursor: pointer;
    display: inline-block;
}

.dropdown-check-list .anchor:after {
    position: absolute;
    content: "";
    border-left: 2px solid black;
    border-top: 2px solid black;
    padding: 2px;
    right: -4px;
    top: 14%;
    -moz-transform: rotate(-135deg);
    -ms-transform: rotate(-135deg);
    -o-transform: rotate(-135deg);
    -webkit-transform: rotate(-135deg);
    transform: rotate(-135deg);
}

.dropdown-check-list .anchor:active:after {
    right: 8px;
    top: 21%;
}

.dropdown-check-list ul.items {
    padding: 2px;
    display: none;
    margin: 0;
    border-top: none;
}

.dropdown-check-list ul.items li {
    list-style: none;
}

.dropdown-check-list.visible .anchor {
    color: #0094ff;
}

.dropdown-check-list.visible .items {
    display: block;
}
</style>
<script>
    jQuery.extend( jQuery.fn.dataTableExt.oSort, {
"date-uk-pre": function ( a ) {
    var ukDatea = a.split('-');
    return (ukDatea[2] + ukDatea[1] + ukDatea[0]) * 1;
},

"date-uk-asc": function ( a, b ) {
    return ((a < b) ? -1 : ((a > b) ? 1 : 0));
},

"date-uk-desc": function ( a, b ) {
    return ((a < b) ? 1 : ((a > b) ? -1 : 0));
}
} );
    function selAllReminders(sourceCheckbox) {
            console.log("Called");
        // Check or uncheck all reminder checkboxes
        $('input[name="reminderCheckbox[]"]').prop('checked', sourceCheckbox.checked);
        reminderResetSelection(); // Update the state of the reset button
    }
    function assignToReferrer(obj,type) {//type could be: Ref or Agt
        swal({
            title: '<?php echo __js('Confirmation', "'"); ?>',
            text: '<?php echo __js('Are you sure you want to assign Reports to this customer?', "'"); ?>',
            showCancelButton: true,
            confirmButtonColor: '#0099C7',
            confirmButtonText: '<?php echo __js('Yes, assign!', "'"); ?>',
            cancelButtonText: '<?php echo __js('No, go back', "'"); ?>',
            buttons: true
        }, function(value) {
            if (!value) {
                $(".assign-customer").prop("selected", true);
                return false;
            }else{
                // Get the closest table row (tr) element
                var closestRow = $(obj).closest('tr');

                // Get the first cell (td) within the row
                var firstCell = closestRow.find('td:first');

                // Get the ID value within the first cell
                var from_user_id = firstCell.text();
                $.ajax({
                    url: "<?php echo $this->getUrl('migareference/application/assigntoreferrer?app_id='.$app_id.'&to_user_id='); ?>"+obj.value+'&from_user_id='+from_user_id+'&type='+type,
                    type: 'get',
                    contentType: false,
                    processData: false,
                }).done(function(response) {
                    console.log("DOne");
                    console.log(response);
                    // $("#mask").hide();
                    res = JSON.parse(response);
                    $("#response_message_body").val(res.message);
                    if (res.success == true) {
                        $("#response_type").val(1);
                    } else {
                        $("#response_type").val(2);
                    }
                }).fail(function(response) {
                    console.log("Done");
                }).always(function(response) {
                    $("#submit_response_form").trigger("click");
                });
            }
        });
    }

    function backToPrizeNotificationList() {
        console.log("backToPrizeNotificationList Called");
        $('#priz-notification-list-container').show();
        $('#prize-notification-form').hide();
        $('#back-to-prize-notification-list').hide();
    }

    function reminderReset() {
            swal({
                title: '<?php echo __js('Confirmation', "'"); ?>',
                text: '<?php echo __js('Are you sure you want to reset reminders?', "'"); ?>',
                showCancelButton: true,
                confirmButtonColor: '#0099C7',
                confirmButtonText: '<?php echo __js('Yes, Reset!', "'"); ?>',
                cancelButtonText: '<?php echo __js('No, go back', "'"); ?>',
                buttons: true
            }, function(value) {
                if (value) {
                    // Submit the form
                    $('#resetreminderform').submit();
                } else {
                    console.log("Nothing");
                }
            });
    }
    // Bind the submit event handler outside the swal callback
    $('#resetreminderform').submit(function(e) {
        e.preventDefault(); // Prevent default form submission
        reload(this, this.action, true, function(data) {
            if (data.success) {
                page.reload();
            }
        });
    });


    function savePhonebook() {
        $("#submitphonebook").trigger("click");
    }

    function closedob() {
        var dobModal = document.getElementById("dobModal");
        dobModal.style.display = "none";
    }
    function populateOptionForm() {
        var url =
            '<?php echo $this->getUrl('migareference/application/populateoptinform', ['option_value_id' => $value_id]); ?>';
        reload(this, url, true, function(datas) {
            $("#optin-form-container").html("").append(datas.form);
        });
        return false;
    }
    function populateAIItegration() {
        var url =
            '<?php echo $this->getUrl('migareference/application/populateaiintegrationview', ['option_value_id' => $value_id]); ?>';
        reload(this, url, true, function(datas) {
            $("#ai-integration-container").html("").append(datas.form);
        });
        return false;
    }
    function populateQualification() {
        var url ='<?php echo $this->getUrl('migareference/qualification_qualification/loadqualificationview', ['option_value_id' => $value_id]); ?>';
        reload(this, url, true, function(datas) {
            $("#qualification-container").html("").append(datas.form);
        });
        return false;
    }
    function prizeNotificationTab() {
        var url ='<?php echo $this->getUrl('migareference/prize_notification/loadprizenotificationview', ['option_value_id' => $value_id]); ?>';
        reload(this, url, true, function(datas) {
            $("#prizes-notifications").html("").append(datas.form);
        });
        return false;
    }
    var is_populateHowItWorks_loaded=false;
    function populateHowItWorks() {
        if (!is_populateHowItWorks_loaded) {
            var url =
                '<?php echo $this->getUrl('migareference/application/populatehowitworksview', ['option_value_id' => $value_id]); ?>';
            reload(this, url, true, function(datas) {
                $("#how_it_works_content_container").html("").append(datas.form);
            });
            is_populateHowItWorks_loaded=true;
            return false;
        }
    }
    function copyaffiliatelink() {
        var $temp = $("<input>");
        $("body").append($temp);
        $temp.val($("#display_affiliate_domain_url").val()).select();
        document.execCommand("copy");
        $temp.remove();
        $("#affiliate_link_copied").show().fadeOut(9000);;
    }
function copyUrl(url) {
    console.log(url);
    var dummy = document.createElement('input'),
        text = window.location.href;
    document.body.appendChild(dummy);
    dummy.value = url;
    dummy.select();
    document.execCommand('copy');
    document.body.removeChild(dummy);
}
// Get the modal

function crmreportlinks(report_id, agent_id, link) {
    var crmreportlinksModal = document.getElementById("crmreportlinksModal");
    crmreportlinksModal.style.display = "block";
    $("#table_externallinks").DataTable().destroy();
    $('#table_externallinks').DataTable({
        responsive: true,
        searching: false,
        paging: false,
        info: false,
        columnDefs: [{
            className: 'control',
            orderable: false,
            targets: 0
        }],
        "ajax": '<?php echo $this->getUrl("migareference/application/getexternallinks?app_id=$app_id"); ?>' +
            "&report_id=" + report_id,
    });
    $("#table_agent_externallinks").DataTable().destroy();
    $('#table_agent_externallinks').DataTable({
        responsive: true,
        searching: false,
        paging: false,
        info: false,
        columnDefs: [{
            className: 'control',
            orderable: false,
            targets: 0
        }],
        "ajax": '<?php echo $this->getUrl("migareference/application/getagentexternallinks?app_id=$app_id"); ?>' +
            "&report_id=" + report_id,
    });
}
// var checkList = document.getElementById('list1');
// checkList.getElementsByClassName('anchor')[0].onclick = function(evt) {
//     if (checkList.classList.contains('visible'))
//         checkList.classList.remove('visible');
//     else
//         checkList.classList.add('visible');
// }

// Get the modal
function closeConsent() {
    var consentModal = document.getElementById("consentModal");
    consentModal.style.display = "none";
}
function collectConsentModal(report_id, user_id) {
    var consentModal = document.getElementById("consentModal");
    consentModal.style.display = "block";
    $("#manual_consent_report_id").val(report_id);
    $.ajax({
        url: '<?php echo $this->getUrl('migareference/application/invitemessage'); ?>',
        type: 'POST',
        dataType: 'json',
        data: {
            report_id: report_id,
            user_id: user_id
        }
    }).done(function(data) {
        link="https://api.whatsapp.com/send?text=" + data.data + "&phone=" + data.prospectmobile;
        console.log(link);
        $("#consentshare").attr("href",link );
    }).fail(function(data) {
        console.log("Fail");
    }).always(function() {
        console.log("complete");
    });
}
function getReportWebHookTags() {
    $.ajax({
        url: '<?php echo $this->getUrl('migareference/application/genratrewebhooktags'); ?>',
        type: 'POST',
        dataType: 'json',
    }).done(function(data) {
        $("#report_webhook_tags_list").text(data.data);
        console.log(data);
    }).fail(function(data) {
        console.log("Fail");
    }).always(function() {
        console.log("complete");
    });
}
getReportWebHookTags();

function resetExternalLink(id, report_id) {
    $.ajax({
        url: '<?php echo $this->getUrl('migareference/application/resetexternalurl'); ?>',
        type: 'POST',
        dataType: 'json',
        data: {
            report_url_id: id
        }
    }).done(function(data) {
        console.log(data);
    }).fail(function(data) {
        console.log("Fail");
    }).always(function() {
        console.log("complete");
        crmreportlinks(report_id);
    });
}
// Models

// Get the button that opens the modal
var btn = document.getElementById("myBtn");
// Get the <span> element that closes the modal
// var span = document.getElementsByClassName("close")[0];
function customToggleView(show_block_id,hide_block_id) {
    $("#"+show_block_id).show();
    $("#"+hide_block_id).hide();
}
function openProvincesmodal(type, customer_id,country_id) {
    customToggleView('agent_province_list','admin_user_list');
    $("#agent_customer_id").val(customer_id);
    $("#agnet_province_cuntry option[value=" + country_id + "]").prop("selected", true);
    $("#agent_province_container").html("");
    if (country_id) {
        loadProvicnes(country_id, 3, customer_id);
    }
}
// Agent affilate link model
var affiliateLinkModel = document.getElementById("affiliateLinkModel");
var refDetailModel = document.getElementById("referrer_detail");
// Get the button that opens the modal
var btn = document.getElementById("myBtn");

function closeProvince() {
    modal.style.display = "none";
    affiliateLinkModel.style.display = "none";
}
function closeExternalLinkModal() {
    var crmreportlinksModal = document.getElementById("crmreportlinksModal");
    crmreportlinksModal.style.display = "none";
    var deletedusersModal = document.getElementById("deletedusersModal");
    deletedusersModal.style.display = "none";
}
function closeaiMatchingModal() {
    var aiMatchingModal = document.getElementById("aiMatchingModal");
    aiMatchingModal.style.display = "none";
}
function customerPhonebook(phonebook_id,type,terms,referrer,is_profiled) {
    var aiMatchingModal = document.getElementById("aiMatchingModal");
    aiMatchingModal.style.display = "none";
    editProspectJob(phonebook_id,type,terms,referrer,is_profiled);
}
function openaiMatchingModal() {

    $("#mask").show();
    var aiMatchingModal = document.getElementById("aiMatchingModal");
    aiMatchingModal.style.display = 'block';
    $(".ai-matching-tabs").show();
    //reset tabs display
    $("#available-matching-container").show();
    $("#matched-container").hide();
    $("#discard-container").hide();
    $("#available-matching-tab-btn").addClass("color-blue");
    $("#matched-matching-tab-btn").removeClass("color-blue");
    $("#discard-matching-tab-btn").removeClass("color-blue");
    //Load Matching data
    var referrer_id=$("#phonebook_user_id").val();
    getaimatchingdata(referrer_id);
}
function getaimatchingdata(referrer_id) {
    $.ajax({
        url: '<?php echo $this->getUrl('migareference/phonebook/getaimatchingdata'); ?>',
        type: 'POST',
        dataType: 'json',
        data: {
            referrer_id: referrer_id
        }
    }).done(function(data) {
        console.log(data);
        $("#available-matching-container").html("").append(data.available_matching_data);
        $("#matched-container").html("").append(data.matched_data);
        $("#discard-container").html("").append(data.discard_data);
        $("#last-matcing-call").html("").append(data.last_matching_call);
        $("#token_used").html("").append(data.token_used);
    }).fail(function(data) {
        console.log("Fail");
    }).always(function() {
        console.log("complete");
        $("#mask").hide();
    });
}
function matchCustomer(matching_network_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to Match customer'); ?>'+'?',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, Match it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            $("#mask").show();
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/matchcustomer'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    matching_network_id: matching_network_id
                }
            }).done(function(data) {
                console.log(data);
                getaimatchingdata($("#phonebook_user_id").val());
            }).fail(function(data) {
                console.log("Fail");
            }).always(function() {
                console.log("complete");
                $("#mask").hide();
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function discardCustomer(matching_network_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to discard?'); ?>',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, discard it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            $("#mask").show();
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/discardcustomer'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    matching_network_id: matching_network_id
                }
            }).done(function(data) {
                console.log(data);
                getaimatchingdata($("#phonebook_user_id").val());
            }).fail(function(data) {
                console.log("Fail");
            }).always(function() {
                console.log("complete");
                $("#mask").hide();
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function unMatchCustomer(matching_network_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to UnMatch'); ?>'+ '?',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, UnMatch it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            $("#mask").show();
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/unmatchcustomer'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    matching_network_id: matching_network_id
                }
            }).done(function(data) {
                console.log(data);
                getaimatchingdata($("#phonebook_user_id").val());
            }).fail(function(data) {
                console.log("Fail");
            }).always(function() {
                console.log("complete");
                $("#mask").hide();
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function removeCustomer(matching_network_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to Remove from discard list'); ?>'+"?",
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, Remove it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            $("#mask").show();
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/removecustomer'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    matching_network_id: matching_network_id
                }
            }).done(function(data) {
                console.log(data);
                getaimatchingdata($("#phonebook_user_id").val());
            }).fail(function(data) {
                console.log("Fail");
            }).always(function() {
                console.log("complete");
                $("#mask").hide();
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function closeagentTypeModal() {
    var agenttypeModal = document.getElementById("agenttypeModal");
    agenttypeModal.style.display = "none";
}
function openAiMatchingTab(tab_type) {
   if (tab_type=='available') {
    console.log("Available");
    $("#available-matching-container").show();
    $("#matched-container").hide();
    $("#discard-container").hide();
    $("#available-matching-tab-btn").addClass("color-blue");
    $("#matched-matching-tab-btn").removeClass("color-blue");
    $("#discard-matching-tab-btn").removeClass("color-blue");
   }else if(tab_type=='matched'){
    console.log("Matched");
    $("#available-matching-container").hide();
    $("#matched-container").show();
    $("#discard-container").hide();
    $("#available-matching-tab-btn").removeClass("color-blue");
    $("#matched-matching-tab-btn").addClass("color-blue");
    $("#discard-matching-tab-btn").removeClass("color-blue");
   }else if(tab_type=='discard'){
    console.log("Discard");
    $("#available-matching-container").hide();
    $("#matched-container").hide();
    $("#discard-container").show();
    $("#available-matching-tab-btn").removeClass("color-blue");
    $("#matched-matching-tab-btn").removeClass("color-blue");
    $("#discard-matching-tab-btn").addClass("color-blue");
   }
}
function refreshAiMatching() {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('By refreshing we will discard current referred showed, later you can manage discard in the specific section.'); ?>'+'?',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, Refresh it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            $("#mask").show();
            var phonebook_id=$("#migarefrence_phonebook_id").val();
            var referrer_id=$("#phonebook_user_id").val();
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/refreshaimatching'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    phonebook_id: phonebook_id
                }
            }).done(function(data) {
                console.log("Done");
                console.log(data);
            }).fail(function(data) {
                console.log("Fail");
                console.log(data);
            }).always(function() {
                console.log("complete");
                getaimatchingdata(referrer_id);
                $("#mask").hide();
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    // if (event.target == modal) {
        // geoprovinceallocationmodal.style.display = "none";
        // consentModal.style.display = "none"
        // crmreportlinksModal.style.display = "none";
        affiliateLinkModel.style.display = "none";
    // }
}
//Multiiiiiiiii
var expanded = false;

function showcheckboxesss() {
    var checkboxesss = document.getElementById("checkboxesss");
    if (!expanded) {
        checkboxesss.style.display = "block";
        expanded = true;
    } else {
        checkboxesss.style.display = "none";
        expanded = false;
    }
}

function chnageSponsor(obj) {
    var message = (sponsor_key == 0) ? '<?php echo __("Are you sure you want to Remove Sponsor?"); ?>' :
        '<?php echo __("Are you sure you want to Change Sponsor?"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/updatesponsor'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/sponsor_key/' +
            sponsor_key;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
$(document).ready(function() {
	//added by imran start
	$('#custom_landing_report_text').ckeditor({
		language: ckeditor_language,
		toolbar: [
			{ name: 'links', items: ['Link', 'Unlink'] },
		]
	});

	CKEDITOR.on('dialogDefinition', function(ev) {

		try {

		var dialogName = ev.data.name;
		var dialogDefinition = ev.data.definition;

		if (dialogName == 'link') {

			var informationTab = dialogDefinition.getContents('target');

			var targetField = informationTab.get('linkTargetType');

			targetField['default'] = '_blank';

		}

		} catch (exception) {

		alert('Error ' + ev.message);

		}

	});

	CKEDITOR.on('instanceReady', function(ev) {
		var editor = ev.editor,
			dataProcessor = editor.dataProcessor,
			htmlFilter = dataProcessor && dataProcessor.htmlFilter;
		htmlFilter.addRules({
			a: function(element) {
			element.attributes['target'] = "_blank";
			}
		});
	});

	$('select#enable_privacy_global_settings').change(function(event) {
		var enable_privacy_global_settings = parseInt($(this).val());
		$('div.div-privacy').addClass('hide');
		switch (enable_privacy_global_settings) {
			case 1:
				$('div.div-privacy').not('.div-privacy-both').removeClass('hide');
				break;
			case 2:
			case 3:
				$('div.div-privacy').removeClass('hide');
				$('div.div-privacy').not('.div-privacy-both').addClass('hide');
				if (enable_privacy_global_settings == 3) {
					$('input#confirm_report_privacy_link').val('');
					$('input#confirm_report_privacy_link').attr('readonly', false);
				} else {
					$('input#confirm_report_privacy_link').val('<?php echo $ppUrl; ?>');
					$('input#confirm_report_privacy_link').attr('readonly', true);
				}
				break;
		}
	});
	//added by imran end


    //Datatable resize problem resolve code start
    $('a[data-toggle="tab"]').on('shown.bs.tab', function(e) {
        // var target = $(e.target).attr("href"); // activated tab
        // alert(target);
        $($.fn.dataTable.tables(true)).css('width', '100%');
        $($.fn.dataTable.tables(true)).DataTable().columns.adjust().draw();
    });
    //Datatable resize problem resolve code end

    bindForms('.background-images-import');

});
// Toggle all reminder checkboxes when 'Select All' is changed

function reminderResetSelection() {
    // Check if any checkboxes are checked
    var anyChecked = $('input[name="reminderCheckbox[]"]:checked').length > 0;
    console.log(anyChecked);
    // Enable or disable the reset button based on whether any checkboxes are checked
    $('#reset_reminder').prop('disabled', !anyChecked);
    // Show or hide the warning message based on whether any checkboxes are checked
    if(anyChecked) {
        $('#reminder-reset-warning').show();
    } else {
        $('#reminder-reset-warning').hide();
    }
}
$("textarea.richtext").each(function() {
    rebuildRichtext(this);
});
$('.opacity-colorpicker').minicolors({
    opacity: true,
    format: 'rgb'
});
var address_key = 1;

function callforaddress(key) {
    address_key = key;
    autocomplete = new google.maps.places.Autocomplete((document.getElementById('address-new-report-' + key)), {
        types: ['geocode']
    });
    autocomplete.addListener('place_changed', fillInAddresstest);
}

$('#table_appowners').on('change', '.admin-dropdown', function(){
  var admin_id = $(this).val();
  var agent_id = $(this).closest('tr').find('td:eq(1)').text(); // get the user id from the corresponding row
    if (confirm('<?php echo __("Are you sure you want to assign admin?"); ?>')) {
        var url ='<?php echo $this->getUrl('migareference/application/updateadminassignment'); ?>/app_id/<?php echo $app_id; ?>/agent_id/'+agent_id+'/admin_id/'+admin_id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
});
$('#table_appowners').on('change', '.full_phonebook', function(){
  var full_phonebook = $(this).prop('checked') ? 1 : 0; // Set 1 if checked, 0 if not
  var agent_id = $(this).closest('tr').find('td:eq(1)').text(); // get the user id from the corresponding row
    if (confirm('<?php echo __("Are you sure you want to allow FULL PHONEBOOK access?"); ?>')) {
        var url ='<?php echo $this->getUrl('migareference/application/updatephonebookaccess'); ?>/app_id/<?php echo $app_id; ?>/agent_id/'+agent_id+'/full_phonebook/'+full_phonebook;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
});
$('#table_appowners').on('change', '.enable_paid_status', function() {
    var checkbox = $(this);
    var enable_paid_status = checkbox.prop('checked') ? 0 : 1;
    var agent_id = $(this).data('agent_id');

    if (!agent_id) {
        Swal.fire('Error!', 'Agent id not found.', 'error');
        checkbox.prop('checked', !checkbox.prop('checked'));
        return;
    }

    Swal.fire({
        title: 'Are you sure?',
        text: 'Do you want to update paid status access?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Yes, update it',
        cancelButtonText: 'No, cancel'
    }).then((result) => {
        if (result.isConfirmed) {
            var baseUrl = '<?php echo $this->getUrl('migareference/application/updateenablepaidstatus'); ?>';
            var url = baseUrl 
                + '/agent_id/' + encodeURIComponent(agent_id) 
                + '/enable_paid_status/' + encodeURIComponent(enable_paid_status);

            reload(checkbox, url, true, function(datas) {
                if (datas && datas.success) {
                    Swal.fire('Updated!', 'Paid status access has been updated.', 'success').then(() => {
                        if (typeof table !== 'undefined' && table.ajax) {
                            table.ajax.reload(null, false);
                        }
                    });
                } else {
                    Swal.fire('Error!', (datas && datas.message) ? datas.message : 'Something went wrong while updating.', 'error');
                    checkbox.prop('checked', !checkbox.prop('checked'));
                }
            });
        } else {
            checkbox.prop('checked', !checkbox.prop('checked'));
        }
    });
});


function fillInAddresstest() {
    var place = autocomplete.getPlace();
    lat = place.geometry.location.lat(),
        lng = place.geometry.location.lng();
    $("#new-report-latitude-" + address_key).val(lat);
    $("#new-report-longitude-" + address_key).val(lng);
    if (address_key == 0) {
        longitude = lng;
        latitude = lat;
        setTimeout(initMap, 500);
        initMap();
        initAutocomplete();
    }
}

function setrating(key) {
    for (var i = 1; i < 6; i++) {
        if (i <= key) {
            $(".rating" + i).addClass("ratechecked").removeClass("rateunchecked");
        } else {
            $(".rating" + i).addClass("rateunchecked").removeClass("ratechecked");
        }
    }
    $("#phonebook_rating").val(key);
    $("#prospect_rating").val(key);
}
 
$("div.bhoechie-tab-menu > div.list-group > a").click(function(e) {
    e.preventDefault();
    $(this).siblings('a.active').removeClass("active");
    $(this).addClass("active");
    var index = $(this).index();
    $("div.bhoechie-tab>div.bhoechie-tab-content").removeClass("active");
    $("div.bhoechie-tab>div.bhoechie-tab-content").eq(index).addClass("active");
});
// APP Content Icons
// **How it works App content ** //
$('#migarefrence_how_it_works_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_how_it_works_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_how_it_works_cover_img').show();
                $('#migarefrence_how_it_works_remove_cover').val(0);
                $('#migarefrence_how_it_works_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_how_it_works_picture').click(function() {
    $('#migarefrence_how_it_works_file').trigger('click');
});
// **Invite PROPERTY App content ** //
//GDPR settings Report popup icon
$('#report_page_popup_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 200;
            params["output_h"] = 200;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#report_page_popup_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#report_page_popup_cover_img').show();
                $('#report_page_popup_remove_cover').val(0);
                $('#report_page_popup_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#report_page_popup_picture').click(function() {
    $('#report_page_popup_file').trigger('click');
});
//GDPR settings Invite popup icon
$('#invite_report_popup_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 200;
            params["output_h"] = 200;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#invite_report_popup_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#invite_report_popup_cover_img').show();
                $('#invite_report_popup_remove_cover').val(0);
                $('#invite_report_popup_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#invite_report_popup_picture').click(function() {
    $('#invite_report_popup_file').trigger('click');
});
//
$('#landing_page_header_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 800;
            params["output_h"] = 308;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#landing_page_header_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#landing_page_header_cover_img').show();
                $('#landing_page_header_remove_cover').val(0);
                $('#landing_page_header_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#landing_page_header_picture').click(function() {
    $('#landing_page_header_file').trigger('click');
});
// CRM Report Content
$('#crmreport_page_header_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 500;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#crmreport_page_header_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#crmreport_page_header_cover_img').show();
                $('#crmreport_page_header_remove_cover').val(0);
                $('#crmreport_page_header_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#crmreport_page_header_picture').click(function() {
    $('#crmreport_page_header_file').trigger('click');
});
// **Add Report App content ** //
$('#migarefrence_add_property_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_add_property_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_add_property_cover_img').show();
                $('#migarefrence_add_property_remove_cover').val(0);
                $('#migarefrence_add_property_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_add_property_picture').click(function() {
    $('#migarefrence_add_property_file').trigger('click');
});
// **Report type button cover ** //
$('#migarefrence_report_type_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_report_type_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_report_type_cover_img').show();
                $('#migarefrence_report_type_remove_cover').val(0);
                $('#migarefrence_report_type_cover_file').val(file);
            }
        }
    }
});
$('#migarefrence_report_type_picture').click(function() {
    $('#migarefrence_report_type_file').trigger('click');
});
// **Report type button one icon ** //
$('#migarefrence_report_type_btn_one_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_report_type_btn_one_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_report_type_btn_one_cover_img').show();
                $('#migarefrence_report_type_btn_one_remove_cover').val(0);
                $('#migarefrence_report_type_btn_one_cover_file').val(file);
            }
        }
    }
});
$('#migarefrence_report_type_btn_one_picture').click(function() {
    $('#migarefrence_report_type_btn_one_file').trigger('click');
});
// **Report type button two icon ** //
$('#migarefrence_report_type_btn_two_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_report_type_btn_two_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_report_type_btn_two_cover_img').show();
                $('#migarefrence_report_type_btn_two_remove_cover').val(0);
                $('#migarefrence_report_type_btn_two_cover_file').val(file);
            }
        }
    }
});
$('#migarefrence_report_type_btn_two_picture').click(function() {
    $('#migarefrence_report_type_btn_two_file').trigger('click');
});
// **Add Report App content (Cover File)** //
$('#migarefrence_add_property_cover_cover_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            console.log("Result Files");
            console.log(data.result.files);
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 470;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            $('#migarefrence_add_property_cover_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + data.result.files).slideDown();
                $('#migarefrence_add_property_cover_cover_img').show();
                $('#migarefrence_add_property_cover_remove_cover').val(0);
                $('#migarefrence_add_property_c_c_file').val(data.result.files);
        }
    }
});
$('#migarefrence_add_property_cover_picture').click(function() {
    $('#migarefrence_add_property_cover_cover_file').trigger('click');
});
// **Referre report Conetn ** //
$('#migarefrence_referre_report_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_referre_report_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_referre_report_cover_img').show();
                $('#migarefrence_referre_report_remove_cover').val(0);
                $('#migarefrence_referre_report_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_referre_report_picture').click(function() {
    $('#migarefrence_referre_report_file').trigger('click');
});
// **REPORT STATUS App content ** //
$('#migarefrence_report_status_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migareference_qlf_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_report_status_cover_img').show();
                $('#migarefrence_report_status_remove_cover').val(0);
                $('#migarefrence_report_status_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});

/***For Enroll Url ***/
 
$('#migareference_enroll_url_cover_picture').on('click', function () {
    $('#migareference_enroll_url_cover_file_input').trigger('click');
});

// jQuery-File-Upload binding (same flow as qlf_cover_file)
$('#migareference_enroll_url_cover_file_input').fileupload({
    dataType: 'json',
    add: function (e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function (e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function (e, data) {
        if (data.result && data.result.error) {
            img_uploader.showError(data.result.message);
            return;
        }
        if (data.result && data.result.success) {
            img_uploader.hide();

            var params = [];
            params["url"]        = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"]       = data.result.files;
            params["output_w"]   = 300;
            params["output_h"]   = 300;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"]   = 'img_uploader';

            img_uploader.crop(params);

            // After crop callback
            img_uploader.callback = function (file) {
                // (kept parity with your existing pattern)
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');

                // Preview: tmp dir + cropped file
                var tmpUrl = '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file;

                // Hide old, then show new
                $('#migarefrence_settings_cover_img').hide().attr('src', tmpUrl).slideDown();
                $('#migareference_enroll_url_cover_img').show().attr('src', tmpUrl);

                // Flags & hidden inputs (IDs as given in your HTML)
                $('#migareference_enroll_url_remove_cover').val(0);
                $('#migareference_enroll_url_cover_file').val(file);

                // Show remove button if you want to allow clearing
                $('#remove_migareference_enroll_url_cover_img').show();

                // maintain your var if used elsewhere
                default_active_migarefrence_url = file;
            };
        }
    }
});

/***For Qualification ***/
/*** BOX: Icon / Cover ***/
$('#migareference_qlf_cover_picture').click(function() {
    $('#migareference_qlf_cover_file_input').trigger('click');
});

$('#migareference_qlf_cover_file_input').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migareference_qlf_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file);
                $('#migareference_qlf_remove_cover').val(0);
                $('#migareference_qlf_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});


/*** LEVEL 1: Icon / Cover ***/
$('#migareference_qlf_level_one_picture').click(function() {
    $('#migareference_qlf_level_one_file_input').trigger('click');
});

$('#migareference_qlf_level_one_file_input').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 400;
            params["output_h"] = 250;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migareference_qlf_level_one_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file);
                $('#migareference_qlf_level_one_remove_cover').val(0);
                $('#migareference_qlf_level_one_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});


/*** LEVEL 1 → Button One: Icon / Cover ***/
$('#migareference_qlf_level_one_btn_one_picture').click(function() {
    $('#migareference_qlf_level_one_btn_one_file_input').trigger('click');
});

$('#migareference_qlf_level_one_btn_one_file_input').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migareference_qlf_level_one_btn_one_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file);
                $('#migareference_qlf_level_one_btn_one_remove_cover').val(0);
                $('#migareference_qlf_level_one_btn_one_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});


/*** LEVEL 1 → Button Two: Icon / Cover ***/
$('#migareference_qlf_level_one_btn_two_picture').click(function() {
    $('#migareference_qlf_level_one_btn_two_file_input').trigger('click');
});

$('#migareference_qlf_level_one_btn_two_file_input').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migareference_qlf_level_one_btn_two_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file);
                $('#migareference_qlf_level_one_btn_two_remove_cover').val(0);
                $('#migareference_qlf_level_one_btn_two_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});


/*** LEVEL 2: Icon / Cover ***/
$('#migareference_qlf_level_two_picture').click(function() {
    $('#migareference_qlf_level_two_file_input').trigger('click');
});

$('#migareference_qlf_level_two_file_input').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 400;
            params["output_h"] = 250;
            params["output_url"] = '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find('#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migareference_qlf_level_two_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file);
                $('#migareference_qlf_level_two_remove_cover').val(0);
                $('#migareference_qlf_level_two_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});







$('#migarefrence_report_status_picture').click(function() {
    $('#migarefrence_report_status_file').trigger('click');
});
// **SETTINGS App content ** //
$('#migarefrence_settings_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_settings_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_settings_cover_img').show();
                $('#migarefrence_settings_remove_cover').val(0);
                $('#migarefrence_settings_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_settings_picture').click(function() {
    $('#migarefrence_settings_file').trigger('click');
});
// **How it works App content ** //
$('#ref_prz_custom_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#ref_prz_custom_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#ref_prz_custom_cover_img').show();
                $('#remove_ref_prz_custom_cover_img').show();
                $('#ref_prz_custom_migareference_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#ref_prz_custom_picture').click(function() {
    $('#ref_prz_custom_file').trigger('click');
});
$('#ref_credits_api_custom_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#ref_credits_api_custom_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#ref_credits_api_custom_cover_img').show();
                $('#remove_ref_credits_api_custom_cover_img').show();
                $('#ref_credits_api_custom_migareference_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#ref_credits_api_custom_picture').click(function() {
    $('#ref_credits_api_custom_file').trigger('click');
});
// **PhoneBook App content ** //
$('#migarefrence_phonebooks_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_phonebooks_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_phonebooks_cover_img').show();
                $('#migarefrence_phonebooks_remove_cover').val(0);
                $('#migarefrence_phonebooks_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_phonebooks_picture').click(function() {
    $('#migarefrence_phonebooks_file').trigger('click');
});
// **Statistics App content ** //
$('#migarefrence_statistics_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_statistics_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_statistics_cover_img').show();
                $('#migarefrence_statistics_remove_cover').val(0);
                $('#migarefrence_statistics_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_statistics_picture').click(function() {
    $('#migarefrence_statistics_file').trigger('click');
});
// **Reminders App content ** //
$('#migarefrence_reminders_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_reminders_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_reminders_cover_img').show();
                $('#migarefrence_reminders_remove_cover').val(0);
                $('#migarefrence_reminders_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_reminders_picture').click(function() {
    $('#migarefrence_reminders_file').trigger('click');
});
// **PRIZES App content ** //
$('#migarefrence_prizes_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 300;
            params["output_h"] = 300;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_prizes_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_prizes_cover_img').show();
                $('#migarefrence_prizes_remove_cover').val(0);
                $('#migarefrence_prizes_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_prizes_picture').click(function() {
    $('#migarefrence_prizes_file').trigger('click');
});
// **SAVE NEW PRIZE App content ** //
$('#migarefrence_prizes_icon_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migarefrence_prizes_icon_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#migarefrence_prizes_icon_cover_img').show();
                $('#migarefrence_prizes_icon_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#migarefrence_prizes_icon_picture').click(function() {
    $('#migarefrence_prizes_icon_file').trigger('click');
});
// **SAVE Report Reminder Reminder ** //
$('#rep_rem_icon_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 200;
            params["output_h"] = 200;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#active_migarefrence_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#rep_rem_icon_cover_img').hide().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#rep_rem_icon_cover_img').show();
                $('#rep_rem_icon_cover_file').val(file);
                default_active_migarefrence_url = file;
            }
        }
    }
});
$('#rep_rem_icon_picture').click(function() {
    console.log("This is Fine");
    $('#rep_rem_icon_file').trigger('click');
});

$('#rep-rem-type').on('change', function() {
    if (this.value == 1) {
        $("#rep-rem-push-allowed-tags").show();
        $("#rep-rem-push-warnig-tags").hide();
    } else {
        $("#rep-rem-push-allowed-tags").hide();
        $("#rep-rem-push-warnig-tags").show();
    }
});

$('#rep-rem-open-feature').on('change', function() {
    if (this.value == 1) {
        $("#rep-rem-feature-id-container").show();
    } else {
        $("#rep-rem-feature-id-container").hide();
    }
});
$('#rep-rem-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#rep-rem-custom-url-container").show();
    } else {
        $("#rep-rem-custom-url-container").hide();
    }
});
$('#new-note-open-feature').on('change', function() {
    if (this.value == 1) {
        $("#new-note-feature-id-container").show();
    } else {
        $("#new-note-feature-id-container").hide();
    }
});
$('#new-note-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#new-note-custom-url-container").show();
    } else {
        $("#new-note-custom-url-container").hide();
    }
});
$('#auto-rem-action').on('change', function() {
    autoReminderActionTypeTrigger(this.value == 1);
});

function autoReminderActionTypeTrigger(value) {
    if (value == 1) {
        $("#auto-rem-engagement-container").hide();
        $("#auto-rem-action-container").show();
    } else {
        $("#auto-rem-action-container").hide();
        $("#auto-rem-engagement-container").show();
    }
}
$('#auto-rem-trigger').on('change', function() {
    autoReminderTrigger(this.value);
});

function autoReminderTrigger(teiggerId) {
    $(".rem_opt").hide();
     $('.rem_opt' + teiggerId).show();
}

function addPrize() {
    $("#prizeListContainer").hide();
    $("#addPrizeContainer").show();
    $("#prize-operation").val("create");
    $("#migarefrence-prizes-id").val(0);
    $("#prize-name").val("");
    $("#credits-number").val(0);
    $("#prize-start-date").val("");
    $("#prize-expire-date").val("");
    $("#prize-description").val("");
    $("#migarefrence-prizes-id").val(0);
    $('#migarefrence_prizes_icon_cover_img').hide();
}

function showPrizelist() {
    $("#prizeListContainer").show();
    $("#addPrizeContainer").hide();
}

function prizeEdit(id) {
    $("#prizeListContainer").hide();
    $("#addPrizeContainer").show();
    $("#prize-operation").val("update");
    pkid = parseInt(id);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getrditprize'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                $("#prize-name").val(data[0].prize_name);
                $("#credits-number").val(data[0].credits_number);
                $("#prize-start-date").val(data[0].prize_start_date);
                $("#prize-expire-date").val(data[0].prize_expire_date);
                $("#redeemed-once").val(data[0].redeemed_once);

                $("#prize-link1").val(data[0].prize_link1);
                $("#prize-link1-btn-text").val(data[0].prize_link1_btn_text);
                $("#prize-link1-enable option[value=" + data[0].prize_link1_enable + "]").prop("selected", true);

                $("#prize-link2").val(data[0].prize_link2);
                $("#prize-link2-btn-text").val(data[0].prize_link2_btn_text);
                $("#prize-link2-enable option[value=" + data[0].prize_link2_enable + "]").prop("selected", true);

                $("#prize-description").val(data[0].prize_description);
                $("#migarefrence-prizes-id").val(data[0].migarefrence_prizes_id);
                $('#migarefrence_prizes_icon_cover_img').show().attr('src', data[0].prize_icon).slideDown();
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
// REMINDER SECTION
function addReminderType() {
    $('#reportreminderform').trigger("reset");
    $("#reminder-type-operation").val("create");
    $("#rep-rem-email-text").val("");
    // ICON File
    $('#rep_rem_icon_cover_img').show().attr('src', '');
    $('#c_rep_rem_icon_file').val('');
    // PUSH File
    $('#rep_rem_push_cover_img').show().attr('src', '');
    $('#rep_rem_c_migareference_cover_file').val('');
    $("#reminderTypeListContainer").hide();
    $("#addReminderTypeContainer").show();
}

function showReminderTypeList() {
    $("#reminderTypeListContainer").show();
    $("#addReminderTypeContainer").hide();
}

function addReminderAutomation() {
    $('#reportautoreminderform')[0].reset();
    $('#auto_rem_recap_email_template').val("");
    $("#reminder-auto-operation").val("create");
    $('#auto-rem-trigger').removeAttr('disabled', 'disabled');
    $("#reminderAutomationListContainer").hide();
    $("#addReminderAutomationContainer").show();
    autoReminderTrigger(1);
}

function showReminderAutomationList() {
    $("#reminderAutomationListContainer").show();
    $("#addReminderAutomationContainer").hide();
}

function editRepotReminder(id) {
    addReminderType();
    pkid = parseInt(id);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getrditremindertype'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                <?php  ?>
                $("#rep-rem-id").val(data.migarefrence_report_reminder_types_id);
                $("#reminder-type-operation").val("update");
                $("#rep-rem-title").val(data.rep_rem_title);
                $("#rep-rem-target-notification").val(data.rep_rem_target_notification);
                $("#rep-rem-badge option[value=" + data.rep_rem_badge + "]").prop("selected", true);
                $("#rep-rem-type option[value=" + data.rep_rem_type + "]").prop("selected", true);
                $("#rep-rem-before-email-hours").val(data.rep_rem_before_email_hours);
                $("#rep-rem-email-title").val(data.rep_rem_email_title);
                $("#rep-rem-email-text").val(data.rep_rem_email_text);
                $("#rep-rem-before-push-hours").val(data.rep_rem_before_push_hours);
                $("#rep-rem-push-title").val(data.rep_rem_push_title);
                $("#rep-rem-push-text").val(data.rep_rem_push_text);
                // ICON File
                rep_rem_icon = '<?= $applicationBasePath ?>' + data.rep_rem_icon_file;
                $('#rep_rem_icon_cover_img').show().attr('src', rep_rem_icon);
                $('#c_rep_rem_icon_file').val(data.rep_rem_icon_file);
                // PUSH File
                rep_rem_icon = '<?= $applicationBasePath ?>' + data.rep_rem_custom_file;
                $('#rep_rem_push_cover_img').show().attr('src', rep_rem_icon);
                $('#rep_rem_c_migareference_cover_file').val(data.rep_rem_custom_file);

            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}

function editAutoRepotReminder(id) {
    addReminderAutomation();
    pkid = parseInt(id);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getautoremindertype'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                autoReminderTrigger(data.auto_rem_trigger)
                $("#auto-rem-id").val(data.migarefrence_report_reminder_auto_id);
                $("#reminder-auto-operation").val("update");
                $("#auto-rem-title").val(data.auto_rem_title);
                $("#auto-rem-trigger option[value=" + data.auto_rem_trigger + "]").prop("selected", true);
                $('#auto-rem-trigger').prop('disabled', false);
                $('#auto-rem-trigger').attr('disabled', 'disabled');
                $('#auto-rem-trigger-copy').val(data.auto_rem_trigger);
                $('#auto-rem-fix-rating-copy').val(data.auto_rem_fix_rating);
                $("#auto-rem-action option[value=" + data.auto_rem_action + "]").prop("selected", true);
                autoReminderActionTypeTrigger(data.auto_rem_action);
                $("#auto-rem-type option[value=" + data.auto_rem_type + "]").prop("selected", true);
                $("#auto-rem-min-rating option[value=" + data.auto_rem_min_rating + "]").prop("selected", true);
                $("#auto-rem-max-rating option[value=" + data.auto_rem_max_rating + "]").prop("selected", true);
                $("#auto-rem-fix-rating option[value=" + data.auto_rem_fix_rating + "]").prop("selected", true);
                $('#auto-rem-fix-rating').prop('disabled', false);
                $('#auto-rem-fix-rating').attr('disabled', 'disabled');
                $("#auto-rem-trigger-hour option[value=" + data.auto_rem_trigger_hour + "]").prop("selected", true);
                $("#auto-rem-engagement option[value=" + data.auto_rem_engagement + "]").prop("selected", true);
                $("#auto-rem-status-list option[value=" + data.auto_rem_report_trigger_status + "]").prop("selected", true);
                $("#auto-rem-add-recap-email option[value=" + data.auto_rem_add_recap_email + "]").prop("selected", true);
                $("#auto-rem-percent option[value=" + data.auto_rem_percent + "]").prop("selected", true).attr('disabled', 'disabled');
                $("#auto-rem-days").val(data.auto_rem_days);
                $("#auto_rem_recap_email_template").val(data.auto_rem_recap_email_template);
                $("#auto_rem_recap_email_header").val(data.auto_rem_recap_email_header);
                $("#auto-rem-reports").val(data.auto_rem_reports);
                //WebHook fields
                $("#auto-rem-webhook-url").val(data.auto_rem_webhook_url);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}

function editJob(id) {
    $("#addJobs").show();
    $("#showJobs").hide();
    $("#job-operation").val("update");
    pkid = parseInt(id);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getsingejob'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                $("#job_title").val(data[0].job_title);
                $("#job_id").val(data[0].migareference_jobs_id);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
function editProfession(id) {
    $("#addprofessions").show();
    $("#showprofessions").hide();
    $("#profession-operation").val("update");
    pkid = parseInt(id);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getsingeprofession'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                $("#profession_title").val(data[0].profession_title);
                $("#profession_id").val(data[0].migareference_professions_id);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
var selectedReferrers = []; // Array to store selected referrer IDs
function assignAgent() {
    selectedReferrers = [];
    referrer_list_agent_filter_key=$("#ref_list_agent_filter").val();
    referrer_list_province_filter_key=$("#ref_list_province_filter").val();
    $("#asign-agent").show();
    $(".showProspectJobs").hide();
    $("#migarefrence_referrel_list").DataTable().destroy();
       // Initialize DataTable with server-side data and configuration
       var dt_object_first_order = $('#migarefrence_referrel_list').DataTable({
            "ajax": '<?php echo $this->getUrl('migareference/phonebook/referrerlist?type=1&app_id=' . $app_id . '&value_id=' . $option->getId()); ?>' + '&agent_key=' + referrer_list_agent_filter_key + '&rpovince_key=' + referrer_list_province_filter_key,
            "order": [[2, 'asc']],
            "columnDefs": [{ "type": "string", "targets": 4 }],
            "createdRow": function(row, data, dataIndex) {
                // Add a checkbox to the second column with the referrer ID as its value
                $('td', row).eq(1).html('<input type="checkbox" onchange="referrerSelection(this.value)" name="referrerCheckbox[]" value="' + data[0] + '">');
            },
            "initComplete": function(settings, json) {
                // Restore previously selected checkboxes after table initialization
                selectedReferrers.forEach(function(id) {
                    $('input[name="referrerCheckbox[]"][value="' + id + '"]').prop('checked', true);
                });
                updateSelectedCount(); // Update the selected count
            }
        });
    updateSelectedCount();
}
 // Function to handle individual checkbox selection
 function referrerSelection(referrerId) {
        var checkbox = $('input[name="referrerCheckbox[]"][value="' + referrerId + '"]');
        if (checkbox.is(':checked')) {
            // If the checkbox is checked, add the referrer ID to selectedReferrers
            if (!selectedReferrers.includes(referrerId)) {
                selectedReferrers.push(referrerId);
            }
        } else {
            // If the checkbox is unchecked, remove the referrer ID from selectedReferrers
            var index = selectedReferrers.indexOf(referrerId);
            if (index > -1) {
                selectedReferrers.splice(index, 1);
            }
        }
        updateSelectedCount(); // Update the selected count
    }

// Event listener for the "Select All" checkbox
$('#select-all').on('click', function() {
    var isChecked = $(this).is(':checked');
    $('input[name="referrerCheckbox[]"]').prop('checked', isChecked);
    if (isChecked) {
            // If "Select All" is checked, add all referrer IDs to selectedReferrers
            $('#migarefrence_referrel_list').DataTable().rows().every(function() {
                var data = this.data();
                if (!selectedReferrers.includes(data[0])) {
                    selectedReferrers.push(data[0]);
                }
            });
        } else {
            // If "Select All" is unchecked, remove all referrer IDs from selectedReferrers
            $('#migarefrence_referrel_list').DataTable().rows().every(function() {
                var data = this.data();
                var index = selectedReferrers.indexOf(data[0]);
                if (index > -1) {
                    selectedReferrers.splice(index, 1);
                }
            });
        }
    updateSelectedCount();
});
function updateSelectedCount() {
    $('#total_agent_selected').text(selectedReferrers.length);
}
function phonebookView() {
    $("#asign-agent").hide();
    $(".showProspectJobs").show();
}
function showProspectEdit(obj) {
    if (obj.value != 0) {
        editProspectJob(obj.value, 1,-1,0,0)
    }
}
async function getProvince(country_id,province_id) {
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/getprovincelist'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: country_id
                }
            }).done(function(data) {
                $("#address_province_id").html("");
                $("#address_province_id").append(data.data);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
                $("#address_province_id option[value=" +province_id+ "]").prop("selected", true)
            });
}
// Prospect Edit
function editProspectPhone(prospect_id) {
    $("#prospect_phone_form").show();
    $(".showProspectJobs").hide();
    $('#migarefrenceprospectphone').trigger("reset");
    $(".rating1").addClass("ratechecked").removeClass("rateunchecked");

    $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/getprospectitem'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    prospect_id: prospect_id
                }
            }).done(function(data) {
                $("#prospect_name").val(data[0].name);
                $("#prospect_surname").val(data[0].surname);
                $("#prospect_mobile").val(data[0].mobile);
                $("#prospect_email").val(data[0].email);
                $("#prospect_rating").val(data[0].rating);
                $("#migarefrence_prospect_id").val(data[0].migarefrence_prospect_id);
                $("#prospect_job_id option[value=" + data[0].job_id + "]").prop("selected", true);
                // Last Contact badge
                $("#prospect_communication_ref_badge").html("").append(
                "<span class='badge badge-assertive ng-binding' style='float: right;background-color: #e00d0d;'>" +
                data[0].lastcontact + "</span>");
                // Setup Rating Stars
                for (var i = 1; i < 6; i++) {
                    if (i <= data[0].rating) {
                        $(".rating" + i).addClass("ratechecked").removeClass("rateunchecked");
                    } else {
                        $(".rating" + i).addClass("rateunchecked").removeClass("ratechecked");
                    }
                }
                // Show Consent Time Stamp
                $("#prospect_gdpr_status").html("").append(data[0].gdpr_consent);
                // Load Communication Logs
                loadProspectCommunicationLog(data[0].migarefrence_prospect_id);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
}
// Prospect Edit
$('#address_country_id').on('change', function() {
    getProvince(this.value,0);
});
function editProspectJob(phonebook_id, type,terms_accepted,referrer_id,is_profiled) {
    $("#addProspectJobs").show();
    $(".showProspectJobs").hide();
    $('#migarefrenceprospectjob').trigger("reset");
    $(".rating1").addClass("ratechecked").removeClass("rateunchecked");
    phonebook_id = parseInt(phonebook_id);
    $("#terms_accepted_warrning").html("");
    if (type == 1) {
        if (is_profiled) {
            $("#open-matching-model").show();
        }else{
            $("#open-matching-model").hide();
        }
        $(".is_referrer").show();
        $("#custom-credits-for").val(referrer_id);
        if (!terms_accepted) {
            term_icon_path='<?php echo $root."terms_warrning.png"; ?>';
            term_icon_text='<?php echo __("Referrer did not accept T&C") ?>';
            $("#terms_accepted_warrning").append("<img src="+term_icon_path+" alt='' width='18px'><span>"+term_icon_text+"</span>");
        }
        // Print Referer Report Table
        if (referrer_id) {
            $("#phonebook_referrer_reports_container").show();
            $("#phonebook_custom_credit_container").show();
            $("#phonebook_credit_container").show();
            $("#ref_table_report_status").DataTable().destroy();
            $("#ref_table_report_status").show();
            dt_object.ajax =
                '<?php echo $this->getUrl('migareference/application/loadrefreportlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>&user_id=' +
                referrer_id;
            $('#ref_table_report_status').DataTable(dt_object);
            loadReferrerCredits(referrer_id);
        }else{
            $("#phonebook_referrer_reports_container").hide();
            $("#phonebook_custom_credit_container").hide();
            $("#phonebook_credit_container").hide();
        }
    } else {
        $(".is_referrer").hide();
    }
    if (phonebook_id) {
        $("#engagement_ref_pho_container,.phonebook_comm_log_container,#rating-container").show();
        $("#phonebook_password_container").hide();
        $(".phonebook_operation").hide();
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/phonebook/getphonebookitem'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: phonebook_id,
                    type: type,
                    referrer_id: referrer_id
                }
            }).done(function(data) {
                $("#phonebook_name").val(data[0].name);
                $("#phonebook_surname").val(data[0].surname);
                $("#phonebook_mobile").val(data[0].mobile);
                $("#phonebook_email").val(data[0].email);
                $("#phonebook_reciprocity_notes").val(data[0].reciprocity_notes);
                $("#phonebook_note").val(data[0].phone_note);
                $("#phonebook_invoice_id").val(data[0].invoice_id);
                $("#phonebook_user_id").val(data[0].customer_id);
                $("#phonebook_profession_id").val(data[0].profession_id);
                $("#phonebook_report_id").val(data[0].report_id);
                $("#referrer_type").val(data[0].referrer_type);
                $("#standard_customer_sponsor_id").val(data[0].customer_sponsor_id);
                $("#phonebook_customer_sponsor_id").val(data[0].customer_sponsor_id);
                $("#phonebook_partner_sponsor_id").val(data[0].partner_sponsor_id);
                //Start Referrer Main and Sub address
                if (data[0].enable_sub_address==1) {
                    $("#address_city").val(data[0].address_city);
                    $("#address_street").val(data[0].address_street);
                    $("#address_zipcode").val(data[0].address_zipcode);
                }else{
                    $(".ref_sub_address").hide();
                }

                $("#address_country_id option[value=" + data[0].address_country_id + "]").prop("selected", true);
                if (data[0].address_country_id) {
                    getProvince(data[0].address_country_id,data[0].address_province_id);
                }
                //END
                $("#phonebook_gdprconsent").html("").append(data[0].gdpr_consent);
                if (data[0].type == 1) {
                    var birth_date = data[0].birth_date;
                    $("#engagement_ref_pho_container").show();
                    $("#progross_title").html("").append(data[0].engagement_level);
                    progross_title = data[0].engagement_level * 10;
                    progross_title = progross_title + "%";
                    $("#engagement_progross").width(progross_title);
                } else {
                    $("#engagement_ref_pho_container").hide();
                    var birth_date = data[0].owner_dob;
                }
                $("#phonebook_birth_date").val(birth_date);
                $("#communication_ref_badge").html("").append(
                    "<span class='badge badge-assertive ng-binding' style='float: right;background-color: #e00d0d;'>" +
                    data[0].lastcontact + "</span>");
                $("#migarefrence_phonebook_id").val(data[0].migarefrence_phonebook_id);
                $("#phonebook_job_id option[value=" + data[0].job_id + "]").prop("selected", true);
                $("#phonebook_sponsor_id option[value=" + data[0].customer_sponsor_id + "]").prop("selected", true);
                // $("#partner_phonebook_sponsor_id option[value=" + data[0].partner_sponsor_id + "]").prop("selected", true);
                $("#phonebook_type option[value=" + data[0].type + "]").prop("selected", true);
                $("#phonebook_is_exclude option[value=" + data[0].is_exclude + "]").prop("selected", true);
                $("#phonebook_is_blacklist option[value=" + data[0].is_blacklist + "]").prop("selected", true);
                $("#phonebook_rating").val(data[0].rating);
                for (var i = 1; i < 6; i++) {
                    if (i <= data[0].rating) {
                        $(".rating" + i).addClass("ratechecked").removeClass("rateunchecked");
                    } else {
                        $(".rating" + i).addClass("rateunchecked").removeClass("ratechecked");
                    }
                }
                $("#phonebook_operation").val("update");
                loadCommunicationLog(phonebook_id);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    } else {
        $(".phonebook_operation").show();
        $("#engagement_ref_pho_container").hide();
        $(".phonebook_comm_log_container").hide();
        $("#rating-container").hide();
        $("#phonebook_operation").val("create");
    }
}
function prospectRefPhnDetail(phonebook_id, type) {
    $("#addProspectJobs").show();
    $(".showProspectJobs").hide();
    $('#migarefrenceprospectjob').trigger("reset");
    $(".rating1").addClass("ratechecked").removeClass("rateunchecked");
    phonebook_id = parseInt(phonebook_id);
    if (phonebook_id) {
        $("#engagement_ref_pho_container").show();
        $(".phonebook_comm_log_container").show();
        $("#rating-container").show();
        if (type == 1) {
            $(".is_referrer").show();
            $("#phonebook_password_container").hide();
        } else {
            $(".is_referrer").hide();
        }
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getprospectrefitem'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: phonebook_id,
                    type: type
                }
            }).done(function(data) {
                $("#phonebook_name").val(data[0].name);
                $("#phonebook_surname").val(data[0].surname);
                $("#phonebook_mobile").val(data[0].mobile);
                $("#phonebook_email").val(data[0].email);
                $("#phonebook_invoice_id").val(data[0].invoice_id);
                $("#phonebook_user_id").val(data[0].customer_id);
                $("#phonebook_report_id").val(data[0].report_id);
                $("#phonebook_gdprconsent").html("").append(data[0].gdpr_consent);
                if (data[0].type == 1) {
                    var birth_date = data[0].birth_date;
                    $("#engagement_ref_pho_container").show();
                    $("#progross_title").html("").append(data[0].engagement_level);
                    progross_title = data[0].engagement_level * 10;
                    progross_title = progross_title + "%";
                    $("#engagement_progross").width(progross_title);

                } else {
                    $("#engagement_ref_pho_container").hide();
                    var birth_date = data[0].owner_dob;
                }
                $("#phonebook_birth_date").val(birth_date);
                $("#communication_ref_badge").html("").append(
                    "<span class='badge badge-assertive ng-binding' style='float: right;background-color: #e00d0d;'>" +
                    data[0].lastcontact + "</span>");
                $("#migarefrence_phonebook_id").val(data[0].migarefrence_phonebook_id);
                $("#phonebook_job_id option[value=" + data[0].job_id + "]").prop("selected", true);
                $("#phonebook_type option[value=" + data[0].type + "]").prop("selected", true);
                $("#phonebook_is_exclude option[value=" + data[0].is_exclude + "]").prop("selected", true);
                $("#phonebook_is_blacklist option[value=" + data[0].is_blacklist + "]").prop("selected", true);
                $("#phonebook_rating").val(data[0].rating);
                for (var i = 1; i < 6; i++) {
                    if (i <= data[0].rating) {
                        $(".rating" + i).addClass("ratechecked").removeClass("rateunchecked");
                    } else {
                        $(".rating" + i).addClass("rateunchecked").removeClass("ratechecked");
                    }
                }
                $("#phonebook_operation").val("update");
                loadCommunicationLog(phonebook_id);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    } else {
        //   $(".phonebook_operation").show();
        $("#engagement_ref_pho_container").hide();
        $(".phonebook_comm_log_container").hide();
        $("#rating-container").hide();
        $("#phonebook_operation").val("create");
    }
}

function showReportReminderLog() {
    $("#postponereminderformcontainer").hide();
    $("#report-reminder-log-table").show();
}

function postponeReminder(reminderId) {
    $("#postponereminderformcontainer").show();
    $("#report-reminder-log-table").hide();
    reminderId = parseInt(reminderId);
    $.ajax({
            url: '<?php echo $this->getUrl('migareference/application/postponereminderitem'); ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                reminder_id: reminderId
            }
        }).done(function(data) {
            $("#rep_rem_type option[value=" + data.event_type + "]").prop("selected", true);
            $("#rep_rem_before option[value=" + data.reminder_before_type + "]").prop("selected", true);
            $("#rep_rem_note").val(data.reminder_content);
            $("#rep_rem_date").val(data.event_date);
            $("#rep_rem_time").val(data.event_time);
            $("#rep_rem_id").val(data.reminder_id);
        }).fail(function(data) {
            console.log("Fail");
        })
        .always(function() {
            console.log("complete");
        });
}
// Hide settings fields as per commission Type
comision_type = $("#comision_type").val();
reward_type = $("#reward_type").val();
if (reward_type == 1) {
    if (comision_type == 1 || comision_type == 3) {
        $("#percent_commission_container").show();
    } else if (comision_type == 2) {
        $("#fix_commission_container").show();
    }
    if (comision_type == 3) {
        $("#price_range_container").show();
    }
    $("#commission_lable_container").show();
} else if (reward_type == 2) {
    $("#credit_expire_container").show();
    if (comision_type == 1 || comision_type == 3) {
        $("#percent_commission_credits_container").show();
    } else if (comision_type == 2) {
        $("#fix_commission_credits_container").show();
    }
    if (comision_type == 3) {
        $("#price_range_container").show();
    }
}
// Hide Push staus drop from Add or update status
$(".push_status_add_status").hide();
//START: Status form checkboxesss controller
// Decline
$('#is_auto_declined').click(function() {
    if ($(this).prop("checked") == true) {
        $("#declined-grace-container").show();
        $("#is_comment").prop("checked", true);
        $("#is_comment").prop("disabled", true);
    } else if ($(this).prop("checked") == false) {
        $("#declined-grace-container").hide();
        $("#is_comment").prop("checked", false);
        $("#is_comment").prop("disabled", false);
    }
});
// Decline
$('#is_auto_reminder').click(function() {
    if ($(this).prop("checked") == true) {
        $("#reminer-notification-container").show();
    } else if ($(this).prop("checked") == false) {
        $("#reminer-notification-container").hide();
    }
});
// Manage Email Reminder Notifaction fileds per Selection
$('#reminder-email-notification-to-user').on('change', function() {
    if (this.value == 1) {
        $("#reminder_ref_email_form_fields").show();
        $("#reminder_agt_email_form_fields").show();
    } else if (this.value == 2) {
        $("#reminder_ref_email_form_fields").show();
        $("#reminder_agt_email_form_fields").hide();
    } else if (this.value == 3) {
        $("#reminder_ref_email_form_fields").hide();
        $("#reminder_agt_email_form_fields").show();
    }
});
// Manage (Report)Email Reminder Notifaction
$('#rep-rem-target-notification').on('change', function() {
    if (this.value == 1) {
        $("#rep-rem-email-container").show();
        $("#rep-rem-push-container").show();
    } else if (this.value == 2) {
        $("#rep-rem-email-container").show();
        $("#rep-rem-push-container").hide();
    } else if (this.value == 3) {
        $("#rep-rem-email-container").hide();
        $("#rep-rem-push-container").show();
    }
});
$('#geo_country').on('change', function() {
    loadGeoProvice(this.value, 0,'');
});
$('#enable_consent_collection').on('change', function() {
    if (this.value==1) {
      $("#gdpr_report_popup").show();
      $("#gdpr_invite_prospect_popup").hide();
    }else {
      $("#gdpr_report_popup").hide();
      $("#gdpr_invite_prospect_popup").show();
    }
});
function isInvitePopup(val) {
    if (val==1) {
      $(".is_invite_prospect_popup").show();
    }else {
      $(".is_invite_prospect_popup").hide();
    }
}
function isReportGdprPopup(val) {
    if (val==1) {
      $(".gdpr_consent_share").show();
    }else {
      $(".gdpr_consent_share").hide();
    }
}
function enableAgentManadorySelection(agent_count) {
    if (agent_count<1) {
        swal({
                    icon: 'warning',
                    title: '<?php echo __js('Attention', "'"); ?>',
                    text: '<?php echo __js('To enable the mandatory selection of an agent during registration, you must have codified at least one agent in the system.', "'"); ?>',
                    confirmButtonText: 'OK',  // Add the "OK" button
                    confirmButtonColor:'red'
                });
                $("#enable_mandatory_agent_selection option[value=" + 2 + "]").prop("selected", true);
    }
}
$('#sponsor_type_settings').on('change', function() {
    sponsor_type = this.value;
    if (this.value == 1) {
        $("#enable_mandatory_agent_selection").prop('disabled', false);
        $("#enable_main_address").prop('disabled', false);
        $("#mandatory_main_address").prop('disabled', false);
        $("#enable_sub_address").prop('disabled', false)
        $("#mandatory_sub_address").prop('disabled', false);

        $("#enable_multi_agent_selection").prop('disabled', true);
        $("#enable_multi_agent_selection option[value=" + 2 + "]").prop("selected", true);
    } else {
        $("#enable_main_address option[value=" + 1 + "]").prop("selected", true);
        $("#mandatory_main_address option[value=" + 1 + "]").prop("selected", true);
        $("#enable_sub_address option[value=" + 1 + "]").prop("selected", true);
        $("#mandatory_sub_address option[value=" + 1 + "]").prop("selected", true);
        $("#enable_mandatory_agent_selection").prop('disabled', true);
        $("#enable_multi_agent_selection").prop('disabled', false);
        $("#enable_main_address").prop('disabled', true);
        $("#mandatory_main_address").prop('disabled', true);
        $("#enable_sub_address").prop('disabled', true)
        $("#mandatory_sub_address").prop('disabled', true);
    }
});
$('#enable_multi_agent_selection').on('change', function() {
    console.log("Method type called");
    console.log(this.value);
    if (this.value == 1) {
        console.log("IF");
        $("#agent_type_label_one_container").show();
        $("#agent_type_label_two_container").show();
    } else {
        console.log("ELSE");
        $("#agent_type_label_one_container").hide();
        $("#agent_type_label_two_container").hide();
    }
});

function loadGeoProvice(country_id, province_id,province_code) {
    $.ajax({
            url: '<?php echo $this->getUrl('migareference/application/loadgeoprovice'); ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                country_id: country_id
            }
        })
        .done(function(data) {
            $("#geo_province").html("");
            $('#geo_province').append($('<option>', {
                value: 0,
                text: "<?php echo __("Add New Province") ?>"
            }));
            $.each(data.data, function(i, item) {
                $('#geo_province').append($('<option>', {
                    value: item.migareference_geo_provinces_id,
                    text: item.province
                }));
            });
            if (province_id != 0) {
                $("#geo_province option[value=" + province_id + "]").prop("selected", true);
                $("#province").val($("#geo_province option:selected").text());
                $("#province_code").val(province_code);
            }
        })
        .fail(function(data) {
            console.log("Fail");
        })
        .always(function() {
            console.log("completed");
        });
}
//...
$('#ref-prz-feature-id ').on('change', function() {
    if (this.value == 0) {
        $("#ref-prz-custom-url-container").show();
    } else {
        $("#ref-prz-custom-url-container").hide();
    }
});
$('#ref-credits-api-feature-id ').on('change', function() {
    if (this.value == 0) {
        $("#ref-credits-api-custom-url-container").show();
    } else {
        $("#ref-credits-api-custom-url-container").hide();
    }
});
$('#agt-prz-feature-id ').on('change', function() {
    if (this.value == 0) {
        $("#agt-prz-custom-url-container").show();
    } else {
        $("#agt-prz-custom-url-container").hide();
    }
});

$('#ref-credits-api-open-feature').on('change', function() {
    if (this.value==1) {
        $("#ref-credits-api-feature-id-container").show();
    }else{
        $("#ref-credits-api-feature-id-container").hide();
    }
});
$('#ref-credits-api-notification-type').on('change', function() {
    ref_credits_api_notification_type_view(this.value);
});

function ref_credits_api_notification_type_view(value) {
    if (value == 1) {
        $("#ref-credits-api-email-settings").show();
        $("#ref-credits-api-push-settings").show();
    } else if (value == 2) {
        $("#ref-credits-api-email-settings").show();
        $("#ref-credits-api-push-settings").hide();
    } else if (value == 3) {
        $("#ref-credits-api-email-settings").hide();
        $("#ref-credits-api-push-settings").show();
    }
}

// Manage PUSH feature fileds
$('#reminder-ref-is-feature').on('change', function() {
    if (this.value == 1) {
        $("#reminder-ref-feature-id-div").show();
    } else {
        $("#reminder-ref-feature-id-div").hide();
    }
});
$('#reminder-agt-is-feature').on('change', function() {
    if (this.value == 1) {
        $("#reminder-agt-feature-id-div").show();
    } else {
        $("#reminder-agt-feature-id-div").hide();
    }
});
$('#reminder-agt-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#reminder-div-custom-url-agt").show();
    } else {
        $("#reminder-div-custom-url-agt").hide();
    }
});
//Custom URL manager
$('#reminder-ref-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#reminder-div-custom-url-ref").show();
    } else {
        $("#reminder-div-custom-url-ref").hide();
    }
});
// Manage Email Reminder Notifaction fileds per Selection
$('#reminder-push-notification-to-user').on('change', function() {
    if (this.value == 1) {
        $("#reminder_ref_push_form_fields").show();
        $("#reminder_agt_push_form_fields").show();
    } else if (this.value == 2) {
        $("#reminder_ref_push_form_fields").show();
        $("#reminder_agt_push_form_fields").hide();
    } else if (this.value == 3) {
        $("#reminder_ref_push_form_fields").hide();
        $("#reminder_agt_push_form_fields").show();
    }
});

//  Status Icon
$('#migareference_status_icon_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 100;
            params["output_h"] = 100;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#push_migareference_status_icon_cover_img_<?php echo $this->getOptionValue()->getId(); ?>'
                );
                $('#migareference_status_icon_cover_img').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#c_migareference_status_icon_cover_file').val(file);
                $('#remove_migareference_status_icon_cover_img').show();
                $('#remove_migareference_status_icon_cover').val(0);
                $('#migareference_status_icon_cover_file').val(file);
                default_cover_url = file;
            }
        }
    }
});
$('#migareference_status_icon_picture').click(function() {
    $('#migareference_status_icon_file').trigger('click');
});
//  Refferral PUSH cover Image
$('#rep_rem_push_picture').click(function() {
    $('#rep_rem_push_file').trigger('click');
});
$('#rep_rem_push_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#rep_rem_push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>'
                );
                $('#rep_rem_push_cover_img').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                // $('#rep_rem_remove_migareference_cover_img').show();
                // $('#rep_rem_remove_migareference_cover').val(0);
                $('#rep_rem_push_cover_file').val(file);
                $('#rep_rem_c_migareference_cover_file').val(file);
                default_cover_url = file;
            }
        }
    }
});
$('#new_note_push_picture').click(function() {
    $('#new_note_push_file').trigger('click');
});
$('#new_note_push_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#new_note_push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>'
                );
                $('#new_note_push_cover_img').show().attr('src','<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#new_note_push_cover_file').val(file);
                $('#new_note_c_migareference_cover_file').val(file);
                default_cover_url = file;
            }
        }
    }
});
$('#reminder_migareference_picture').click(function() {
    $('#reminder_migareference_file').trigger('click');
});
$('#reminder_migareference_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#reminder_push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>'
                );
                $('#reminder_migareference_cover_img').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#reminder_remove_migareference_cover_img').show();
                $('#reminder_remove_migareference_cover').val(0);
                $('#reminder_migareference_cover_file').val(file);
                default_cover_url = file;
            }
        }
    }
});
// Agent PUSH cover Image
$('#reminder_migareference_picture_agt').click(function() {
    $('#reminder_migareference_file_agt').trigger('click');
});
$('#reminder_migareference_file_agt').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#reminder_push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>'
                );
                $('#reminder_migareference_cover_img_agt').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#reminder_remove_migareference_cover_img_agt').show();
                $('#reminder_remove_migareference_cover_agt').val(0);
                $('#reminder_migareference_cover_file_agt').val(file);
                default_cover_url = file;
            }
        }
    }
});
//END: Status form checkboxesss controller
$("#toggel-coupon-view-event").click(function() {
    $("#toggel-coupon-view").toggle(200);
});
$("#toggel-download-directory-view-event").click(function() {
    $("#toggel-download-directory-view").toggle(200);
});

$("#toggel-invoice-mobile-view-event").click(function() {
    $("#toggel-invoice-moble-view").toggle(200);
});
var load_addresses = 1;

function loadAddress() {
    if (load_addresses == 1) {
        loadpropertyAddresses();
        load_addresses++;
    }
}
var load_phonenumbers = 1;

function loadPhoneNumbers() {
    if (load_phonenumbers == 1) {
        loadpropertyPhoneNumbers();
        load_phonenumbers++;
    }
}
invoke_migration = 0;
$("#toggel-import-property").click(function() {
    $("#toggel-import-property-view").toggle(200);
    var dt_object_first_order = {
        responsive: true,
        language: {
            "decimal": "",
            "emptyTable": "<?php echo __js("No data available in table") ?>",
            "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
            "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
            "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
            "infoPostFix": "",
            "thousands": ",",
            "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
            "loadingRecords": "<?php echo __js("Loading...") ?>",
            "processing": "<?php echo __js("Processing...") ?>",
            "search": "<?php echo __js("Search:") ?>",
            "zeroRecords": "<?php echo __js("No matching records found") ?>",
            "paginate": {
                "first": "<?php echo __js("First") ?>",
                "last": "<?php echo __js("Last") ?>",
                "next": "<?php echo __js("Next") ?>",
                "previous": "<?php echo __js("Previous") ?>"
            },
            "aria": {
                "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
                "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
            }
        },
        "order": [
            [2, 'asc']
        ],
        bLengthChange: false,
        bFilter: true,
        sPaginationType: "full_numbers",
        fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            $.each(nRow.aoData, function(i, el) {
                var tr = $(el.nTr);
                tr.unbind('click');
            }.bind(this));
            $('.paginate_button').addClass('btn color-blue');
            $('span a.paginate_button').addClass('btn btn-grey');
        },
    };
});
$("#toggel-reminder-type-view-event").click(function() {
    $("#toggel-reminder-type-view").toggle(200);
});
$("#toggel-api-type-view-event").click(function() {
    $("#toggel-api-type-view").toggle(200);
});
$("#toggel-reminder-notification-view-event").click(function() {
    $("#toggel-reminder-notification-view").toggle(200);
});
$("#toggel-reminder-report-view-event").click(function() {
    $("#toggel-reminder-report-view").toggle(200);
});
$("#toggel-reminder-logs-view-event").click(function() {
    $("#toggel-reminder-logs-view").toggle(200);
});
$("#toggel-new-note-view-event").click(function() {
    $("#new-note-template-view").toggle(200);
});
$("#toggel-reminder-webhook-log-view-event").click(function() {
    $("#toggel-reminder-webhook-log-view").toggle(200);
});
$("#toggel-phonebook-prospect-view-event").click(function() {
    $("#toggel-phonebook-prospect-view").toggle(200);
});
$("#toggel-phonebook-referrer-view-event").click(function() {
    $("#toggel-phonebook-referrer-view").toggle(200);
});
$("#toggel-phonebook-contact-view-event").click(function() {
    $("#toggel-phonebook-contact-view").toggle(200);
});
$("#toggel-wellcom-email-view-event").click(function() {
    $("#toggel-wellcom-email-view").toggle(200);
});

function loadpropertyAddresses() {
    var dt_object_test = {
        responsive: true,
        language: {
            "decimal": "",
            "emptyTable": "<?php echo __js("No data available in table") ?>",
            "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
            "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
            "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
            "infoPostFix": "",
            "thousands": ",",
            "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
            "loadingRecords": "<?php echo __js("Loading...") ?>",
            "processing": "<?php echo __js("Processing...") ?>",
            "search": "<?php echo __js("Search:") ?>",
            "zeroRecords": "<?php echo __js("No matching records found") ?>",
            "paginate": {
                "first": "<?php echo __js("First") ?>",
                "last": "<?php echo __js("Last") ?>",
                "next": "<?php echo __js("Next") ?>",
                "previous": "<?php echo __js("Previous") ?>"
            },
            "aria": {
                "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
                "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
            }
        },
        "order": [
            [1, 'asc']
        ],
        bLengthChange: false,
        bFilter: true,
        sPaginationType: "full_numbers",
        fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            $.each(nRow.aoData, function(i, el) {
                var tr = $(el.nTr);
                tr.unbind('click');
            }.bind(this));
            $('.paginate_button').addClass('btn color-blue');
            $('span a.paginate_button').addClass('btn btn-grey');
        },
    };
    dt_object_test.ajax =
        '<?php echo $this->getUrl('migareference/application/loadpropertyaddresses?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
    $('#migarefrence_property_addresses').DataTable(dt_object_test);
    dt_object_test.ajax =
        '<?php echo $this->getUrl('migareference/application/loadexternaladdress?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
    $('#migarefrence_external_addresses').DataTable(dt_object_test);
}

function loadpropertyPhoneNumbers() {
    var dt_object_test = {
        responsive: true,
        language: {
            "decimal": "",
            "emptyTable": "<?php echo __js("No data available in table") ?>",
            "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
            "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
            "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
            "infoPostFix": "",
            "thousands": ",",
            "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
            "loadingRecords": "<?php echo __js("Loading...") ?>",
            "processing": "<?php echo __js("Processing...") ?>",
            "search": "<?php echo __js("Search:") ?>",
            "zeroRecords": "<?php echo __js("No matching records found") ?>",
            "paginate": {
                "first": "<?php echo __js("First") ?>",
                "last": "<?php echo __js("Last") ?>",
                "next": "<?php echo __js("Next") ?>",
                "previous": "<?php echo __js("Previous") ?>"
            },
            "aria": {
                "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
                "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
            }
        },
        bLengthChange: false,
        bFilter: true,
        sPaginationType: "full_numbers",
        fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            $.each(nRow.aoData, function(i, el) {
                var tr = $(el.nTr);
                tr.unbind('click');
            }.bind(this));
            $('.paginate_button').addClass('btn color-blue');
            $('span a.paginate_button').addClass('btn btn-grey');
        },
    };
}

function loadNewReportForm() {
    $.ajax({
            url: '<?php echo $this->getUrl('migareference/application/reportformbuilder'); ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                build_index: 1
            }
        })
        .done(function(data) {
            $("#report-form-container").html("").append(data.form_builder);
            $('#owner_mobile').val("+39");
            owneractiverNumber(3);
        })
        .fail(function(data) {
            console.log("Fail");
        })
        .always(function() {
            console.log("completed form bulideds");
        });
}

function deleteRepotReminder(id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deleterepotreminder'); ?>/id/' + id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}

function deleteAutoRepotReminder(id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deleteautorepotreminder'); ?>/id/' + id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}

function deleteCommLog(id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deletecommunicationlog'); ?>/id/' + id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
//Delete Job
function deleteJob(id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deletejob'); ?>/id/' + id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
function deleteProfession(id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deleteprofession'); ?>/id/' + id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
 function addNewNote() {

}



function deleteNote(note_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to delete?'); ?>',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, delete it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            var url = '<?php echo $this->getUrl('migareference/application/deletenote'); ?>/note_id/' + note_id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function sendRecapTestMail(recap_eamil) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('This test email will be sent with placeholder (dummy) data and will not use real reminder configurations. It will be delivered to the BCC email set in general settings. Do you want to proceed?'); ?>'+"("+recap_eamil+")",
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, Proceed it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(procced_recap){
        console.log("procced_recap", procced_recap);
        if (procced_recap) {
            var url = '<?php echo $this->getUrl('migareference/application/sendrecaptestmail'); ?>/app_id/' + <?php echo $app_id; ?> + '/recap_email/' + recap_eamil;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function sendrecaplivemail(recap_eamil) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('This test email will be sent using real customer data and actual reminder configurations. It will be delivered to the BCC email set in general settings. Do you want to proceed?'); ?>'+"("+recap_eamil+")",
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, Proceed it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(procced_recap){
        console.log("procced_recap", procced_recap);
        if (procced_recap) {
            var url = '<?php echo $this->getUrl('migareference/application/sendrecaplivemail'); ?>/app_id/' + <?php echo $app_id; ?> + '/recap_email/' + recap_eamil;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}
function deleteByReportReminder(reminder_id) {
    swal({
        title: '<?php echo __js('Confirmation'); ?>',
        text: '<?php echo __js('Are you sure you want to delete?'); ?>',
        icon: 'warning',
        buttons: true,
        dangerMode: true,
        showCancelButton: true,
        confirmButtonColor: '#DD6B55',
        confirmButtonText: '<?php echo __js('Yes, delete it!'); ?>',
        cancelButtonText: '<?php echo __js('No, cancel!'); ?>'
    }, function(willDelete){
        if (willDelete) {
            var url = '<?php echo $this->getUrl('migareference/application/deletebyreportreminder'); ?>/reminder_id/' + reminder_id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        } else {
            console.log("Deletion cancelled");
        }
    });
}

//Delete Geo
function deleteGeo(country_id, province_id) {
    var message = '<?php echo __("Are you sure you want to remove?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/deletegeo'); ?>/country_id/' + country_id +
            '/province_id/' + province_id;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
//Delete Status
function deleteStatus(status_id, is_standard, standard_type, total_reports) {
    var message = '<?php echo __("Are you sure you want to remove Status?"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/removestatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status_id/' +
            status_id + '/total_reports/' + total_reports + '/is_standard/' + is_standard;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
function revertMigration() {
    var message = '<?php echo __("Are you sure you want to Revert Migration?"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/revertmigration'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>';
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
// Order of status
$(function() {
    $(".status_order_list").sortable({
        start: function(event, ui) {
            ui.item.data('start_pos', ui.item.index());
        },
        update: function(event, ui) {
            $('.eliminatelink').each(function(i, obj) {
                if (i == 0) {
                    build_index = this.id;
                } else {
                    build_index += "*" + this.id;
                }
            });
            updatelinkorder(build_index);
        }
    });
});

function updatelinkorder(build_index) {
    if (build_index) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/updatelinkorder'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    build_index: build_index
                }
            })
            .done(function(data) {
                console.log("Response");
                console.log(data);
            })
            .fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
$(function() {
    $(".status_repot_field_list").sortable({
        start: function(event, ui) {
            ui.item.data('start_pos', ui.item.index());
        },
        update: function(event, ui) {
            $('.eliminatereortfiled').each(function(i, obj) {
                if (i == 0) {
                    build_index = this.id;
                } else {
                    build_index += "*" + this.id;
                }
            });
            console.log(build_index);
            updatreportfiledorder(build_index);
        }
    });
});

function updatreportfiledorder(build_index) {
    if (build_index) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/updatereportfieldbykey'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    build_index: build_index
                }
            })
            .done(function(data) {
                console.log("Response");
                console.log(data);
            })
            .fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
var latitude = "<?php echo count($app_data) && !is_null($app_data->data) ? $app_data->data->latitude : ''; ?>";
var longitude = "<?php echo count($app_data) && !is_null($app_data->data) ? $app_data->data->longitude : ''; ?>";
var map, marker, autocomplete;
var img_uploader = new Uploader();

var cpt = 0;
$('.replace-with-ckeditor').ckeditor();
//1->Add Form
$('#migarefrencePhonenumerImportForm').submit(function(e) {
    $("#mask").show();
    e.preventDefault();
    if ($('#migarefrence_phonenumber_import').val() == '') {
        $("#mask").hide();
        return;
    }
    var fd = new FormData();
    var files = $('#migarefrence_phonenumber_import')[0].files[0];
    fd.append('file', files);
    fd.append('value_id', $('#value_id').val());
    $.ajax({
        url: this.action,
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
    }).done(function(response) {
        $("#mask").hide();
        res = JSON.parse(response);
        $("#response_message_body").val(res.message);
        if (res.success == true) {
            $("#response_type").val(1);
        } else {
            $("#response_type").val(2);
        }
    }).fail(function(response) {
        console.log("Done");
    }).always(function(response) {
        $("#submit_response_form").trigger("click");
    });
    return false;
});
$('#migarefrenceImportForm').submit(function(e) {
    $("#mask").show();
    e.preventDefault();
    if ($('#migarefrence_import').val() == '') {
        $("#mask").hide();
        return;
    }
    var fd = new FormData();
    var files = $('#migarefrence_import')[0].files[0];
    fd.append('file', files);
    fd.append('value_id', $('#value_id').val());
    $.ajax({
        url: this.action,
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
    }).done(function(response) {
        $("#mask").hide();
        res = JSON.parse(response);
        $("#response_message_body").val(res.message);
        if (res.success == true) {
            $("#response_type").val(1);
        } else {
            $("#response_type").val(2);
        }
    }).fail(function(response) {
        console.log("Done");
    }).always(function(response) {
        $("#submit_response_form").trigger("click");
    });
    return false;
});
$('#migarefrenceJobsImportForm').submit(function(e) {
    $("#mask").show();
    e.preventDefault();
    if ($('#migarefrence_jobs_import').val() == '') {
        $("#mask").hide();
        return;
    }
    var fd = new FormData();
    var files = $('#migarefrence_jobs_import')[0].files[0];
    fd.append('file', files);
    fd.append('value_id', $('#value_id').val());
    $.ajax({
        url: this.action,
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
    }).done(function(response) {
        $("#mask").hide();
        res = JSON.parse(response);
        $("#response_message_body").val(res.message);
        if (res.success == true) {
            $("#response_type").val(1);
        } else {
            $("#response_type").val(2);
        }
    }).fail(function(response) {
        console.log("Done");
    }).always(function(response) {
        $("#submit_response_form").trigger("click");
    });
    return false;
});
$('#migarefrenceProfessionsImportForm').submit(function(e) {
    $("#mask").show();
    e.preventDefault();
    if ($('#migarefrence_profession_import').val() == '') {
        $("#mask").hide();
        return;
    }
    var fd = new FormData();
    var files = $('#migarefrence_profession_import')[0].files[0];
    fd.append('file', files);
    fd.append('value_id', $('#value_id').val());
    $.ajax({
        url: this.action,
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
    }).done(function(response) {
        $("#mask").hide();
        res = JSON.parse(response);
        $("#response_message_body").val(res.message);
        if (res.success == true) {
            $("#response_type").val(1);
        } else {
            $("#response_type").val(2);
        }
    }).fail(function(response) {
        console.log("Done");
    }).always(function(response) {
        $("#submit_response_form").trigger("click");
    });
    return false;
});
$('#newnotenotification,#customagents,#postponereminderform,#migarefrenceImportResponseform,#migarefrenceagentprovince,#migarefrencemanualconsent')
    .submit(function() {
        reload(this, this.action, true, function(data) {
            if (data.success) {
                page.reload();
            }
        });
        return false;
    });
$('#customcredits')
    .submit(function() {
        reload(this, this.action, true, function(data) {
            if (data.success) {
                showProspectJobs();
                resetRefPhoneFilter();
            }
        });
        return false;
    });
$('#addPreAppSettings').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#updatereport').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            showreporttable();
            filterReports();
        }
    });
    return false;
});
$('#updatebulkreport,#wellcomeemailform').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#gdprpopupsettings,#migarefrencgdprprivacy,#migarefrencgdprspecial').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#tempresponseform').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#reportautoreminderform').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            showReminderAutomationList();
            reminderTab('test');
        }
    });
    return false;
});
$('#migarefrencesingleaddress,#migarefrencesinglephonenumber,#migarefrencesingleprofession,#reportreminderform,#prizenotificationform,#gdpraction')
    .submit(function() {
        reload(this, this.action, true, function(data) {
            if (data.success) {
                page.reload();
            }
        });
        return false;
    });
$('#statusImportForm').submit(function(e) {
    $("#mask").show();
    e.preventDefault();
    if ($('#status_import').val() == '') {
        $("#mask").hide();
        return;
    }
    var fd = new FormData();
    var files = $('#status_import')[0].files[0];
    fd.append('file', files);
    fd.append('value_id', $('#value_id').val());
    $.ajax({
        url: this.action,
        type: 'post',
        data: fd,
        contentType: false,
        processData: false,
    }).done(function(response) {
        console.log("My Reposnse");
        res = JSON.parse(response);
        console.log(res);
        $("#response_message_body").val(res.message);
        if (res.success == true) {
            $("#response_type").val(1);
        } else {
            $("#response_type").val(2);
        }
    }).fail(function(response) {
        alert("error");
    }).always(function(response) {
        $("#mask").hide();
        $("#submit_response_form").trigger("click");
    });
    return false;
});
$('#prizeform, #creditsapitokenform, #creditsapiadminform, #enablecreditsapiform, #creditsapinotification').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#remindertypeform,#reportapiform,#reportwebhookform,#reportwebhooktestcallform,#referrerwebhooktestcallform,#newrefwebhookform,#adminapiform,#twillioapiform,#twilliotestform').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#migareferencePushForm,#reportwebhookerrormessageform,#referrerwebhookerrormessageform,#reminderwebhookerrormessageform').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#migareferenceEmailForm').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            backtoStatussettings();
            load_status_tab_content=0;
            statusTab();
        }
    });
    return false;
});
$('#appContent').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            page.reload();
        }
    });
    return false;
});
$('#saveNewReport').submit(function() {
    reload(this, this.action, true, function(data) {
        if (data.success) {
            if (data.address_error) {
                $("#response_message_body").val(data.address_error_message);
                $("#response_type").val(2);
                $("#submit_response_form").trigger("click");
            }
            if (data.mobile_error_message!='') {
                $("#response_message_body").val(data.mobile_error_message);
                $("#response_type").val(2);
                $("#submit_response_form").trigger("click");
            }
            showreporttable();
            filterReports();
        }
    });
    return false;
});

function validatePhonebook() {
    var dobModal = document.getElementById("dobModal");
    dob=$("#phonebook_birth_date").val();
    if (dob=="" || dob==null) {
        dobModal.style.display='block';
    }else{
        savePhonebook();
    }
}
$('#migarefrenceprospectjob').submit(
    function() {
        reload(this, this.action, true, function(data) {
            if (data.success) {
                showProspectJobs();
                resetRefPhoneFilter();
            }
        });
        return false;
    });
$('#delteaddress,#updatereportfield,#migarefrencesinglejobs,#migarefrencegeolocation,#migarefrenceprospectphone').submit(
    function() {
        reload(this, this.action, true, function(data) {
            if (data.success) {
                page.reload();
            }
        });
        return false;
    });
//Datatable Object
var dt_object = {
    responsive: true,
    language: {
        "decimal": "",
        "emptyTable": "<?php echo __js("No data available in table") ?>",
        "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
        "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
        "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
        "loadingRecords": "<?php echo __js("Loading...") ?>",
        "processing": "<?php echo __js("Processing...") ?>",
        "search": "<?php echo __js("Search:") ?>",
        "zeroRecords": "<?php echo __js("No matching records found") ?>",
        "paginate": {
            "first": "<?php echo __js("First") ?>",
            "last": "<?php echo __js("Last") ?>",
            "next": "<?php echo __js("Next") ?>",
            "previous": "<?php echo __js("Previous") ?>"
        },
        "aria": {
            "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
            "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
        }
    },
    "order": [
        [4, 'desc']
    ],
    bLengthChange: false,
    bFilter: true,
    sPaginationType: "full_numbers",
    fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(nRow.aoData, function(i, el) {
            var tr = $(el.nTr);
            tr.unbind('click');
        }.bind(this));
        $('.paginate_button').addClass('btn color-blue');
        $('span a.paginate_button').addClass('btn btn-grey');
    },
};

var dt_object_first_order = {
    responsive: true,
    language: {
        "decimal": "",
        "emptyTable": "<?php echo __js("No data available in table") ?>",
        "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
        "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
        "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
        "loadingRecords": "<?php echo __js("Loading...") ?>",
        "processing": "<?php echo __js("Processing...") ?>",
        "search": "<?php echo __js("Search:") ?>",
        "zeroRecords": "<?php echo __js("No matching records found") ?>",
        "paginate": {
            "first": "<?php echo __js("First") ?>",
            "last": "<?php echo __js("Last") ?>",
            "next": "<?php echo __js("Next") ?>",
            "previous": "<?php echo __js("Previous") ?>"
        },
        "aria": {
            "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
            "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
        }
    },
    bLengthChange: false,
    bFilter: true,
    sPaginationType: "full_numbers",
    fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(nRow.aoData, function(i, el) {
            var tr = $(el.nTr);
            tr.unbind('click');
        }.bind(this));
        $('.paginate_button').addClass('btn color-blue');
        $('span a.paginate_button').addClass('btn btn-grey');
    },
};
function deletedUsers() {
   dt_object_first_order.ajax = {
  url: '<?php echo $this->getUrl('migareference/application/deletedusers?app_id='.$app_id.'&value_id='.$option->getId()); ?>',
  success: function(data) {
    console.log("Success");
    console.log(data.data.length);
    if (data.data.length > 0) {
      var deletedusersModal = document.getElementById("deletedusersModal");
      deletedusersModal.style.display = 'block';
    }
  }
};
$('#table_deletedusers').DataTable(dt_object_first_order);
$("#table_deletedusers").DataTable().destroy();
dt_object_first_order.ajax = '<?php echo $this->getUrl('migareference/application/deletedusers?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#table_deletedusers').DataTable(dt_object_first_order);
console.log("ddddddddd");
}
deletedUsers();
function showAutomationEffects() {
    $("#automation_effects_table").DataTable().destroy();
    data = $("#reportautoreminderform").serialize();
    dt_object.ajax = '<?php echo $this->getUrl('migareference/application/automationeffecteduses?'); ?>' + data;
    $('#automation_effects_table').DataTable(dt_object);
}

function getPaidStatusColIndex() {
    var idx = -1;
    $('#table_appowners thead th').each(function(i) {
        // Trim and compare without extra spaces
        var txt = $(this).text().replace(/\s+/g, ' ').trim().toLowerCase();
        if (txt === "<?php echo strtolower(__('Enable Paid Status')); ?>?") {
            idx = i;
            return false; // break
        }
    });
    return idx;
}

/** Apply column visibility based on the select value */
function applyPaidStatusVisibility(dtInstance) {
    var value = $('select[name="agent_can_manage"]').val(); // "1" = Yes, "2" = No
    var paidIdx = getPaidStatusColIndex();
    if (paidIdx === -1) return; // header not found, skip

    // Show if "Yes" (1), hide otherwise
    var shouldShow = (String(value) === "1");
    dtInstance.column(paidIdx).visible(shouldShow, false); // false = don't recalc immediately
    dtInstance.columns.adjust().draw(false);
}

/** Your existing config, extended slightly */
var dt_admin_object = { 
    responsive: true,
    language: {
        "decimal": "",
        "emptyTable": "<?php echo __js("No data available in table") ?>",
        "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
        "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
        "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
        "loadingRecords": "<?php echo __js("Loading...") ?>",
        "processing": "<?php echo __js("Processing...") ?>",
        "search": "<?php echo __js("Search:") ?>",
        "zeroRecords": "<?php echo __js("No matching records found") ?>",
        "paginate": {
            "first": "<?php echo __js("First") ?>",
            "last": "<?php echo __js("Last") ?>",
            "next": "<?php echo __js("Next") ?>",
            "previous": "<?php echo __js("Previous") ?>"
        },
        "aria": {
            "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
            "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
        }
    },
    bLengthChange: false,
    bFilter: true,
    sPaginationType: "full_numbers",
    columnDefs: [
        {
            targets: 6, // your existing non-searchable column; keep as-is
            searchable: false
        }
        // NOTE: we don't hard-code the Paid Status column here; we toggle it dynamically.
    ],
    fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(nRow.aoData, function(i, el) {
            var tr = $(el.nTr);
            tr.unbind('click');
        }.bind(this));
        $('.paginate_button').addClass('btn color-blue');
        $('span a.paginate_button').addClass('btn btn-grey');
    },
    /** Ensure visibility is applied after the first init and after each ajax reload */
    initComplete: function() {
        var api = this.api();
        applyPaidStatusVisibility(api);
    }
};

function adminDefaultData() {
    dt_admin_object.ajax =
        '<?php echo $this->getUrl('migareference/application/appadmins?&app_id='.$app_id.'&value_id='.$option->getId()); ?>' + '&filter=default';

    var table = $('#table_appowners').DataTable(dt_admin_object);

    // Style buttons
    $(".admin-filter").addClass("btn-danger").removeClass("btn-info");
    $("#admin_filter_all_user").addClass("color-blue");

    // React to select changes live
    $('select[name="agent_can_manage"]').off('change._paidToggle').on('change._paidToggle', function(){
        applyPaidStatusVisibility(table);
    });
}

function adminFilter(filter, e) {
    $(".admin-filter").addClass("btn-danger").removeClass("btn-info");
    if (filter!='province') {
        $("#admin_province_filter").removeClass("color-blue");
        $(e).addClass("btn-info").removeClass("btn-danger");
    } else {
        $(e).addClass("color-blue");
    }

    var province_id = $('#admin_province_filter').find(":selected").val();

    // Rebuild table
    var $tbl = $("#table_appowners");
    if ($.fn.DataTable.isDataTable($tbl)) {
        $tbl.DataTable().destroy();
    }

    dt_admin_object.ajax =
        '<?php echo $this->getUrl('migareference/application/appadmins?&app_id='.$app_id.'&value_id='.$option->getId()); ?>' +
        '&filter=' + filter + '&province_id=' + province_id;

    var table = $tbl.DataTable(dt_admin_object);

    // Re-apply visibility after filter reinit
    table.one('draw', function() { applyPaidStatusVisibility(table); });

    // Ensure the handler is bound (in case the DOM was re-rendered)
    $('select[name="agent_can_manage"]').off('change._paidToggle').on('change._paidToggle', function(){
        applyPaidStatusVisibility(table);
    });
}

/** Boot */
$(function(){
    adminDefaultData();

    // In case the select exists before table init and you want immediate effect:
    $(document).ready(function(){
        var table = $('#table_appowners').DataTable();
        if (table) applyPaidStatusVisibility(table);
    });
});

dt_object.ajax =
    '<?php echo $this->getUrl('migareference/application/appgdprusers?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#table_gdprusers').DataTable(dt_object);

dt_object.ajax =
    '<?php echo $this->getUrl('migareference/application/reportledgers?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#table_report_ledgers').DataTable(dt_object);

$('#credits_referrer_filter').on('change', function() {
    referrer_filter_id = this.value;
    $("#credit_ledger").DataTable().destroy();
    dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/creditledger?app_id='.$app_id.'&value_id='.$option->getId()); ?>&referrer_id='+referrer_filter_id;
    $('#credit_ledger').DataTable(dt_object_first_order);
});
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/loadjobs?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#migarefrence_jobs').DataTable(dt_object_first_order);
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/loadprofessions?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#migarefrence_professions').DataTable(dt_object_first_order);

dt_object.ajax =
    '<?php echo $this->getUrl('migareference/application/getprize?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#table_prize_list').DataTable(dt_object);

dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/creditsapilog?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#credits_api_log').DataTable(dt_object_first_order);
dt_object_first_order.order = [[5, 'desc']];
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/referrerwebhooklogs?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#referrer_webhook_log').DataTable(dt_object_first_order);
dt_object_first_order.order = [[3, 'desc']];
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/reportwebhooklogs?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#report_webhook_log').DataTable(dt_object_first_order);
dt_object_first_order.order = [[3, 'desc']];
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/reminderwebhooklogs?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#reminder_webhook_log').DataTable(dt_object_first_order);
dt_object_first_order.order = [[0, 'asc']];
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/getmanageprize?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#table_manageprize_list').DataTable(dt_object_first_order);
// Status Tab Content
var load_status_tab_content=0
function statusTab() {
    if (!load_status_tab_content) {
        load_status_tab_content=1
        $("#table_push_log,#table_email_log,#twillio_logs_table").DataTable().destroy();

        dt_object_first_order.ajax =
        '<?php echo $this->getUrl('migareference/application/getpushlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table_push_log').DataTable(dt_object_first_order);

        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/getemaillog?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table_email_log').DataTable(dt_object_first_order);

        // dt_object_first_order.ajax =
        //     '<?php echo $this->getUrl('migareference/application/getwilliologs?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        // $('#twillio_logs_table').DataTable(dt_object_first_order);
    }
}

function reminderTab(param) {
    if (param=='live') {
        $("#table-reminder-type-list,#table-reminder-auto-list,#table-auto-reminder-reset-log,#table-report-reminder-log").DataTable().destroy();
        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/getreportreminder?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table-reminder-type-list').DataTable(dt_object_first_order);
        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/getautoreminder?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table-reminder-auto-list').DataTable(dt_object_first_order);
        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/getreporteminders?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table-report-reminder-log').DataTable(dt_object_first_order);
        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/reminderresetlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table-auto-reminder-reset-log').DataTable(dt_object_first_order);
        loadReminderAutoLogs();//to load reminder automation logs
        loadNewNoteTemplates();
    }else{
        $("#table-reminder-auto-list").DataTable().destroy();
        dt_object_first_order.ajax =
            '<?php echo $this->getUrl('migareference/application/getautoreminder?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
        $('#table-reminder-auto-list').DataTable(dt_object_first_order);
    }

}
function loadReminderAutoLogs() {
    $("#table-auto-reminder-log").DataTable().destroy();
    // Get Filter values
    trigger=$("#auto-rem-log-trigger-filter").val();
    assigned_to=$("#auto-rem-log-assigned-filter").val();
    reminder_status=$("#auto-rem-log-status-filter").val();
    // Clone the dt_object_first_order configuration for diffrent sort configrationrs
    var dt_object_for_auto_reminder_log = $.extend(true, {}, dt_object_first_order);
    dt_object_for_auto_reminder_log.order = [[0, 'desc']];
    dt_object_for_auto_reminder_log.ajax =
        '<?php echo $this->getUrl('migareference/application/getreferrerreminders?app_id='.$app_id.'&value_id='.$option->getId()); ?>'+'&trigger='+trigger+'&assigned_to='+assigned_to+'&reminder_status='+reminder_status;
    $('#table-auto-reminder-log').DataTable(dt_object_for_auto_reminder_log);
}
function loadNewNoteTemplates() {
            $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getnewnotetemplate'); ?>',
                type: 'POST',
                dataType: 'json'
            }).done(function(data) {
                if (data) {
                    // Populate form fields with data
                    $('#migarefrence_new_note_notification_id').val(data.migarefrence_new_note_notification_id);
                    $("#new-note-target-notification option[value='" + data.new_note_target_notification + "']").prop('selected', true);
                    $('#new-note-email-title').val(data.new_note_email_title);
                    $('#new-note-email-text').val(data.new_note_email_text);
                    $('#new-note-push-title').val(data.new_note_push_title);
                    $('#new-note-push-text').val(data.new_note_push_text);
                    $("#new-note-open-feature option[value='" + data.new_note_open_feature + "']").prop('selected', true);
                    if (data.new_note_open_feature) {
                        $("#new-note-feature-id-container").show();
                        $("#new-note-feature-id option[value='" + data.new_note_feature_id + "']").prop('selected', true);
                        if (data.new_note_feature_id==0) {
                            $("#new-note-custom-url-container").show();
                            $('#new-note-custom-url').val(data.new_note_custom_url);
                        }else{
                            $("#new-note-custom-url-container").hide();
                        }
                    }else{
                        $("#new-note-feature-id-container").hide();
                    }
                    // Handle CKEditor instances if any
                    if (CKEDITOR.instances['new-note-email-text']) {
                        CKEDITOR.instances['new-note-email-text'].setData(data.new_note_email_text);
                    }
                    // PUSH File
                    new_note_icon = '<?= $applicationBasePath ?>' + data.new_note_custom_file;
                    $('#new_note_push_cover_img').show().attr('src', new_note_icon);
                    $('#new_note_c_migareference_cover_file').val(data.new_note_custom_file);

                }
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
}

function loadCommunicationLog(phonebook_id) {
    $("#phonebook_comm_log").DataTable().destroy();
    dt_object.ajax =
        '<?php echo $this->getUrl('migareference/application/getcommlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>' +
        "&key=" + phonebook_id;
    $('#phonebook_comm_log').DataTable(dt_object);
}
function loadReferrerCredits(referrer_filter_id) {
    $("#referrer_credit_ledger").DataTable().destroy();
    dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/creditledger?app_id='.$app_id.'&value_id='.$option->getId()); ?>&referrer_id='+referrer_filter_id;
    $('#referrer_credit_ledger').DataTable(dt_object_first_order);
}
function loadProspectCommunicationLog(phonebook_id) {
    $("#prospect_comm_log").DataTable().destroy();
    dt_object.ajax =
        '<?php echo $this->getUrl('migareference/application/getcommlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>' +
        "&key=" + phonebook_id;
    $('#prospect_comm_log').DataTable(dt_object);
}

function addCommLog() {
    phonebook_id = $("#migarefrence_phonebook_id").val();
    note = $("#comm-manual-log-note").val();
    var message = '<?php echo __("Are you sure you want to add Manual Log?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/addcommunicationlog'); ?>/phonebook_id/' +
            phonebook_id + '/note/' + note;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                loadCommunicationLog(phonebook_id)
            }
        });
    }
}
function addProspectCommLog() {
    prospect_id = $("#migarefrence_prospect_id").val();
    note = $("#prospect-comm-manual-log-note").val();
    var message = '<?php echo __("Are you sure you want to add Manual Log?"); ?>';
    if (confirm(message)) {
        var url = '<?php echo $this->getUrl('migareference/application/addcommunicationlog'); ?>/phonebook_id/' +
            prospect_id + '/note/' + note;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                loadProspectCommunicationLog(prospect_id)
            }
        });
    }
}
//Background
$('#tab_background button#toggle_design').remove();
$('#tab_background #change_background_image').show();

function loadsponsors(key) {
    dt_object_first_order.ajax =
        '<?php echo $this->getUrl('migareference/application/referralusers?app_id='.$app_id.'&value_id='.$option->getId()); ?>&key=' +
        key;
    $('#table_referral_users').DataTable(dt_object_first_order);
}

// Provinces Filtring
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/loadgeocountries?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#migarefrence_geocountries').DataTable(dt_object_first_order);
var country_id = 0; //For showing all countries list
function loadProvincelist() {
    dt_object_first_order.ajax =
        '<?php echo $this->getUrl('migareference/application/loadgeolocations?app_id='.$app_id.'&value_id='.$option->getId()); ?>&country_id=' +
        country_id;
    $('#migarefrence_geolocations').DataTable(dt_object_first_order);
}
loadProvincelist();
$('#prospect_job_filter').on('change', function() {
    console.log("Change");
    country_id = this.value;
    $("#migarefrence_geolocations").DataTable().destroy();
    loadProvincelist();
});
// Contacts Phonebook
dt_object_first_order.ajax =
    '<?php echo $this->getUrl('migareference/application/loadcontactsphonebook?app_id='.$app_id.'&value_id='.$option->getId()); ?>';
$('#migarefrence_contacts_phonebook').DataTable(dt_object_first_order);
// Prospect PhoneBook Filtring
var job_filter_key = 0;
var rating_filter_key = 0;

function loadprospectphonebook() {
    dt_object_first_order.ajax ='<?php echo $this->getUrl('migareference/application/loadprospectphonebook?type=2&app_id='.$app_id.'&value_id='.$option->getId()); ?>&job_filter_key=' +job_filter_key + '&rating_filter_key=' + rating_filter_key+"&sponsor_key="+sponsor_key;
    dt_object_first_order.columnDefs=[{ "type": "date-eu", targets: 8 }];
    $('#migarefrence_prospect_jobs').DataTable(dt_object_first_order);
}
loadprospectphonebook(0);
$('#phonebook_prospect_job_filter').on('change', function() {
    job_filter_key = this.value;
    $("#migarefrence_prospect_jobs").DataTable().destroy();
    loadprospectphonebook();
});

function prospectRatingFilter(rating_val) {
    for (var i = 1; i < 6; i++) {
        if (i <= rating_val) {
            $(".rating" + i).addClass("ratechecked").removeClass("rateunchecked");
        } else {
            $(".rating" + i).addClass("rateunchecked").removeClass("ratechecked");
        }
    }
    rating_filter_key = rating_val;
    $("#migarefrence_prospect_jobs").DataTable().destroy();
    loadprospectphonebook();
}
// Referrer PhoneBook Filtring
var job_filter_key = 0;
var engagement_filter_key = 0;
var rating_filter_key = 0;
var profession_filter_key = 0;
var range_filter_key = 0;
var terms_filter_key = -1;
var sponsor_key = -1;
var ref_reports_count = -1;
var ref_last_contact = -1;
var ref_province = 0;

$('#ref_phone_agent_filter').on('change', function() {
    sponsor_key = this.value;
    loadreferrerphonebook();
});
$('#ref_pho_province_filter').on('change', function() {
    ref_province = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_rep_count_filter').on('change', function() {
    ref_reports_count = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_last_contact_filter').on('change', function() {
    ref_last_contact = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_rating_filter').on('change', function() {
    rating_filter_key = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_job_filter').on('change', function() {
    job_filter_key = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_sector_filter').on('change', function() {
    profession_filter_key = this.value;
    loadreferrerphonebook();
});
$('#ref_phone_range_filter').on('change', function() {
    range_filter_key = this.value;
    loadreferrerphonebook();
});
$('#ref_profiled_filter').on('change', function() {
    ref_profiled_filter = this.value;
    loadreferrerphonebook();
});
function resetRefPhoneFilter() {
    // Reset filter variables
    job_filter_key = -1;
    ref_province = 0;
    rating_filter_key = 0;
    profession_filter_key = -1;
    range_filter_key = 0;
    ref_profiled_filter = 0;
    sponsor_key = -1;
    ref_reports_count = -1;
    ref_last_contact = -1;
    terms_filter_key = -1;

    // Update dropdown selections to match reset values
    $('#ref_phone_agent_filter').val(sponsor_key);
    $('#ref_pho_province_filter').val(ref_province);
    $('#ref_phone_rep_count_filter').val(ref_reports_count);
    $('#ref_phone_last_contact_filter').val(ref_last_contact);
    $('#ref_phone_rating_filter').val(rating_filter_key);
    $('#ref_phone_job_filter').val(job_filter_key);
    $('#ref_phone_sector_filter').val(profession_filter_key);
    $('#ref_phone_range_filter').val(range_filter_key);
    $('#ref_profiled_filter').val(ref_profiled_filter);

    // Reload the phone book
    loadreferrerphonebook();
}

function referrerTermsFilter() {
    terms_filter_key=0;
    loadreferrerphonebook();
}
function loadreferrerphonebook() {
    $("#migarefrence_referrel_phonebook").DataTable().destroy();
    dt_object_first_order.ajax ='<?php echo $this->getUrl('migareference/application/loadreferrerphonebook?type=1&app_id='.$app_id.'&value_id='.$option->getId()); ?>'+'&rating_filter_key=' + rating_filter_key +"&sponsor_key="+sponsor_key+"&ref_reports_count="+ref_reports_count+"&ref_last_contact="+ref_last_contact+"&ref_province="+ref_province+"&terms_filter_key="+terms_filter_key+"&job_filter_key="+job_filter_key+"&profession_filter_key="+profession_filter_key+"&range_filter_key="+range_filter_key+"&ref_profiled_filter="+ref_profiled_filter;
    dt_object_first_order.columnDefs=[{ "type": "date-eu", targets: 4 }];
    var referrer_table = $('#migarefrence_referrel_phonebook').DataTable(dt_object_first_order);
}
loadreferrerphonebook();

function chnageRedeemstatus(obj) {
    key = obj.value;
    var message = (key == 0) ? '<?php echo __("Are you sure you want to update status?"); ?>' :
        '<?php echo __("Are you sure you want to update status?"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/updateredeemstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/key/' +
            key;
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}

//START: Show adn Edit Report Detail Report
function remindertypeStatus(status, id) {
    if (status && id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to enable?"); ?>' :
            '<?php echo __("Are you sure you want to disable?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/remindertypestatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/id/' + id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function gotoReportDetail(reportId) {
    reportdetail(reportId);
    $("ul.nav-tabs li:first-child a").click();
}

function manuallyDoneReminder(reminderId, reportId, referrerId) {
    if (reminderId && reportId) {
        var message = '<?php echo __("Are you sure you want to Done this Reminder?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/manuallydonereminder'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/report_id/' +
                reportId + '/referrer_id/' + referrerId + '/reminder_id/' + reminderId;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function ownerStatus(status, customer_id) {
    if (status && customer_id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to set this user as an Admin?"); ?>' :
            '<?php echo __("Are you sure you want to unset this user as an Admin?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/ownerstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/customer_id/' + customer_id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function contactTransfer(customer_id) {
    if (customer_id) {
        var message =
            '<?php echo __("Warning! You accept the terms and conditions of the referrers program on behalf of the referrer. Are you sure you have collected his/her consent offline?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/contactransfer'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/customer_id/' +
                customer_id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function enableAutoReminder(status, id) {
    if (status && id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to change status?"); ?>' :
            '<?php echo __("Are you sure you want to change status?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/autoreminderstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/id/' + id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function agentStatus(status, customer_id,agent_count,sponsor_mandatoroy_settings,multiple_agent) {
    if (status && customer_id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to set this user as an Agent?"); ?>' :'<?php echo __("Are you sure you want to unset this user as an Agent?"); ?>';
        if (confirm(message)) {
            if (status==2 && sponsor_mandatoroy_settings==1 && agent_count<2) {  // This will show a warrnig when mandatory is enabled and last agent is also deleted
                swal({
                        title: '<?php echo __js('Confirmation', "'"); ?>',
                        text: '<?php echo __js('Under this action we will automatically disabled the mandatory selection of an agent because there is no agent codified in the system', "'"); ?>',
                        showCancelButton: true,
                        confirmButtonColor: '#0099C7',
                        confirmButtonText: '<?php echo __js('Yes, do it', "'"); ?>'+'!',
                        cancelButtonText: '<?php echo __js('No, go back', "'"); ?>',
                        buttons: true
                    }, function(value) {
                        if (value) {  //Mandatory agent confirmation
                            if (multiple_agent==1) { //check if mutli agent is enables then ask which type of agent you like to create
                                document.getElementById("agenttypeModal").style.display = "block";
                                $('#multi_agent_customer').val(customer_id);
                            }else{
                                var url ='<?php echo $this->getUrl('migareference/application/agentstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +status + '/customer_id/' + customer_id+ '/agent_type/' + 1;
                                reload(this, url, true, function(datas) {if (datas.success) {page.reload();}});
                            }
                        }
                    });
            }else{
                if (multiple_agent==1 && status==1) { //check if mutli agent is enables then ask which type of agent you like to create
                    document.getElementById("agenttypeModal").style.display = "block";
                    $('#multi_agent_customer').val(customer_id);
                    $('#multi_agent_status').val(status);
                }else{
                    var url ='<?php echo $this->getUrl('migareference/application/agentstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +status + '/customer_id/' + customer_id+ '/agent_type/' + 1;
                    reload(this, url, true, function(datas) {if (datas.success) {page.reload();}});
                }
            }
        }
    }
}

    function agentbulkassignment() {
        action_type=$("#action_type").val();//choose,remove,assign
        var message = (action_type == 'remove') ? '<?php echo __js("This will remove the agent from the selected referrer(s). Do you want to continue?"); ?>' :'<?php echo __("This will assign the selected agent to the referrer(s). Do you want to continue?"); ?>';

                swal({
                        title: '<?php echo __js('Confirmation', "'"); ?>',
                        text: message,
                        showCancelButton: true,
                        confirmButtonColor: '#0099C7',
                        confirmButtonText: '<?php echo __js('Yes, do it', "'"); ?>'+'!',
                        cancelButtonText: '<?php echo __js('No, go back', "'"); ?>',
                        buttons: true
                    }, function(value) {
                        if (value) {
                            // Submit the form
                            $('#agentbulkassignment').submit();
                        } else {
                            console.log("Nothing");
                        }
                    });

    }
// Bind the submit event handler outside the swal callback
$('#agentbulkassignment').submit(function(e) {
        e.preventDefault(); // Prevent default form submission
        reload(this, this.action, true, function(data) {
            if (data.success) {
                page.reload();
            }
        });
    });
function savemultiagent() {
    customer_id=$('#multi_agent_customer').val();
    status=$('#multi_agent_status').val();
    agent_type = $("input[name='multi_agent_type']:checked").val();
    var url ='<?php echo $this->getUrl('migareference/application/agentstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +status + '/customer_id/' + customer_id+ '/agent_type/' + agent_type;
                reload(this, url, true, function(datas) {
                    if (datas.success) {
                        page.reload();
                    }
                });
}
function socailshareStatus(status, customer_id) {
    if (status && customer_id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to Disable social share?"); ?>' :
            '<?php echo __("Are you sure you want to social share?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/socialsharestatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/customer_id/' + customer_id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function prizeStatus(status, id) {
    if (status && id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to Disable this prize?"); ?>' :
            '<?php echo __("Are you sure you want to Disable this prize?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/prizestatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/id/' + id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function setBlackList(status, id) {
    if (status && id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to update this Phone Number?"); ?>' :
            '<?php echo __("Are you sure you want to update this Phone Number?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/setblacklist'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/id/' + id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function setExcludeList(status, id) {
    if (status && id) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to update this Phone Number?"); ?>' :
            '<?php echo __("Are you sure you want to update this Phone Number?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/setexcludelist'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/id/' + id;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}

function userStatus(status, settingsid) {
    if (status && settingsid) {
        var message = (status == 1) ? '<?php echo __("Are you sure you want to activate this user?"); ?>' :
            '<?php echo __("Are you sure you want to Disable this user?"); ?>';
        if (confirm(message)) {
            var url =
                '<?php echo $this->getUrl('migareference/application/userstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>/status/' +
                status + '/setingsid/' + settingsid;
            reload(this, url, true, function(datas) {
                if (datas.success) {
                    page.reload();
                }
            });
        }
    }
}
var dt_object = {
    responsive: true,
    language: {
        "decimal": "",
        "emptyTable": "<?php echo __js("No data available in table") ?>",
        "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
        "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
        "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
        "loadingRecords": "<?php echo __js("Loading...") ?>",
        "processing": "<?php echo __js("Processing...") ?>",
        "search": "<?php echo __js("Search:") ?>",
        "zeroRecords": "<?php echo __js("No matching records found") ?>",
        "paginate": {
            "first": "<?php echo __js("First") ?>",
            "last": "<?php echo __js("Last") ?>",
            "next": "<?php echo __js("Next") ?>",
            "previous": "<?php echo __js("Previous") ?>"
        },
        "aria": {
            "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
            "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
        }
    },
    bLengthChange: false,
    bFilter: true,
    sPaginationType: "full_numbers",
    fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(nRow.aoData, function(i, el) {
            var tr = $(el.nTr);
            tr.unbind('click');
        }.bind(this));
        $('.paginate_button').addClass('btn color-blue');
        $('span a.paginate_button').addClass('btn btn-grey');
    },
};


var dt_object_report = {
    responsive: true,
    language: {
        "decimal": "",
        "emptyTable": "<?php echo __js("No data available") ?>",
        "info": "<?php echo __js("Showing _START_ to _END_ of _TOTAL_ entries") ?>",
        "infoEmpty": "<?php echo __js("Showing 0 to 0 of 0 entries") ?>",
        "infoFiltered": "<?php echo __js("(filtered from _MAX_ total entries)") ?>",
        "infoPostFix": "",
        "thousands": ",",
        "lengthMenu": "<?php echo __js("Show _MENU_ entries") ?>",
        "loadingRecords": "<?php echo __js("Loading...") ?>",
        "processing": "<?php echo __js("Processing...") ?>",
        "search": "<?php echo __js("Search:") ?>",
        "zeroRecords": "<?php echo __js("No matching records found") ?>",
        "paginate": {
            "first": "<?php echo __js("First") ?>",
            "last": "<?php echo __js("Last") ?>",
            "next": "<?php echo __js("Next") ?>",
            "previous": "<?php echo __js("Previous") ?>"
        },
        "aria": {
            "sortAscending": "<?php echo __js(": activate to sort column ascending") ?>",
            "sortDescending": "<?php echo __js(": activate to sort column descending") ?>"
        }
    },
    "order": [
        [4, 'desc']
    ],
    bLengthChange: false,
    bFilter: true,
    sPaginationType: "full_numbers",
    fnDrawCallback: function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $.each(nRow.aoData, function(i, el) {
            var tr = $(el.nTr);
            tr.unbind('click');
        }.bind(this));
        $('.paginate_button').addClass('btn color-blue');
        $('span a.paginate_button').addClass('btn btn-grey');
    },
};
dt_object_report.ajax =
    '<?php echo $this->getUrl('migareference/application/reportstatus?key=0&app_id='.$app_id.'&value_id='.$option->getId()); ?>';
report_table = $('#table_report_status').DataTable(dt_object_report);

function filterReports() {
    var status_filter_key = $('#report_filter_status').find(":selected").val();
    var referrer_filter_key = $('#report_filter_referrer').find(":selected").val();
    var agent_filter_key = $('#report_filter_agent').find(":selected").val();
    var report_filter_reporttype = $('#report_filter_reporttype').find(":selected").val();
    $("#table_report_status").DataTable().destroy()
    dt_object_report.ajax =
        '<?php echo $this->getUrl('migareference/application/reportstatus?&app_id='.$app_id.'&value_id='.$option->getId()); ?>&status_key=' +
        status_filter_key+'&referrer_key='+referrer_filter_key+"&agent_key="+agent_filter_key+"&report_filter_reporttype="+report_filter_reporttype;
    report_table = $('#table_report_status').DataTable(dt_object_report);
}

function newReportuser(obj) {
    user_key = obj.value;
    res = user_key.split("@");
    if (res[1] == 2) {
        $("#new-report-user-warrning").hide();
    } else {
        $("#new-report-user-warrning").show();
    }
}

// Referrer Detail Model
var referrerDetailModal = document.getElementById("referrerDetailModal");
function closeReferrerdetail() {
    referrerDetailModal.style.display = "none";
}
function refDetail(agent_id, user_idd, agent,terms_accepted) {
    referrerDetailModal.style.display = "block";
    $("#customcredits").show();
    $("#customagents").show();
    if (user_idd) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/refreportstatus'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    user_id: user_idd
                }
            }).done(function(data) {
                $("#referrer_agent option[value=" + agent_id + "]").prop("selected", true);
                $("#referrer_user").val(user_idd);
                $("#ref-user").text(data.log[0].email);
                $("#ref-created-at").text(data.log[0].created_at);
                $("#sponsor-agent").text(agent);
                $("#ref-terms-accepted").html("");
                if (!terms_accepted) {
                    term_icon_path='<?php echo $root."terms_warrning.png" ?>';
                    term_icon_text='<?php echo __("Referrer did not accept T&C") ?>';
                    $("#ref-terms-accepted").append("<img src="+term_icon_path+" alt='' width='18px'><span>"+term_icon_text+"</span>");
                }else{
                    $("#ref-terms-accepted").append("<p>"+data.log[0].terms_accepted+"</p>");
                }
                if (data.log[0].leave_date == null) {
                    $("#ref-leave-date").text("--------");
                } else {
                    $("#ref-leave-date").text(data.log[0].leave_date);
                }
                if (data.log[0].birth_date == null) {
                    $("#ref-birth-date").text("--------");
                } else {
                    $("#ref-birth-date").text(data.log[0].birth_date);
                }
                $("#custom-credits").val(user_idd);
                $("#ref_table_report_status").DataTable().destroy();
                $("#ref_table_report_status").show();
                dt_object.ajax =
                    '<?php echo $this->getUrl('migareference/application/loadrefreportlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>&user_id=' +
                    user_idd;
                $('#ref_table_report_status').DataTable(dt_object);
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
function buildReferrerDB() {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/genratreferrerdb'); ?>',
                type: 'POST',
                dataType: 'json'
            }).done(function(data) {
                window.open("<?php echo $base_url."/images/application/".$app_id."/features/migareference/referrer_db.csv" ?>");
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
}
function buildSibUserDB() {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/genratsibuserdb'); ?>',
                type: 'POST',
                dataType: 'json'
            }).done(function(data) {
                window.open("<?php echo $base_url."/images/application/".$app_id."/features/migareference/sibuser_db.csv" ?>");
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
}
function buildProspectDB() {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/genratprospectdb'); ?>',
                type: 'POST',
                dataType: 'json'
            }).done(function(data) {
                window.open("<?php echo $base_url."/images/application/".$app_id."/features/migareference/prospect_db.csv" ?>");
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
}
// function buildReportsDB() {
//     $("#mask").show();
//         $.ajax({
//                 url: '<?php echo $this->getUrl('migareference/application/genratreportsdb'); ?>',
//                 type: 'POST',
//                 dataType: 'json'
//             }).done(function(data) {
//                 console.log("Success");
//                 window.open("<?php echo $base_url."/images/application/".$app_id."/features/migareference/reports_db.csv" ?>");
//                 console.log("after");
//             }).fail(function(data) {
//                 console.log("Fail");
//             })
//             .always(function() {
//                 console.log("complete");
//                 $("#mask").hide();
//             });
// }
function buildReportsDB() {
    $("#mask").show();
    $.ajax({
        url: '<?php echo $this->getUrl('migareference/application/genratreportsdb'); ?>',
        type: 'POST',
        dataType: 'json'
    }).done(function(data) {
        console.log("Success");

        // Attempt auto-download
        var downloadUrl = "<?php echo $base_url.'/images/application/'.$app_id.'/features/migareference/reports_db.csv'; ?>";
        var link = document.createElement("a");
        link.href = downloadUrl;
        link.download = "reports_db.csv";
        document.body.appendChild(link);
        link.click();
        // Check if download was successful
        setTimeout(function() {
            swal({
                title: '<?php echo __js('Download File'); ?>',
                text: '<?php echo __js('If the file did not download automatically, click the button below to download manually.'); ?>',
                icon: 'info',
                buttons: {
                    cancel: {
                        text: '<?php echo __js('Close'); ?>',
                        visible: true,
                        className: 'btn btn-default'
                    },
                    confirm: {
                        text: '<?php echo __js('Download Now'); ?>',
                        className: 'btn btn-primary'
                    }
                }
            },function(willDownload) {
                if (willDownload) {
                    window.open(downloadUrl, '_blank');
                }
            });
            document.body.removeChild(link);
        }, 1000);

        console.log("after");
    }).fail(function(data) {
        console.log("Fail");
        swal('<?php echo __js('Error'); ?>', '<?php echo __js('Failed to generate the report. Please try again.'); ?>', 'error');
    }).always(function() {
        console.log("complete");
        $("#mask").hide();
    });
}


function gdprchange() {
    numberOfChecked = $('.gdpr-item:checked').length;
    if (numberOfChecked) {
        $(".btn-gdpr-apply").prop('disabled', false);
    } else {
        $(".btn-gdpr-apply").prop('disabled', true);
    }
}

function bulkReport(report_id) {
    numberOfChecked = $('.bulk-report:checked').length;
    if (numberOfChecked) {
        $(".btn-bulk-apply").prop('disabled', false);
        $("#apply_report_bulk").show();
    } else {
        $(".btn-bulk-apply").prop('disabled', true);
        $("#apply_report_bulk").hide();
    }
    id = "bulk_report_" + report_id;
    if ($("#" + id).prop("checked") == true) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/getreport'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    report_id: report_id
                }
            }).done(function(data) {
                // Commission Section
                is_acquired = $("#is_acquired_bulk").val();
                acquireElement = "<div class='form-group' style='height:40px;' id=bulk-acquire-container-" +
                    report_id + ">";
                acquireElement += "<div class='col-md-6'>";
                acquireElement += "<lable>";
                if (data.report.reward_type == 1) {
                    temtext = "<?php echo __js("Add Commission Fee for Report"); ?>";
                    acquireElement += temtext + " " + data.report.report_no + " *";
                } else {
                    temtext = "<?php echo __js("Add Credits for Report"); ?>";
                    acquireElement += temtext + " " + data.report.report_no + " *";
                }
                acquireElement += "</lable>";
                acquireElement += "</div>";
                acquireElement += "<div class='col-md-6'>";
                acquireElement += "<input class='form-control input-flat' min='0' id=bulk-acquire-" + report_id +
                    " type='number' name=bulk_acquire_" + report_id + " value=''>";
                acquireElement += "</div>";
                acquireElement += "</div>";
                $("#commission_fee_bulk_container").append(acquireElement);
                if (data.report.commission_type == 1 || data.report.commission_type == 3) {
                    if (data.report.commission_fee > 0) {
                        $("#bulk-acquire-" + report_id).val(data.report.commission_fee);
                        $("#bulk-acquire-" + report_id).prop('disabled', true);
                    } else if (is_acquired == 1) {
                        $("#bulk-acquire-" + report_id).val(data.report.commission_fee);
                        $("#bulk-acquire-" + report_id).prop('disabled', false);
                    }
                } else {
                    $("#bulk-acquire-" + report_id).val(data.report.commission_fee);
                    $("#bulk-acquire-" + report_id).prop('disabled', true);
                }
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    } else {
        console.log("Yes ready for remover");
        $("#bulk-acquire-container-" + report_id).remove();
    }
}
$('#bulk_status').on('change', function() {
    pkid = parseInt(this.value);
    $.ajax({
            url: '<?php echo $this->getUrl('migareference/application/chrckmandate'); ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                pkid: pkid,
                report_id: 0
            }
        }).done(function(data) {
            // Comment Section
            $("#is_comment_bulk").val(data.checkmandate.is_comment);
            if (data.checkmandate.is_comment == 1 || data.checkmandate.status_title ==
                "Declinato/Non Venduto") {
                $("#is_comment_bulk").val(1);
                $("#comment-bulk-container").show();
                $("#comment-bulk").val(data.checkmandate.comment);
            } else {
                $("#comment-bulk-container").hide();
                $("#comment-bulk").val("");
            }
            // Standard Status
            $("#standard_type_bulk").val(data.checkmandate.standard_type);
            $("#order_id_bulk").val(data.checkmandate.order_id);
            $("#is_acquired_bulk").val(data.checkmandate.is_acquired);
            if (data.checkmandate.is_acquired == 1) {
                $("#commission_fee_bulk_container").show();
            } else {
                $("#commission_fee_bulk_container").hide();
            }
        }).fail(function(data) {
            console.log("Fail");
        })
        .always(function() {
            console.log("complete");
        });
});

function reportdetail(pkid) {
    $("#report-detail-table, #bul-save, #bulk_status, #filter_report").hide();
    $(".report-detail-form, .tab").show();
    $('.tablinks').removeClass('active');
    $('.ReportDetailsTab').addClass('active');
    $("#ReportDetails").show();
    importreportdata(pkid);
}

function addNewReport() {
    $("#report-detail-table, #bul-save, #bulk_status, #filter_report, .btn_apply_bulk").hide();
    $(".add-new-report").show();
    loadNewReportForm();
}

function addnewAddress() {
    $("#addAddress").show();
    $("#showAddress").hide();
}

function shownewAddress() {
    $("#addAddress").hide();
    $("#showAddress").show();
}

function addnewPhoneNumbers() {
    $("#addPhoneNumbers").show();
    $("#showPhoneNumbers").hide();
}

function shownewPhoneNumbers() {
    $("#addPhoneNumbers").hide();
    $("#showPhoneNumbers").show();
}

function addNewJobs() {
    $("#addJobs").show();
    $("#showJobs").hide();
    $("#job-operation").val("create");
    $("#job_title").val("");
}

function showJobs() {
    $("#addJobs").hide();
    $("#showJobs").show();
}
function addNewProfession() {
    $("#addprofessions").show();
    $("#showprofessions").hide();
    $("#profession-operation").val("create");
    $("#profession_title").val("");
}

function showProfessions() {
    $("#addprofessions").hide();
    $("#showprofessions").show();
}

function addNewGeolocation() {
    $("#addGeolocation").show();
    $("#showGeolocation").hide();
    $("#province").val("");
    $("#province_code").val("");
    $("#geo-operation").val("create");
}

function editGeoLocation(country_id, province_id,province_code) {
    console.log("Method Called");
    $("#addGeolocation").show();
    $("#showGeolocation").hide();
    $("#geo-operation").val("update");
    loadGeoItem(country_id, province_id,province_code);
}

function loadGeoItem(country_id, province_id,province_code) {
    $("#geo_country option[value=" + country_id + "]").prop("selected", true);
    $("#country").val($("#geo_country option:selected").text());
    loadGeoProvice(country_id, province_id,province_code);
}

function showGeolocation() {
    $("#addGeolocation").hide();
    $("#showGeolocation").show();
}

function showProspectJobs() {
    $("#addProspectJobs").hide();
    $("#prospect_phone_form").hide();
    $(".showProspectJobs").show();
}

function resetDefaultStatus(app_id) {
    var message = '<?php echo __("ATTENTION! IF YOU PROCEED YOU WILL LOSE YOUR CUSTOM STATUSES SETTING"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/resetdefaultstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>';
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}

function revertPreSettings(app_id) {
    var message = '<?php echo __("Are you sure you want to Revert settings to default.?"); ?>';
    if (confirm(message)) {
        var url =
            '<?php echo $this->getUrl('migareference/application/revertpresetttings'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>';
        reload(this, url, true, function(datas) {
            if (datas.success) {
                page.reload();
            }
        });
    }
}
//START Staus and Notification Managers
// Export status
function exportStatus() {
    var url =
        '<?php echo $this->getUrl('migareference/application/exportstatus'); ?>/app_id/<?php echo $app_id; ?>/value_id/<?php echo $option->getId(); ?>';
    reload(this, url, true, function(data) {
        console.log(data);
        var a = document.createElement('a');
        var url = data.data.file_path;
        a.href = url;
        a.target = "_blank";
        a.download = 'statusDataExport.zip';
        document.body.append(a);
        a.click();
        a.remove();
    });
}
// Switch to status form
function addStatus(is_standard, standard_type, commission_type) {
    is_standard = parseInt(is_standard);
    standard_type = parseInt(standard_type);
    $("#status-notification-form").show();
    $(".status-display").hide();
    $("#status_setting_operation").val("create");
    if (is_standard) {
        $("#standard-warrning").show();
        $("#standard-heading").show();
        $("#standard-heading").text("Standard Status");
        $("#fisrt_status_warning").hide();
        $("#mandate_acquired_warrning").hide();
        // $("#is_acquired_container").hide();
        infoText = "";
        switch (standard_type) {
            case 1:
                infoText = "This will be first status for any new generated Report.";
                $("#fisrt_status_warning").show();
                break;
            case 2:
                infoText = "Commission or Credits (As per settings) will be assigned to Referral.";
                $("#mandate_acquired_warrning").show();
                break;
            case 3:
                infoText = "This will be last or closing status for any Report.";
                break;
            case 4:
                infoText = "This status is specifically for % commission to acquire the commission amount from agent.";
                break;
        }
        $("#standard-info-text").text(infoText);
    } else {
        $("#standard-heading").hide();
        $("#standard-info").hide();
        $("#standard-warrning").hide();
        $("#fisrt_status_warning").hide();
        $("#mandate_acquired_warrning").hide();
    }
    $("#status-notification-form").show();
    $(".status-display").hide();
    $("#standard_index").val(standard_type);
    $("#status-order select").val(1);
    $("#migareference_notification_event_id").val(0);
    $("#migareference_report_status_id").val();
    $("#migareference_email_template_id").val();
    $("#migareference_push_template_id").val();
    $("#ref_email_form_fields").show();
    $("#agt_email_form_fields").show();
    $("#email-notification-to-user option[value=" + 0 + "]").prop("selected", true);
    $("#email-delay-days option[value=" + 0 + "]").prop("selected", true);
    $("#email-delay-hours option[value=" + 0 + "]").prop("selected", true);
    $("#push-delay-days option[value=" + 0 + "]").prop("selected", true);
    $("#push-delay-hours option[value=" + 0 + "]").prop("selected", true);
    $("#ref-email-title").val("");
    $("#agt-email-title").val("");
    $("#ref-email-text").val("");
    $("#agt-email-text").val("");
    // Push Fields
    $("#ref_push_form_fields").show();
    $("#agt_push_form_fields").show();
    $("#push-notification-to-user option[value=" + 0 + "]").prop("selected", true);
    $("#sms-notification-to-user option[value=" + 0 + "]").prop("selected", true);
    $("#ref-push-title").val("");
    $("#ref-push-text").val("");
    $("#status-title").val("");
    $("#ref-is-feature option[value=" + 0 + "]").prop("selected", true);
    $("#ref-feature-id-div").hide();
    $("#div-custom-url-ref").hide();
    $("#migareference_cover_img").attr("src", "");
    $('#remove_migareference_cover_img').show();
    // PUSH Agent Fields
    $("#agt-push-title").val("");
    $("#agt-push-text").val("");
    $("#agt-is-feature option[value=" + 0 + "]").prop("selected", true);
    $("#agt-feature-id-div").hide();
    $("#div-custom-url-agt").hide();
    // Image Show and Remove Button controls
    // For Agent
    $("#migareference_cover_img_agt").hide();
    $('#remove_migareference_cover_img_agt').hide();
    // For refreral
    $("#migareference_cover_img").attr("src", "");
    $("#migareference_cover_img").hide();
    $('#remove_migareference_cover_img').hide();
    // checkboxesss
    // Hide checkboes for Standard type 1
    if (standard_type == 1) {
        $("#is_comment_container").hide();
        $("#is_comment").prop("checked", false);
    } else {
        $("#is_comment_container").show();
        $("#is_comment").prop("checked", false);
    }
    //Show acquired when commisson type is 1
    // if (commission_type==2) {
    //   // $("#is_acquired_container").hide();
    //   $("#is_acquired").prop("checked", false);
    // }

    // Import status
    $("#is_import_container").hide();
    $("#import_status").val(0);
}
// Back to status settings
function backtoStatussettings() {
    $("#status-notification-form").hide();
    $(".status-display").show();
}

function backtoreportfieldlist() {
    $("#showupdatereportfieldform").hide();
    $("#reportfieldlist").show();
}
//END Staus and Notification Managers
$("#comment-container").hide();

function showreporttable() {
    $("#report-detail-table").show();
    $("#bul-save").show();
    $("#bulk_status").show();
    $("#filter_report").show();
    $(".btn_apply_bulk").show();
    $(".report-detail-form").hide();
    $(".add-new-report").hide();
}

function chnagestatus(obj) {
    pkid = parseInt(obj.value);
    report_id = parseInt($("#migareference_report_id").val());
    $.ajax({
            url: '<?php echo $this->getUrl('migareference/application/chrckmandate'); ?>',
            type: 'POST',
            dataType: 'json',
            data: {
                pkid: pkid,
                report_id: report_id
            }
        }).done(function(data) {
            // Comment Section
            $("#is_comment_flag").val(data.checkmandate.is_comment);
            if (data.checkmandate.is_comment == 1 || data.checkmandate.status_title == "Declinato/Non Venduto") {
                $("#is_comment_flag").val(1);
                $("#comment-container-text").show();
                $("#comment_text").val(data.checkmandate.comment);
            } else {
                $("#comment-container-text").hide();
                $("#comment_text").val("");
            }
            $("#new_order_id").val(data.checkmandate.order_id);
            $("#is_standard").val(data.checkmandate.is_standard);
            $("#standard_type").val(data.checkmandate.standard_type);
            // Commission Section
            $("#is_acquired_text").val(data.checkmandate.is_acquired);
            if (data.report.commission_type == 1 || data.report.commission_type == 3) { //Percent Commission or Range Commission
                if (data.report.commission_fee > 0 && data.checkmandate.is_acquired == 0) {
                    $("#commision_validaity").show();
                    $("#commission_fee").val(data.report.commission_fee);
                    $("#commission_fee").prop('disabled', true);
                } else if (data.checkmandate.is_acquired == 1) {
                    $("#commision_validaity").show();
                    $("#commission_fee").val(data.report.commission_fee);
                    $("#commission_fee").prop('disabled', false);
                } else {
                    $("#commision_validaity").hide();
                    $("#commission_fee").val(data.report.commission_fee);
                    $("#commission_fee").prop('disabled', true);
                }
            } else { //Fix Commission
                $("#commission_fee").val(data.report.commission_fee);
                $("#commission_fee").prop('disabled', true);
            }
        }).fail(function(data) {
            console.log("Fail");
        })
        .always(function() {
            console.log("complete");
        });
}
$('#is_unique_mobile').on('change', function() {
    if (this.value == 1) {
        $(".unique-mobile-enabled").show();
    } else {
        $(".unique-mobile-enabled").hide();
    }
});
$('#mobile_grace_period_action').on('change', function() {
    if (this.value == 1) {
        $("#grace_period_warning_message_container").hide();
    } else {
        $("#grace_period_warning_message_container").show();
    }
});
$('#mobile_grace_period_database').on('change', function() {
    if (this.value == 1) {
        $("#grace_period_extrnal_db_url_container").hide();
    } else {
        $("#grace_period_extrnal_db_url_container").show();
    }
});
$('#phonebook_type').on('change', function() {
    if (this.value == 1) {
        $(".is_referrer").show();
    } else if (this.value == 2) {
        $(".is_referrer").hide();
    }
});
$('#comision_type,#reward_type').on('change', function() {
    comision_type = $("#comision_type").val();
    reward_type = $("#reward_type").val();
    $(".commission_fields").hide();
    if (reward_type == 1) {
        if (comision_type == 1 || comision_type == 3) {
            $("#percent_commission_container").show();
        } else if (comision_type == 2) {
            $("#fix_commission_container").show();
        }
        if (comision_type == 3) {
            $("#price_range_container").show();
        }
    } else if (reward_type == 2) {
        $("#credit_expire_container").show();
        if (comision_type == 1 || comision_type == 3) {
            $("#percent_commission_credits_container").show();
        } else if (comision_type == 2) {
            $("#fix_commission_credits_container").show();
        }
        if (comision_type == 3) {
            $("#price_range_container").show();
        }
    }
});
$('#is_declined').on('change', function() {
    if (this.value == 1) {
        $("#declined-grace-container").show();
        $("#declined-comment-text-container").show();
        $("#declined-comment-field-container").show();
    }
    if (this.value == 2) {
        $("#declined-grace-container").hide();
        $("#declined-comment-text-container").hide();
        $("#declined-comment-field-container").hide();
    }
});

function owneractiverNumber(active_number) {
    $("#owner_hot").val(active_number);
    $(".pile").removeClass('active_pile');
    $(".pile").addClass('inactive_pile');
    if (active_number == 1) {
        $(".pile_1").addClass("active_pile");
        $(".pile_1").removeClass("inactive_pile");
    } else if (active_number == 2) {
        $(".pile_2").addClass("active_pile");
        $(".pile_2").removeClass("inactive_pile");
    } else if (active_number == 3) {
        $(".pile_3").addClass("active_pile");
        $(".pile_3").removeClass("inactive_pile");
    } else if (active_number == 4) {
        $(".pile_4").addClass("active_pile");
        $(".pile_4").removeClass("inactive_pile");
    } else if (active_number == 5) {
        $(".pile_5").addClass("active_pile");
        $(".pile_5").removeClass("inactive_pile");
    }
}

function importreportdata(pkid) {
    $("#mask").show();
    pkid = parseInt(pkid);
    if (pkid) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/reportdetail'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    param1: pkid
                }
            }).done(function(data) {
                $("#dynamic_form_detail").html("").append(data.ress);
                $("#order_id").val(data.item[0].order_id);
                $("#new_order_id").val(data.item[0].order_id);
                if (data.item[0].sponsor_id == 0) {
                    $(".is_sponsor").hide();
                }
                $("#migareference_invoice_settings_id").val(data.item[0].migareference_invoice_settings_id);
                $("#referral_user_id").val(data.item[0].user_id);
                $("#migareference_report_id").val(data.item[0].migareference_report_id);
                $("#commission_type_report").val(data.item[0].commission_type);
                $("#commission_fee_report").val(data.item[0].commission_fee);
                $("#is_acquired_text").val(data.item[0].is_acquired);
                $("#reward_type_report_detail").val(data.item[0].reward_type);
                // Standard Status
                $("#is_standard").val(data.item[0].is_standard);
                $("#standard_type").val(data.item[0].standard_type);
                // Piles Working
                $("#owner_hot").val(data.item[0].owner_hot);
                active_number = data.item[0].owner_hot;
                owneractiverNumber(active_number);
                $("#mask").hide();
                $("#report_log, #report_notes, #report_reminders").DataTable().destroy();
                // Notes Table
                dt_object.ajax ='<?php echo $this->getUrl('migareference/application/loadreportnotes?app_id='.$app_id.'&value_id='.$option->getId()); ?>&key=' +pkid;
                $('#report_notes').DataTable(dt_object);
                // Reminder Table
                dt_object.ajax ='<?php echo $this->getUrl('migareference/application/loadreportreminders?app_id='.$app_id.'&value_id='.$option->getId()); ?>&key=' +pkid;
                $('#report_reminders').DataTable(dt_object);
                // Log Table
                dt_object.order = [[0, 'desc']];
                dt_object.ajax ='<?php echo $this->getUrl('migareference/application/loadreportlog?app_id='.$app_id.'&value_id='.$option->getId()); ?>&key=' +pkid;
                $('#report_log').DataTable(dt_object);
                // Address Working Start
                longitude = $("#new-report-longitude-0").val();
                latitude = $("#new-report-latitude-0").val();
                if (longitude != "") {
                    setTimeout(initMap, 500);
                    initMap();
                    initAutocomplete();
                }
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
    $("#mask").hide();
}
// START LOCATION METHODS
function initMap() {
    // Google Map Options
    var mapOptions = {
        // How zoomed in you want the map to start at (always required)
        zoom: 13,
        // The latitude and longitude to center the map (always required)
        center: new google.maps.LatLng(latitude, longitude), // Providence, RI
        // Map Styling
        styles: [{
            "featureType": "administrative.country",
            "elementType": "geometry",
            "stylers": [{
                "visibility": "simplified"
            }, {
                "hue": "#ff0000"
            }]
        }]
    };
    // Create the Google Map using our element and options defined above
    map = new google.maps.Map(document.getElementById('main'), mapOptions);
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(latitude, longitude),
        map: map,
        title: '',
        draggable: true
    });
    google.maps.event.addListener(marker, 'position_changed', function() {
        var latitude = this.getPosition().lat().toString().substr(0, 9);
        var longitude = this.getPosition().lng().toString().substr(0, 9);
        $('#new-report-latitude-0').val(latitude).addClass('active');
        $('#new-report-longitude-0').val(longitude).addClass('active');
    });
    $("#main").css("position", "fixed !important");
}

function initAutocomplete() {
    // Create the autocomplete object, restricting the search to geographical
    autocomplete = new google.maps.places.Autocomplete((document.getElementById('address')), {
        types: ['geocode']
    });
    // When the user selects an address from the dropdown, populate the address
    // fields in the form.
    autocomplete.addListener('place_changed', fillInAddress);
    //prevent ui bug mixing default placeholder and label
    document.getElementById('address').placeholder = '';
}

function fillInAddress() {
    var place = autocomplete.getPlace();
    if (place.geometry) {
        map.panTo(place.geometry.location);
        marker.setPosition(place.geometry.location);
        map.setZoom(19);
    } else {
        document.getElementById('address').placeholder = '';
    }
    for (var component in componentForm) {
        try {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        } catch (ignored) {}
    }
    if (place.hasOwnProperty('address_components') && place.address_components.length > 0) {
        // Get each component of the address from the place details
        // and fill the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            console.log(addressType);
            if (componentForm[addressType]) {
                try {
                    var val = place.address_components[i][componentForm[addressType]];
                    document.getElementById(addressType).value = val;
                } catch (ignored) {}
            }
        }
    }
}
// END LOCATION METHODS
// START
function importnotificationformdata(event_id, is_standard, standard_type) {
    event_id = parseInt(event_id);
    is_standard = parseInt(is_standard);
    standard_type = parseInt(standard_type);
    if (event_id) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/importnotificationformdata'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    event_id: event_id
                }
            }).done(function(data) {
                if (is_standard) {
                    $("#standard-warrning").show();
                    $("#is_import_container").hide();
                    $("#standard-heading").show();
                    $("#standard-heading").text("Update Standard ");
                    $("#fisrt_status_warning").hide();
                    $("#mandate_acquired_warrning").hide();
                    // $("#is_acquired_container").hide();
                    $("#is_comment_container").show();
                    infoText = "";
                    switch (standard_type) {
                        case 1:
                            infoText = "This will be first status for any new generated Report.";
                            $("#fisrt_status_warning").show();
                            break;
                        case 2:
                            infoText = "Commission or Credits (As per settings) will be assigned to Referral.";
                            $("#mandate_acquired_warrning").show();
                            break;
                        case 3:
                            infoText = "This will be last or closing status for any Report.";
                            break;
                        case 4:
                            infoText =
                                "This status is specifically for % commission to acquire the commission amount from agent.";
                            break;
                    }
                    $("#standard-info-text").text(infoText);
                } else {
                    $("#is_import_container").show();
                    $("#standard-heading").hide();
                    $("#standard-info").hide();
                    $("#standard-warrning").hide();
                    $("#fisrt_status_warning").hide();
                    $("#mandate_acquired_warrning").hide();
                    $("#is_acquired_container").show();
                }
                $("#status-notification-form").show();
                $(".status-display").hide();
                $("#status_setting_operation").val("update");
                $("#standard_index").val(standard_type);
                $("#status-order select").val(data.item[0].order_id);
                $("#migareference_notification_event_id").val(event_id);
                $("#migareference_report_status_id").val(data.item[0].migareference_report_status_id);
                $("#migareference_email_template_id").val(data.item[0].migareference_email_template_id);
                $("#migareference_push_template_id").val(data.item[0].migareference_push_template_id);
                if (data.item[0].is_email_ref == 1 && data.item[0].is_email_agt == 1) {
                    noti_to = 1;
                    $("#ref_email_form_fields").show();
                    $("#agt_email_form_fields").show();
                } else if (data.item[0].is_email_ref == 1) {
                    noti_to = 2;
                    $("#ref_email_form_fields").show();
                    $("#agt_email_form_fields").hide();
                } else {
                    noti_to = 3;
                    $("#ref_email_form_fields").hide();
                    $("#agt_email_form_fields").show();
                }
                $("#email-notification-to-user option[value=" + noti_to + "]").prop("selected", true);
                $("#email-delay-days option[value=" + data.item[0].email_delay_days + "]").prop("selected", true);
                $("#email-delay-hours option[value=" + data.item[0].email_delay_hours + "]").prop("selected", true);
                $("#push-delay-days option[value=" + data.item[0].push_delay_days + "]").prop("selected", true);
                $("#push-delay-hours option[value=" + data.item[0].push_delay_hours + "]").prop("selected", true);
                $("#ref-email-title").val(data.item[0].ref_email_title);
                $("#agt-email-title").val(data.item[0].agt_email_title);
                $("#ref-email-text").val(data.item[0].ref_email_text);
                $("#agt-email-text").val(data.item[0].agt_email_text);
                // Push Fields
                if (data.item[0].is_push_ref == 1 && data.item[0].is_push_agt == 1) {
                    noti_to_push = 1;
                    $("#ref_sms_form_fields_container").show();
                    $("#ref_push_form_fields").show();
                    $("#agt_push_form_fields").show();
                } else if (data.item[0].is_push_ref == 1) {
                    noti_to_push = 2;
                    $("#ref_sms_form_fields_container").show();
                    $("#ref_push_form_fields").show();
                    $("#agt_push_form_fields").hide();
                } else {
                    noti_to_push = 3;
                    $("#ref_sms_form_fields_container").hide();
                    $("#ref_push_form_fields").hide();
                    $("#agt_push_form_fields").show();
                }
                $("#push-notification-to-user option[value=" + noti_to_push + "]").prop("selected", true);
                $("#sms-notification-to-user option[value=" + data.item[0].sms_notification_to_user + "]").prop(
                    "selected", true);
                $("#ref-push-title").val(data.item[0].ref_push_title);
                $("#ref-push-text").val(data.item[0].ref_push_text);
                $("#ref-sms-text").val(data.item[0].ref_sms_text);
                $("#agt-sms-text").val(data.item[0].agt_sms_text);
                $("#status-title").val(data.item[0].status_title);
                $("#migareference_status_icon_cover_img").attr("src", data.item[0].status_icon);
                $("#migareference_status_icon_cover_img").show();
                $("#c_migareference_status_icon_cover_file").val(data.item[0].status_icon_db_file);
                if (data.item[0].ref_open_feature == 1) {
                    $("#ref-is-feature option[value=" + 1 + "]").prop("selected", true);
                    $("#ref-feature-id option[value=" + data.item[0].ref_feature_id + "]").prop("selected", true);
                    $("#ref-feature-id-div").show();
                    if (data.item[0].ref_feature_id == 0) { //Keep in mind if Custom url option have value 0!
                        $("#migareference_custom_url").val(data.item[0].ref_custom_url);
                        $("#migareference_custom_url").show();
                    } else {
                        $("#migareference_custom_url").hide();
                    }
                } else {
                    $("#ref-is-feature option[value=" + 0 + "]").prop("selected", true);
                    $("#ref-feature-id-div").hide();
                    $("#div-custom-url-ref").hide();
                }
                $("#migareference_cover_img").attr("src", data.item[0].ref_cover_image);
                $('#remove_migareference_cover_img').show();
                // PUSH Agent Fields
                $("#agt-push-title").val(data.item[0].agt_push_title);
                $("#agt-push-text").val(data.item[0].agt_push_text);
                if (data.item[0].agt_open_feature == 1) {
                    $("#agt-is-feature option[value=" + 1 + "]").prop("selected", true);
                    $("#agt-feature-id-div").show();
                    $("#agt-feature-id option[value=" + data.item[0].agt_feature_id + "]").prop("selected", true);
                    if (data.item[0].agt_feature_id == 0) { //Keep in mind if Custom url option have value 0!
                        $("#migareference-custom-url").val(data.item[0].agt_custom_url);
                        $("#div-custom-url-agt").show();
                    } else {
                        $("#div-custom-url-agt").hide();
                    }
                } else {
                    $("#agt-is-feature option[value=" + 0 + "]").prop("selected", true);
                    $("#agt-feature-id-div").hide();
                    $("#div-custom-url-agt").hide();
                }
                // Image Show and Remove Button controls
                // For Agent
                if (data.item[0].agt_cover_image != "") {
                    $("#migareference_cover_img_agt").attr("src", data.item[0].agt_cover_image);
                    $("#migareference_cover_img_agt").show();
                    $('#remove_migareference_cover_img_agt').show();
                } else {
                    $("#migareference_cover_img_agt").hide();
                    $('#remove_migareference_cover_img_agt').hide();
                }
                // For refreral
                if (data.item[0].ref_cover_image != "") {
                    $("#migareference_cover_img").attr("src", data.item[0].ref_cover_image);
                    $("#migareference_cover_img").show();
                    $('#remove_migareference_cover_img').show();
                } else {
                    $("#migareference_cover_img").attr("src", "");
                    $("#migareference_cover_img").hide();
                    $('#remove_migareference_cover_img').hide();
                }
                if (data.item[0].is_comment == 1) {
                    $("#is_comment").prop("checked", true);
                } else {
                    $("#is_comment").prop("checked", false);
                }
                if (data.item[0].is_acquired == 1) {
                    $("#is_acquired").prop("checked", true);
                } else {
                    $("#is_acquired").prop("checked", false);
                }
                if (data.item[0].is_pause_sending == 1) {
                    $("#is_pause_sending").prop("checked", true);
                } else {
                    $("#is_pause_sending").prop("checked", false);
                }
                // Hide checkboes for Standard type 1
                if (data.item[0].standard_type == 1) {
                    // $("#is_acquired_container").hide();
                    $("#is_comment_container").hide();
                    $("#is_acquired").prop("checked", false);
                    $("#is_comment").prop("checked", false);
                }
                // Declined Logic
                if (data.item[0].is_declined == 1) {
                    $("#is_auto_declined").prop("checked", true);
                    $("#declined-grace-container").show();
                    $("#declined_grace").val(data.item[0].declined_grace_days);
                    $("#auto-fallabck-comment").val(data.item[0].auto_fallabck_comment);
                    $("#declined_to_status option[value=" + data.item[0].declined_to + "]").prop("selected", true);
                } else {
                    $("#is_auto_declined").prop("checked", false);
                    $("#declined-grace-container").hide();
                }
                // Reminder (Reminder section function is declined from 03/31/2023 and will be amanged from Reminder section)
                if (data.item[0].is_reminder == 1) {
                    $("#is_auto_reminder").prop("checked", true);
                    $("#reminer-notification-container").hide();
                } else {
                    $("#is_auto_reminder").prop("checked", false);
                    $("#reminer-notification-container").hide();
                }
                $("#reminder_grace").val(data.item[0].reminder_grace_days);
                // Controll Notifcation drop for Notification input fields
                if (data.item[0].reminder_is_email_ref == 1 && data.item[0].reminder_is_email_agt == 1) {
                    reminder_noti_to = 1;
                    $("#reminder_ref_email_form_fields").show();
                    $("#reminder_agt_email_form_fields").show();
                } else if (data.item[0].reminder_is_email_ref == 1) {
                    reminder_noti_to = 2;
                    $("#reminder_ref_email_form_fields").show();
                    $("#reminder_agt_email_form_fields").hide();
                } else {
                    reminder_noti_to = 3;
                    $("#reminder_ref_email_form_fields").hide();
                    $("#reminder_agt_email_form_fields").show();
                }
                $("#reminder-email-notification-to-user option[value=" + reminder_noti_to + "]").prop("selected",
                    true);
                $("#reminder-ref-email-title").val(data.item[0].reminder_ref_email_title);
                $("#reminder-agt-email-title").val(data.item[0].reminder_agt_email_title);
                $("#reminder-ref-email-text").val(data.item[0].reminder_ref_email_text);
                $("#reminder-agt-email-text").val(data.item[0].reminder_agt_email_text);
                // // PUSH COntroller
                if (data.item[0].reminder_is_push_ref == 1 && data.item[0].reminder_is_push_agt == 1) {
                    reminer_noti_to_push = 1;
                    $("#reminder_ref_push_form_fields").show();
                    $("#reminder_agt_push_form_fields").show();
                } else if (data.item[0].reminder_is_push_ref == 1) {
                    reminer_noti_to_push = 2;
                    $("#reminder_ref_push_form_fields").show();
                    $("#reminder_agt_push_form_fields").hide();
                } else {
                    reminer_noti_to_push = 3;
                    $("#reminder_ref_push_form_fields").hide();
                    $("#reminder_agt_push_form_fields").show();
                }
                $("#reminder-push-notification-to-user option[value=" + reminer_noti_to_push + "]").prop("selected",
                    true);
                $("#reminder-ref-push-title").val(data.item[0].reminder_ref_push_title);
                $("#reminder-ref-push-text").val(data.item[0].reminder_ref_push_text);
                $("#reminder-status-title").val(data.item[0].reminder_current_status_title);
                if (data.item[0].reminder_ref_open_feature == 1) {
                    $("#reminder-ref-is-feature option[value=" + 1 + "]").prop("selected", true);
                    $("#reminder-ref-feature-id option[value=" + data.item[0].reminder_ref_feature_id + "]").prop(
                        "selected", true);
                    $("#reminder-ref-feature-id-div").show();
                    if (data.item[0].reminder_ref_feature_id ==
                        0) { //Keep in mind if Custom url option have value 0!
                        $("#reminder_migareference_custom_url").val(data.item[0].reminder_ref_custom_url);
                        $("#reminder_migareference_custom_url").show();
                    } else {
                        $("#reminder_migareference_custom_url").hide();
                    }
                } else {
                    $("#reminder-ref-is-feature option[value=" + 0 + "]").prop("selected", true);
                    $("#reminder-ref-feature-id-div").hide();
                    $("#reminder-div-custom-url-ref").hide();
                }
                $("#reminder_migareference_cover_img").attr("src", data.item[0].reminder_ref_cover_image);
                $('#reminder_remove_migareference_cover_img').show();
                // PUSH Agent Fields
                $("#reminder-agt-push-title").val(data.item[0].reminder_agt_push_title);
                $("#reminder-agt-push-text").val(data.item[0].reminder_agt_push_text);
                if (data.item[0].reminder_agt_open_feature == 1) {
                    $("#reminder-agt-is-feature option[value=" + 1 + "]").prop("selected", true);
                    $("#reminder-agt-feature-id-div").show();
                    $("#reminder-agt-feature-id option[value=" + data.item[0].reminder_agt_feature_id + "]").prop(
                        "selected", true);
                    if (data.item[0].reminder_agt_feature_id ==
                        0) { //Keep in mind if Custom url option have value 0!
                        $("#reminder-migareference-custom-url").val(data.item[0].reminder_agt_custom_url);
                        $("#reminder-div-custom-url-agt").show();
                    } else {
                        $("#reminder-div-custom-url-agt").hide();
                    }
                } else {
                    $("#reminder-agt-is-feature option[value=" + 0 + "]").prop("selected", true);
                    $("#reminder-agt-feature-id-div").hide();
                    $("#reminder-div-custom-url-agt").hide();
                }
                // Image Show and Remove Button controls
                // For Agent
                if (data.item[0].reminder_agt_cover_image != "") {
                    $("#reminder_migareference_cover_img_agt").attr("src", data.item[0].reminder_agt_cover_image);
                    $("#reminder_migareference_cover_img_agt").show();
                    $('#reminder_remove_migareference_cover_img_agt').show();
                } else {
                    $("#reminder_migareference_cover_img_agt").hide();
                    $('#reminder_remove_migareference_cover_img_agt').hide();
                }
                // For refreral
                if (data.item[0].reminder_ref_cover_image != "") {
                    $("#reminder_migareference_cover_img").attr("src", data.item[0].reminder_ref_cover_image);
                    $("#reminder_migareference_cover_img").show();
                    $('#reminder_remove_migareference_cover_img').show();
                } else {
                    $("#reminder_migareference_cover_img").attr("src", "");
                    $("#reminder_migareference_cover_img").hide();
                    $('#reminder_remove_migareference_cover_img').hide();
                }
                // }
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
$('#import_status').on('change', function() {
    if (confirm("<?php echo __js("Are you sure you want to Import Report from this Status?"); ?>")) {
        return true;
    } else {
        $("#import_status").val(0);
    }
});

function importreportfieldformdata(key, field_type_count) {
    key = parseInt(key);
    field_type_count = parseInt(field_type_count);
    if (key) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/importreportfieldformdata'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    key: key
                }
            }).done(function(data) {
                $("#migareference_report_fields_id").val(data.migareference_report_fields_id);
                $("#field_type").val(data.field_type);
                $("#field_is_required").val(data.is_required);
                $("#field_is_visible").val(data.is_visible);
                $("#field_is_visible_status_report").val(data.is_visible_status_report);
                $("#field_label").val(data.label);
                $(".unique-address").hide();
                $(".unique-mobile").hide();
                if (data.type == 1) { //Mandatory Filed
                    if (field_type_count == 3) {
                        $(".unique-address").show();
                    }
                    if (field_type_count == 6) {
                        $("#is_unique_mobile_container").show();
                        if (data.is_unique_mobile==1) {
                            $("#is_unique_mobile option[value=" + data.is_unique_mobile + "]").prop("selected", true);
                            $("#grace_days_container").show();
                            $("#grace_days").val(data.grace_days);
                            $("#mobile_grace_period_action_container").show();
                            $("#mobile_grace_period_action option[value=" + data.mobile_grace_period_action + "]").prop("selected", true);
                            $("#grace_period_warning_message_container").hide();
                            if (data.mobile_grace_period_action==2) {
                                $("#grace_period_warning_message_container").show();
                                $("#grace_period_warning_message").val(data.grace_period_warning_message)
                            }
                            $("#mobile_grace_period_database_container").show();
                            $("#mobile_grace_period_database option[value=" + data.mobile_grace_period_database + "]").prop("selected", true);
                            $("#grace_period_extrnal_db_url_container").hide();
                            if (data.mobile_grace_period_database==2 || data.mobile_grace_period_database==3) {
                                console.log("it should show");
                                $("#grace_period_extrnal_db_url_container").show();
                                $("#grace_period_extrnal_db_url").val(data.grace_period_extrnal_db_url);
                            }
                        }else{
                            $(".unique-mobile-enabled").hide();
                        }
                    }
                }
                console.log("Check Point");
                if (data.field_type == 3) { //OPtions type
                    $("#options_config").show();
                    $("#custom_option_container").show();
                    $("#custom_option_defination").show();
                    $("#import_option_list_container").show();
                    $("#field_option").val(data.field_option);
                    options_type = data.options_type;
                    $("#import_option_list option[value=" + options_type + "]").prop("selected", true);
                    if (options_type == 1) {
                        $("#default_1 option[value=" + parseInt(data.default_option_value[0]) + "]").prop("selected", true);
                    } else if (options_type == 2) {
                        $("#default_1 option[value=" + parseInt(data.default_option_value[0]) + "]").prop("selected", true);
                        country_id = $("#default_1").children("option:selected").val();
                        if (country_id != 0) {
                            loadProvicnes(country_id, 0, 0);
                        }
                        setTimeout(function() {
                            $("#default_province option[value=" + parseInt(data.default_option_value[1]) +"]").prop("selected", true);
                        }, 3000);
                        manageOPtionListView(options_type);
                    }
                }else{
                    $("#options_config").hide();
                    $("#custom_option_container").hide();
                    $("#custom_option_defination").hide();
                    $("#import_option_list_container").hide();
                }
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
    $("#reportfieldlist").hide();
    $("#showupdatereportfieldform").show();
}
$('#import_status').on('change', function() {
    if (confirm("<?php echo __js("Are you sure you want to Import Report from this Status?"); ?>")) {
        return true;
    } else {
        $("#import_status").val(0);
    }
});
$('#field_type').on('change', function() {
    if (this.value == 3) {
        $("#options_config").show();
        $("#custom_option_container").show();
        $("#custom_option_defination").show();
        $("#import_option_list_container").show();
    } else {
        $("#options_config").hide();
        $("#custom_option_container").hide();
        $("#custom_option_defination").hide();
        $("#import_option_list_container").hide();
    }
});
$('#import_option_list').on('change', function() {
    manageOPtionListView(this.value);
});

function manageOPtionListView(value) {
    if (value == 1) {
        $("#custom_option_defination").hide();
        $("#custom_option_container").hide();
        $("#default_province_container").hide();
        $("#default_1_container").show();
    } else if (value == 2) {
        $("#custom_option_defination").hide();
        $("#custom_option_container").hide();
        $("#default_province_container").show();
        $("#default_1_container").show();
    } else {
        $("#custom_option_defination").show();
        $("#custom_option_container").show();
        $("#default_province_container").hide();
        $("#default_1_container").hide();
    }
}
$('#default_1').on('change', function() {
    impt_list_value = $("#import_option_list").children("option:selected").val();
    country_id = this.value;
    if (country_id != 0) {
        loadProvicnes(country_id, 0, 0);
    }
});
$('#agnet_province_cuntry').on('change', function() {
    country_id = this.value;
    customer_id = $("#agent_customer_id").val();
    if (country_id != 0) {
        loadProvicnes(country_id, 3, customer_id);
    }
});

function loadProvicnes(country_id, type, customer_id) {
    if (type == 1) {
        country_id = $(".country_default").children("option:selected").val();
    }
    country_id = parseInt(country_id);
    if (country_id) {
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/loadgeoprovice'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    country_id: country_id,
                    customer_id: customer_id,
                    type: type
                }
            }).done(function(data) {
                if (type == 0) {
                    $("#default_province").html("");
                    $.each(data.data, function(i, item) {
                        $('#default_province').append($('<option>', {
                            value: item.migareference_geo_provinces_id,
                            text: item.province
                        }));
                    });
                } else if (type == 2 || type == 1) {
                    $(".province_default").html("");
                    $.each(data.data, function(i, item) {
                        $('.province_default').append($('<option>', {
                            value: item.migareference_geo_provinces_id,
                            text: item.province
                        }));
                    });
                } else if (type == 3) {
                    $("#agent_province_container").html("");
                    province_d = "<div class='row'>";
                    counter = -1;
                    $.each(data.data, function(i, item) {
                        counter++;
                        if (counter % 3 == 0) {
                            province_d += "</div>";
                            province_d += "<div class='row'>";
                        }
                        province_d += "<div class='col-sm-4'>";
                        province_d += "<input " + item.checkbox +
                            " type='checkbox' name='province[]' value='" + item.migareference_geo_provinces_id + "' class='pin input-flat country_province' data-customer-id='" + customer_id + "'>";
                        province_d += "<label style='padding-left: 10px;' for='province'>" + item.province + "</label>";
                        province_d += "</div>";
                    });
                    $("#agent_province_container").html(province_d);
                }

            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
}
// Check All Available Provinces when "Select all" is checked
function selectAllProvinces() {
    var isChecked = $('#select_all_provinces').is(':checked');
    if (isChecked) {
        $(".country_province").prop('checked', true);
    } else {
        $(".country_province").prop('checked', false);
    }
}

function closeProvinceAllocationMOdal() {
    var geoprovinceallocationmodal = document.getElementById("geoprovinceallocationmodal");
    geoprovinceallocationmodal.style.display = "none";
}
$("#agent_province_container").on("change", "input[type='checkbox']", function() {
        // if (this.checked) {
        //     var province_id = $(this).val();
        //     var agent_id = $(this).data('customer-id');
        //     var geoprovinceallocationmodal = document.getElementById("geoprovinceallocationmodal");
        //     geoprovinceallocationmodal.style.display = "block";
        //     if (province_id && agent_id) {
        //             $.ajax({
        //             url: '<?php echo $this->getUrl('migareference/application/loadeprovincereferrers'); ?>',
        //             type: 'POST',
        //             dataType: 'json',
        //             data: {
        //                 province_id: province_id,
        //                 agent_id: agent_id,
        //             }
        //         }).done(function(data) {
        //             console.log("Here is data");
        //                 // province_d = "<div class='row'>";
        //                 // counter = -1;
        //                 // $.each(data.data, function(i, item) {
        //                 //     counter++;
        //                 //     if (counter % 3 == 0) {
        //                 //         province_d += "</div>";
        //                 //         province_d += "<div class='row'>";
        //                 //     }
        //                 //     province_d += "<div class='col-sm-4'>";
        //                 //     province_d += "<input " + item.checkbox +
        //                 //         " type='checkbox' name='province[]' value='" + item
        //                 //         .migareference_geo_provinces_id + "' class='pin input-flat'>";
        //                 //     province_d += "<label for='province'>" + item.province + "</label>";
        //                 //     province_d += "</div>";

        //                 // });
        //                 // $("#agent_province_container").html(province_d);
        //         }).fail(function(data) {
        //             console.log("Fail");
        //         })
        //         .always(function() {
        //             console.log("complete");
        //         });
        //     }
        // }
    });
function getaffiliatelink() {
        url=$("#affiliate_domain_url").val();
        agent_id=$("#affiliate_agent").val();
        $.ajax({
                url: '<?php echo $this->getUrl('migareference/application/genrateaffiliatelink'); ?>',
                type: 'POST',
                dataType: 'json',
                data: {
                    url: url,
                    agent_id: agent_id
                }
            }).done(function(data) {
                $("#display_affiliate_domain_url").val(data.affiliate_url);
                $("#display_affiliate_link").show();
                $("#affiliate_link_copied").hide();
            }).fail(function(data) {
                console.log("Fail");
            })
            .always(function() {
                console.log("complete");
            });
    }
// START Notification Form COntroller
$('#reminder-open-feature').on('change', function() {
    if (this.value == 1) {
        $("#rep-rem-feature-id-container").show();
    } else {
        $("#rep-rem-feature-id-container").hide();
    }
});
$('#ref-is-feature').on('change', function() {
    if (this.value == 1) {
        $("#ref-feature-id-div").show();
    } else {
        $("#ref-feature-id-div").hide();
    }
});
$('#agt-is-feature').on('change', function() {
    if (this.value == 1) {
        $("#agt-feature-id-div").show();
    } else {
        $("#agt-feature-id-div").hide();
    }
});
$('#agt-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#div-custom-url-agt").show();
    } else {
        $("#div-custom-url-agt").hide();
    }
});
$('#ref-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#div-custom-url-ref").show();
    } else {
        $("#div-custom-url-ref").hide();
    }
});
$('#reminder-feature-id').on('change', function() {
    if (this.value == 0) {
        $("#rep-rem-custom-url-container").show();
    } else {
        $("#rep-rem-custom-url-container").hide();
    }
});
$('#email-notification-to-user').on('change', function() {
    if (this.value == 1) {
        $("#ref_email_form_fields").show();
        $("#agt_email_form_fields").show();
    } else if (this.value == 2) {
        $("#ref_email_form_fields").show();
        $("#agt_email_form_fields").hide();
    } else if (this.value == 3) {
        $("#ref_email_form_fields").hide();
        $("#agt_email_form_fields").show();
    }
});
$('#push-notification-to-user').on('change', function() {
    if (this.value == 1) {
        $("#ref_sms_form_fields_container").show();
        $("#ref_push_form_fields").show();
        $("#agt_push_form_fields").show();
    } else if (this.value == 2) {
        $("#ref_sms_form_fields_container").show();
        $("#ref_push_form_fields").show();
        $("#agt_push_form_fields").hide();
    } else if (this.value == 3) {
        $("#ref_sms_form_fields_container").hide();
        $("#ref_push_form_fields").hide();
        $("#agt_push_form_fields").show();
    }
});
$('#sms-notification-to-user').on('change', function() {
    smsTemplateview(this.value);
});

function smsTemplateview(key) {
    if (key == 1) {
        $("#ref_sms_form_fields").show();
        $("#agt_sms_form_fields").show();
    } else if (key == 2) {
        $("#ref_sms_form_fields").show();
        $("#agt_sms_form_fields").hide();
    } else if (key == 3) {
        $("#ref_sms_form_fields").hide();
        $("#agt_sms_form_fields").show();
    }
}
// END Notification Form COntroller
$('#toggle_migareference_email').click(function() {
    $('#migareference-email').stop().slideToggle(300, function() {
        if ($(this).is(':visible')) {
            $('#toggle_migareference_email').children('i').removeClass('fa-angle-down').addClass(
                'fa-angle-up');
            $('#toggle_migareference_email').removeClass('color-blue');
        } else {
            $('#toggle_migareference_email').children('i').removeClass('fa-angle-up').addClass(
                'fa-angle-down');
            $('#toggle_migareference_email').addClass('color-blue');
        }
    });
});
$('.migareference_is_feature').change(function(event) {
    var index = $(this).index('.migareference_is_feature');
    if (parseInt($(this).val())) {
        $('.all-features:eq(' + index + ')').removeClass("hide");
    } else {
        $('.all-features:eq(' + index + ')').addClass("hide");
        $('.div-custom-url:eq(' + index + ')').addClass("hide");
        $('.all-features:eq(' + index + ') .migareference_feature_id').val($('.all-features:eq(' + index +
            ') .migareference_feature_id option:first').val());
    }
});
$('.migareference_feature_id').change(function(event) {
    var index = $(this).parent().index('.div-all-features');
    if (!parseInt($(this).val())) {
        $('.div-custom-url:eq(' + index + ')').removeClass("hide");
    } else {
        $('.div-custom-url:eq(' + index + ')').addClass("hide");
        $('.div-custom-url:eq(' + index + ') .migareference_custom_url').val("");
    }
});
$('#migareference_file').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migareference_cover_img').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#remove_migareference_cover_img').show();
                $('#remove_migareference_cover').val(0);
                $('#migareference_cover_file').val(file);
                default_cover_url = file;
            }
        }
    }
});
$('#migareference_picture').click(function() {
    $('#migareference_file').trigger('click');
});
$('#remove_migareference_cover_img').click(function() {
    if (confirm("<?php echo __js("Are you sure you want to remove the picture?"); ?>")) {
        $('#migareference_cover_img').hide().attr('src', '');
        $('#migareference_cover_file').val('');
        $('#remove_migareference_cover').val(1);
        $(this).hide();
        default_cover_url = '';
    }
    return false;
});
$('#migareference_file_agt').fileupload({
    dataType: 'json',
    add: function(e, data) {
        data.submit();
        img_uploader.showProgressbar();
    },
    progressall: function(e, data) {
        img_uploader.moveProgressbar(data);
    },
    done: function(e, data) {
        if (data.result.error) {
            img_uploader.showError(data.result.message);
        }
        if (data.result.success) {
            img_uploader.hide();
            var params = [];
            params["url"] = '<?php echo $this->getUrl('template/crop/crop'); ?>';
            params["file"] = data.result.files;
            params["output_w"] = 530;
            params["output_h"] = 272;
            params["output_url"] =
                '<?php echo str_replace('/', '$', $this->getUrl('migareference/application/crop')) ?>';
            params["uploader"] = 'img_uploader';
            img_uploader.crop(params);
            img_uploader.callback = function(file) {
                var image = iframe.content.find(
                    '#push_migareference_cover_img_<?php echo $this->getOptionValue()->getId(); ?>');
                $('#migareference_cover_img_agt').show().attr('src',
                    '<?php echo Core_Model_Directory::getTmpDirectory() ?>/' + file).slideDown();
                $('#remove_migareference_cover_img_agt').show();
                $('#remove_migareference_cover_agt').val(0);
                $('#migareference_cover_file_agt').val(file);
                default_cover_url = file;
            }
        }
    }
});
$('#migareference_picture_agt').click(function() {
    $('#migareference_file_agt').trigger('click');
});
$('#remove_migareference_cover_img_agt').click(function() {
    if (confirm("<?php echo __js("Are you sure you want to remove the picture?"); ?>")) {
        $('#migareference_cover_img_agt').hide().attr('src', '');
        $('#migareference_cover_file_agt').val('');
        $('#remove_migareference_cover_agt').val(1);
        $(this).hide();
        default_cover_url = '';
    }
    return false;
});
$('#remove_ref_prz_custom_cover_img').click(function() {
    if (confirm("<?php echo __js("Are you sure you want to remove the picture?"); ?>")) {
        $('#ref_prz_custom_cover_img').hide().attr('src', '');
        $('#ref_prz_custom_file').val('');
        $('#remove_ref_prz_custom_cover_img_field').val(1);
        $(this).hide();
        default_cover_url = '';
    }
    return false;
});
$('#remove_agt_prz_custom_cover_img').click(function() {
    if (confirm("<?php echo __js("Are you sure you want to remove the picture?"); ?>")) {
        $('#agt_prz_custom_cover_img').hide().attr('src', '');
        $('#agt_prz_custom_file').val('');
        $('#remove_agt_prz_custom_cover_img_field').val(1);
        $(this).hide();
        default_cover_url = '';
    }
    return false;
});
function openTab(evt, tabName) {
  var i, tabcontent, tablinks;
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
//END: Show adn Edit Report Detail Report
// Multipage

//jQuery time
var current_fs, next_fs, previous_fs; //fieldsets
var left, opacity, scale; //fieldset properties which we will animate
var animating; //flag to prevent quick multi-click glitches

$(".next").click(function() {
    if (animating) return false;
    animating = true;

    current_fs = $(this).parent();
    next_fs = $(this).parent().next();

    //activate next step on progressbar using the index of next_fs
    $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

    //show the next fieldset
    next_fs.show();
    //hide the current fieldset with style
    current_fs.animate({
        opacity: 0
    }, {
        step: function(now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale current_fs down to 80%
            scale = 1 - (1 - now) * 0.2;
            //2. bring next_fs from the right(50%)
            left = (now * 50) + "%";
            //3. increase opacity of next_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
                'transform': 'scale(' + scale + ')'
            });
            next_fs.css({
                'left': left,
                'opacity': opacity
            });
        },
        duration: 0,
        complete: function() {
            current_fs.hide();
            animating = false;
        },
        //this comes from the custom easing plugin
        easing: 'easeInOutBack'
    });
});

$(".previous").click(function() {
    if (animating) return false;
    animating = true;

    current_fs = $(this).parent();
    previous_fs = $(this).parent().prev();

    //de-activate current step on progressbar
    $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

    //show the previous fieldset
    previous_fs.show();
    //hide the current fieldset with style
    current_fs.animate({
        opacity: 0
    }, {
        step: function(now, mx) {
            //as the opacity of current_fs reduces to 0 - stored in "now"
            //1. scale previous_fs from 80% to 100%
            scale = 0.8 + (1 - now) * 0.2;
            //2. take current_fs to the right(50%) - from 0%
            left = ((1 - now) * 50) + "%";
            //3. increase opacity of previous_fs to 1 as it moves in
            opacity = 1 - now;
            current_fs.css({
                'left': left
            });
            previous_fs.css({
                'transform': 'scale(' + scale + ')',
                'opacity': opacity
            });
        },
        duration: 0,
        complete: function() {
            current_fs.hide();
            animating = false;
        },
        //this comes from the custom easing plugin
        easing: 'easeInOutBack'
    });
});

$(".submit").click(function() {
    return false;
})

</script>
<style type="text/css" media="screen">
/*custom font*/
@import url(https://fonts.googleapis.com/css?family=Montserrat);

/*basic reset*/

#addPreAppSettings fieldset {
    border: 0 none;
    border-radius: 0px;
    padding: 20px 30px;
    box-sizing: border-box;
    /*stacking fieldsets above each other*/
    position: relative;
    min-width: 100% !important;
}

.hide {
    display: none;
}

/*Hide all except first fieldset*/
#addPreAppSettings fieldset:not(:first-of-type) {
    display: none;
}

/*headings*/
.fs-title {
    font-size: 18px;
    text-transform: uppercase;
    color: #2C3E50;
    margin-bottom: 10px;
    letter-spacing: 2px;
    font-weight: bold;
}

.fs-subtitle {
    font-weight: normal;
    font-size: 13px;
    color: #666;
    margin-bottom: 20px;
}

/*progressbar*/
#progressbar {
    margin-bottom: 30px;
    /*CSS counters to number the steps*/
    counter-reset: step;
}

#progressbar li {
    list-style-type: none;
    color: black;
    text-transform: uppercase;
    width: 20%;
    float: left;
    position: relative;
    text-align: center;
}

#progressbar li:before {
    content: counter(step);
    counter-increment: step;
    width: 24px;
    height: 24px;
    line-height: 26px;
    display: block;
    font-size: 12px;
    color: #333;
    background: white;
    border-radius: 25px;
    margin: 0 auto 10px auto;
    text-align: center;
}

/*progressbar connectors*/
#progressbar li:after {
    content: '';
    width: 100%;
    height: 2px;
    background: white;
    position: absolute;
    left: -50%;
    top: 9px;
    z-index: -1;
    /*put it behind the numbers*/
}

#progressbar li:first-child:after {
    /*connector not needed before the first step*/
    content: none;
}

/*marking active/completed steps green*/
/*The number of the step and the connector before it = green*/
#progressbar li.active:before,
#progressbar li.active:after {
    background: #0099C7;
    color: white;
    text-align: center;
}


/* Not relevant to this form */
.dme_link {
    margin-top: 30px;
    text-align: center;
}

.dme_link a {
    background: #FFF;
    font-weight: bold;
    color: #0099C7;
    border: 0 none;
    border-radius: 25px;
    cursor: pointer;
    padding: 5px 25px;
    font-size: 12px;
}

.dme_link a:hover,
.dme_link a:focus {
    background: #C5C5F1;
    text-decoration: none;
}

/* Multpage */
.height15 {
    height: 15px !important;
}

.heading {
    font-size: 20px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
}

.report-detail-form {
    display: none;
}

.add-new-report {
    display: none;
}

.checkbox-container {
    border: 2px solid #b2b1b1;
    height: 125px;
    overflow-y: scroll;
    padding: 10px;
    position: relative;
}

.align-center {
    text-align: center !important;
}

.link_color {
    color: #0099C7 !important;
}

.cimage {
    margin-top: 10px;
}

.preview-main {
    height: 140px;
    text-align: center;
}

.preview-main img {
    margin-top: 45px;
}

.preview-footer {
    height: 50px;
    text-align: center;
    padding: 14px;
}

.preview-footer-text {
    font-size: 14px;
    text-transform: uppercase;
}

.paragraph {
    text-align: center;
    font-weight: bold;
}

.icon-colorpicker {
    width: 32px;
    height: 32px;
    display: block;
    float: left;
    box-shadow: 1px 1px 1px #d2d2d2;
    border-radius: 2px;
    margin-right: 10px;
    margin-top: 1px;
}

.push_icon_bg {
    background-color: <?php echo $theme['push_icon_bg'];
    ?>;
}

.push_separator_color {
    border-bottom: 2px solid <?php echo $theme['push_separator_color'];
    ?>;
}

.push_separator_bg_color {
    background-color: <?php echo $theme['push_separator_color'];
    ?>;
}

.push_text_color {
    color: <?php echo $theme['push_text_color'];
    ?>;
}

.push_text_bg_color {
    background-color: <?php echo $theme['push_text_color'];
    ?>;
}

.push_text_bg {
    background-color: <?php echo $theme['push_text_bg'];
    ?>;
}

.news_icon_bg {
    background-color: <?php echo $theme['news_icon_bg'];
    ?>;
}

.news_separator_color {
    border-bottom: 2px solid <?php echo $theme['news_separator_color'];
    ?>;
}

.news_separator_bg_color {
    background-color: <?php echo $theme['news_separator_color'];
    ?>;
}

.news_text_color {
    color: <?php echo $theme['news_text_color'];
    ?>;
}

.news_text_bg_color {
    background-color: <?php echo $theme['news_text_color'];
    ?>;
}

.news_text_bg {
    background-color: <?php echo $theme['news_text_bg'];
    ?>;
}

.event_icon_bg {
    background-color: <?php echo $theme['event_icon_bg'];
    ?>;
}

.event_separator_color {
    border-bottom: 2px solid <?php echo $theme['event_separator_color'];
    ?>;
}

.event_separator_bg_color {
    background-color: <?php echo $theme['event_separator_color'];
    ?>;
}

.event_text_color {
    color: <?php echo $theme['event_text_color'];
    ?>;
}

.event_text_bg_color {
    background-color: <?php echo $theme['event_text_color'];
    ?>;
}

.event_text_bg {
    background-color: <?php echo $theme['event_text_bg'];
    ?>;
}

.discount_icon_bg {
    background-color: <?php echo $theme['discount_icon_bg'];
    ?>;
}

.discount_separator_color {
    border-bottom: 2px solid <?php echo $theme['discount_separator_color'];
    ?>;
}

.discount_separator_bg_color {
    background-color: <?php echo $theme['discount_separator_color'];
    ?>;
}

.discount_text_color {
    color: <?php echo $theme['discount_text_color'];
    ?>;
}

.discount_text_bg_color {
    background-color: <?php echo $theme['discount_text_color'];
    ?>;
}

.discount_text_bg {
    background-color: <?php echo $theme['discount_text_bg'];
    ?>;
}

.stats_icon_bg {
    background-color: <?php echo $theme['stats_icon_bg'];
    ?>;
}

.stats_separator_color {
    border-bottom: 2px solid <?php echo $theme['stats_separator_color'];
    ?>;
}

.stats_separator_bg_color {
    background-color: <?php echo $theme['stats_separator_color'];
    ?>;
}

.stats_text_color {
    color: <?php echo $theme['stats_text_color'];
    ?>;
}

.stats_text_bg_color {
    background-color: <?php echo $theme['stats_text_color'];
    ?>;
}

.stats_text_bg {
    background-color: <?php echo $theme['stats_text_bg'];
    ?>;
}

.layout_menu_bg {
    background-color: <?php echo $theme['layout_menu_bg'];
    ?>;
}

.layout_menu_text_color {
    color: <?php echo $theme['layout_menu_text_color'];
    ?>;
}

.layout_menu_text_bg_color {
    background-color: <?php echo $theme['layout_menu_text_color'];
    ?>;
}

.layout_menu_back_icon_color {
    color: <?php echo $theme['layout_menu_back_icon_color'];
    ?>;
}

.layout_menu_back_icon_bg_color {
    background-color: <?php echo $theme['layout_menu_back_icon_color'];
    ?>;
}

.layout_menu_home_icon_color {
    color: <?php echo $theme['layout_menu_home_icon_color'];
    ?>;
}

.layout_menu_home_icon_bg_color {
    background-color: <?php echo $theme['layout_menu_home_icon_color'];
    ?>;
}

.layout_bg {
    background-color: <?php echo $theme['layout_bg'];
    ?>;
}

.layout-preview-main {
    height: 240px;
    text-align: center;
    padding-left: 27%;
    padding-right: 27%;
}

.layout-preview-menu {
    height: 40px;
    padding: 10px;
}

.layout-preview-page {
    height: 200px;
}

.margin-bkg {
    margin-top: 0px;
}

.pt30 {
    padding-top: 30px;
}

.mt15 {
    margin-top: 15px;
}

.mt8 {
    margin-top: 8px;
}

/*  bhoechie tab */
div.bhoechie-tab-container {
    z-index: 10;
    background-color: #ffffff;
    padding: 0 !important;
    border-radius: 4px;
    -moz-border-radius: 4px;
    border: 1px solid #ddd;
    margin-left: 40px;
    -webkit-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    -moz-box-shadow: 0 6px 12px rgba(0, 0, 0, .175);
    background-clip: padding-box;
    opacity: 0.97;
    filter: alpha(opacity=97);
}

div.bhoechie-tab-menu {
    padding-right: 0;
    padding-left: 0;
    padding-bottom: 0;
}

div.bhoechie-tab-menu div.list-group {
    margin-bottom: 0;
}

div.bhoechie-tab-menu div.list-group>a {
    margin-bottom: 0;
}

div.bhoechie-tab-menu div.list-group>a .glyphicon,
div.bhoechie-tab-menu div.list-group>a .fa {
    color: #0099C7;
}

div.bhoechie-tab-menu div.list-group>a:first-child {
    border-top-right-radius: 0;
    -moz-border-top-right-radius: 0;
}

div.bhoechie-tab-menu div.list-group>a:last-child {
    border-bottom-right-radius: 0;
    -moz-border-bottom-right-radius: 0;
}

div.bhoechie-tab-menu div.list-group>a.active,
div.bhoechie-tab-menu div.list-group>a.active .glyphicon,
div.bhoechie-tab-menu div.list-group>a.active .fa {
    background-color: #0099C7;
    background-image: #0099C7;
    color: #ffffff;
}

div.bhoechie-tab-menu div.list-group>a.active:after {
    content: '';
    position: absolute;
    left: 100%;
    top: 50%;
    margin-top: -13px;
    border-left: 0;
    border-bottom: 13px solid transparent;
    border-top: 13px solid transparent;
    border-left: 10px solid #0099C7;
}

div.bhoechie-tab-content {
    background-color: #ffffff;
    padding-left: 20px;
    padding-top: 10px;
}

div.report-extra-tab-content {
    background-color: #ffffff;
    padding-left: 20px;
    padding-top: 10px;
}

div.bhoechie-tab div.bhoechie-tab-content:not(.active) {
    display: none;
}

div.report-extra-tab div.report-extra-tab-content:not(.active) {
    display: none;
}

table {
    background-color: white;
}

table.dataTable {
    margin: 20px 0 10px;
    width: 100% !important;
}

table.dataTable th {
    text-align: left;
}

. {
    margin-bottom: 15px;
}

table.dataTable tbody tr.edit_product {
    cursor: pointer;
}

.dataTables_info {
    float: left;
    padding: 10px;
}

.dataTables_paginate {
    float: right;
}

.dataTables_paginate a {
    display: block;
    float: left;
    margin-left: 4px;
    padding: 6px;
}

.dataTables_paginate a.paginate_button_disabled {
    opacity: 0.3
}

.dataTable tbody tr:last-of-type {
    border-bottom: 0;
}

.center {
    text-align: center;
}

.inactive_pile {
    width: 100%;
    height: 25px;
    background-color: #b3b3b3;
    color: #4d4a4a;
}

.active_pile {
    width: 100%;
    color: white !important;
    height: 25px;
    background-color: #c51162;
}

.p-0 {
    padding: 0 !important;
}

.rating-star {
    font-size: 20px;
}

.ratechecked {
    color: #f8d578;
}

.rateunchecked {
    color: black;
}

.CodeMirror-foldgutter {
    width: 2.7em !important;
}

.CodeMirror pre {
    padding: 0 36px;
}
.custom_filter_style{
    background: #cccccc;
    border-radius: 3px;
    padding: 8px;
    height: 47px;
}

/* #tab_app_owners{
      display: none;
    } */
#table_appowners_filter input[type=search],
#table_usergroups_filter input[type=search],
#table_push_filter input[type=search],
#table_gallery_filter input[type=search],
#table_news_filter input[type=search],
#table_event_filter input[type=search],
#table_discount_filter input[type=search],
#table_report_status input[type=search] {
    border-style: none none solid;
    border-style: none none solid;
    border-width: medium medium 2px;
    padding: 6px 12px;
    border-color: #b2b1b1;
    background-color: #f3f3f3;
    -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075);
    -webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
    -o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
    transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}
/* Report Deitlas Tab CSS */
.tab {
  overflow: hidden;
  border: 1px solid #ccc;
  background-color: #f1f1f1;
}

.tab button {
  background-color: inherit;
  float: left;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
}

.tab button:hover {
  background-color: #ddd;
}

.tab button.active {
  background-color: #ccc;
  font-weight:bold;
}

.tabcontent {
  display: none;
  padding: 6px 12px;
  border: 1px solid #ccc;
  border-top: none;
}
</style>
<?php else : ?>
<?php if(!$license['is_platform']) : ?>
<div class="alert alert-info"><?php echo $license['info_message']; ?></div>
<?php endif; ?>
<div id="migareference" class="module-migareference">
    <div class="navbar-btn btn-sm"></div>
    <ul class="nav nav-tabs custome_nav" role="tablist">
        <li role="presentation" class="active">
            <a href="#tab_license" aria-controls="tab_license" role="tab"
                data-toggle="tab"><?php echo __('License'); ?></a>
        </li>
    </ul>
    <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="tab_license">
            <h3 class="title-editor no-border-radius title-feature-indent">
                <?php echo __('License'); ?>
            </h3>
            <div class="container-fluid content-feature pt30">
                <form id="appLicenseForm"
                    action="<?php echo $this->getUrl('migareference/public_license/saveapplicense'); ?>">
                    <input type="hidden" name="value_id" value="<?php echo $option->getId(); ?>" />
                    <input type="hidden" name="app_id" value="<?php echo $app_id; ?>" />
                    <div class="form-horizontal">
                        <div class="form-group">
                            <div class="col-sm-6">
                                <label for="key"><?php echo __("Your Module License Key") ?></label>
                                <input type="text" id="key" name="key" class="input-flat"
                                    placeholder="XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX" />
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-12">
                                <button class="button btn bt_save btn color-blue" type="submit">
                                    <?php echo __('Save'); ?>
                                </button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
$(document).ready(function() {
    page.setCallback('didappear', function() {
        $('#appLicenseForm').submit(function() {
            reload(this, this.action, true, function(data) {
                page.reload();
            });
            return false;
        });
    });
    page.setCallback('willdisappear', function() {
        $('#appLicenseForm').unbind('submit');
    });
});
</script>
<style type="text/css" media="screen">
.pt30 {
    padding-top: 30px;
}
</style>
<?php endif; ?>
